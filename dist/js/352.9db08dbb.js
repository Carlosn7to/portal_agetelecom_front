"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[352],{352:function(a,e,t){t.r(e),t.d(e,{default:function(){return Ue}});var s=t(3396),l=t(9242),i=t(7139);const n=a=>((0,s.dD)("data-v-7e279c3b"),a=a(),(0,s.Cn)(),a),o={id:"filters"},d=n((()=>(0,s._)("button",null,"Ações",-1))),r=(0,s.uE)('<div class="items-header" data-v-7e279c3b><div class="item" style="justify-content:flex-start;" data-v-7e279c3b><span data-v-7e279c3b>Colaborador</span></div><div class="item" data-v-7e279c3b><span data-v-7e279c3b>Meta atual</span></div><div class="item" data-v-7e279c3b><span data-v-7e279c3b>Usuário vinculado</span></div><div class="item" data-v-7e279c3b><span data-v-7e279c3b>Função</span></div><div class="item" data-v-7e279c3b><span data-v-7e279c3b>Canal</span></div><div class="item" data-v-7e279c3b><span data-v-7e279c3b>Tipo de comissão</span></div><div class="item" style="justify-content:flex-start;" data-v-7e279c3b><span data-v-7e279c3b>Supervisor</span></div><div class="item" data-v-7e279c3b><span data-v-7e279c3b>Gestor</span></div><div class="item" data-v-7e279c3b><span data-v-7e279c3b>Ações</span></div></div>',1),c={class:"container-body"},u={class:"item",style:{"justify-content":"flex-start"}},m={class:"item"},v={class:"item"},_={class:"item"},p={class:"item"},h={class:"item"},w={class:"item",style:{"justify-content":"flex-start"}},b={class:"item"},g={class:"item",style:{gap:"5px"}},f=["onClick"],k={key:1,id:"modal"};function y(a,e,t,n,y,C){const M=(0,s.up)("EditCollaborator");return(0,s.wg)(),(0,s.iD)(s.HY,null,[!0===y.list?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",o,[(0,s.wy)((0,s._)("input",{type:"text",name:"search",id:"search",autocomplete:"off",placeholder:"Pesquisar","onUpdate:modelValue":e[0]||(e[0]=a=>y.search=a)},null,512),[[l.nr,y.search]]),d]),r,(0,s._)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.CollaboratorFiltered,((a,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:e},[(0,s._)("div",u,[(0,s._)("span",null,(0,i.zw)(a.collaborator),1)]),(0,s._)("div",m,[(0,s._)("span",null,(0,i.zw)(a.meta),1)]),(0,s._)("div",v,[(0,s._)("span",null,(0,i.zw)(a.username),1)]),(0,s._)("div",_,[(0,s._)("span",null,(0,i.zw)(a.function),1)]),(0,s._)("div",p,[(0,s._)("span",null,(0,i.zw)(a.channel),1)]),(0,s._)("div",h,[(0,s._)("span",null,(0,i.zw)(a.type_commission),1)]),(0,s._)("div",w,[(0,s._)("span",null,(0,i.zw)(a.supervisor),1)]),(0,s._)("div",b,[(0,s._)("span",null,(0,i.zw)(a.management),1)]),(0,s._)("div",g,[(0,s._)("i",{class:"fi fi-rr-edit",onClick:e=>C.editCollaborator(a)},null,8,f)])])))),128))])],64)):(0,s.kq)("",!0),!0===y.modal?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)(M,{data:y.dataCollaborator,onClosePage:e[1]||(e[1]=a=>C.closePage())},null,8,["data"])])):(0,s.kq)("",!0)],64)}var C=t(680),M=t(8089);const D=a=>((0,s.dD)("data-v-9d505e9c"),a=a(),(0,s.Cn)(),a),q={id:"modal"},U={id:"card-modal"},z={class:"content-card"},V={class:"menu"},E=D((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-id-badge"})],-1))),S=[E],P=D((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-user"})],-1))),j=[P],A=D((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-chat-arrow-grow"})],-1))),R=[A],T=D((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-arrow-left"})],-1))),x=[T],Y={key:0,class:"content"},I=D((()=>(0,s._)("h1",null,"Visão geral",-1))),Z={class:"card-info"},H=D((()=>(0,s._)("h6",null,"Dados do ERP",-1))),N=D((()=>(0,s._)("b",null,"Nome:",-1))),G=D((()=>(0,s._)("b",null,"Função:",-1))),$=D((()=>(0,s._)("b",null,"Supervisor:",-1))),F=D((()=>(0,s._)("h6",null,"Dados do usuário",-1))),O=D((()=>(0,s._)("b",null,"Usuário vinculado:",-1))),B=D((()=>(0,s._)("b",null,"E-mail:",-1))),K=D((()=>(0,s._)("b",null,"Nível de acesso:",-1))),L=D((()=>(0,s._)("b",null,"Status de acesso:",-1))),W=D((()=>(0,s._)("h6",null,"Dados complementares",-1))),J=D((()=>(0,s._)("b",null,"Supervisor imediato:",-1))),Q=D((()=>(0,s._)("b",null,"Canal:",-1))),X=D((()=>(0,s._)("b",null,"Tipo de comissão:",-1))),aa={key:1,class:"content"},ea=D((()=>(0,s._)("h1",null,"Usuário",-1))),ta={key:0,class:"user"},sa=D((()=>(0,s._)("span",null,"Nenhum usuário encontrado!",-1))),la=D((()=>(0,s._)("br",null,null,-1))),ia=D((()=>(0,s._)("br",null,null,-1))),na={key:1,class:"user"},oa=D((()=>(0,s._)("span",null,"Vincular usuário manualmente",-1))),da=D((()=>(0,s._)("br",null,null,-1))),ra=D((()=>(0,s._)("br",null,null,-1))),ca={key:2,class:"user"},ua=D((()=>(0,s._)("span",null,"Dados de acesso",-1))),ma=D((()=>(0,s._)("br",null,null,-1))),va=D((()=>(0,s._)("br",null,null,-1))),_a=D((()=>(0,s._)("br",null,null,-1))),pa={class:"info-user"},ha={key:0},wa=D((()=>(0,s._)("b",null,"E-mail:",-1))),ba={key:1},ga=D((()=>(0,s._)("b",null,"E-mail:",-1))),fa={key:2},ka=D((()=>(0,s._)("br",null,null,-1))),ya=D((()=>(0,s._)("br",null,null,-1))),Ca=D((()=>(0,s._)("br",null,null,-1))),Ma=D((()=>(0,s._)("br",null,null,-1))),Da=D((()=>(0,s._)("br",null,null,-1))),qa={key:2,class:"content"},Ua=D((()=>(0,s._)("h1",null,"Meta",-1))),za=(0,s.uE)('<div class="items-header" data-v-9d505e9c><div class="item" style="justify-content:center;width:10%;" data-v-9d505e9c><span data-v-9d505e9c>ID</span></div><div class="item" style="width:30%;" data-v-9d505e9c><span data-v-9d505e9c>Mês referência</span></div><div class="item" style="justify-content:center;" data-v-9d505e9c><span data-v-9d505e9c>Meta</span></div><div class="item" style="width:20%;" data-v-9d505e9c><span data-v-9d505e9c>Alterado por</span></div><div class="item" style="width:20%;" data-v-9d505e9c><span data-v-9d505e9c>Ações</span></div></div>',1),Va={class:"container-body"},Ea={class:"item",style:{"justify-content":"center",width:"10%"}},Sa={class:"item",style:{width:"30%"}},Pa={class:"item",style:{"justify-content":"center"}},ja={class:"item",style:{width:"20%"}},Aa={key:0,class:"item",style:{gap:"5px",width:"20%"}},Ra={key:0,id:"modal"},Ta={id:"card-modal",style:{width:"20vw",height:"30vh"}},xa={id:"close-button"},Ya=D((()=>(0,s._)("input",{type:"submit",value:"Salvar meta"},null,-1))),Ia={key:1,id:"modal"},Za={id:"card-modal",style:{width:"20vw",height:"30vh"}},Ha={id:"close-button"},Na=D((()=>(0,s._)("input",{type:"submit",value:"Salvar meta"},null,-1)));function Ga(a,e,t,n,o,d){const r=(0,s.up)("VincUser");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",q,[(0,s._)("div",U,[(0,s._)("div",z,[(0,s._)("div",V,[(0,s._)("nav",null,[(0,s._)("ul",null,[(0,s._)("li",{class:(0,i.C_)({"page-selected":"overview"===o.page}),onClick:e[0]||(e[0]=a=>o.page="overview")},S,2),!1!==o.statusReq||0!==t.data.isAD&&null!==t.data.isAD?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:0,class:(0,i.C_)({"page-selected":"user"===o.page}),onClick:e[1]||(e[1]=a=>o.page="user")},j,2)),(0,s._)("li",{class:(0,i.C_)({"page-selected":"meta"===o.page}),onClick:e[2]||(e[2]=a=>o.page="meta")},R,2),(0,s._)("li",{onClick:e[3]||(e[3]=a=>d.closePage())},x)])])]),"overview"===o.page?((0,s.wg)(),(0,s.iD)("div",Y,[I,(0,s._)("div",Z,[(0,s._)("div",null,[H,(0,s._)("span",null,[N,(0,s.Uk)(" "+(0,i.zw)(t.data.collaborator),1)]),(0,s._)("span",null,[G,(0,s.Uk)(" "+(0,i.zw)(t.data.function),1)]),(0,s._)("span",null,[$,(0,s.Uk)(" "+(0,i.zw)(t.data.supervisor),1)])]),(0,s._)("div",null,[F,(0,s._)("span",null,[O,(0,s.Uk)(" "+(0,i.zw)(t.data.username),1)]),(0,s._)("span",null,[B,(0,s.Uk)(" "+(0,i.zw)(t.data.email),1)]),(0,s._)("span",null,[K,(0,s.Uk)(" "+(0,i.zw)(t.data.accessLevel),1)]),(0,s._)("span",null,[L,(0,s.Uk)(" "+(0,i.zw)(t.data.status),1)])]),(0,s._)("div",null,[W,(0,s._)("span",null,[J,(0,s.Uk)(" "+(0,i.zw)(t.data.management),1)]),(0,s._)("span",null,[Q,(0,s.Uk)(" "+(0,i.zw)(t.data.channel),1)]),(0,s._)("span",null,[X,(0,s.Uk)(" "+(0,i.zw)(t.data.type_commission),1)])])])])):(0,s.kq)("",!0),"user"!==o.page||0!==t.data.isAD&&null!==t.data.isAD?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",aa,[ea,""===t.data.username&&""===o.user.email?((0,s.wg)(),(0,s.iD)("div",ta,[sa,la,ia,(0,s._)("button",{onClick:e[4]||(e[4]=a=>d.newUser(t.data.id))},"Novo usuário")])):(0,s.kq)("",!0),""===t.data.username&&""===o.user.email?((0,s.wg)(),(0,s.iD)("div",na,[oa,da,ra,(0,s._)("button",{onClick:e[5]||(e[5]=a=>o.modal="vinc-user")},"Vincular usuário")])):(0,s.kq)("",!0),""!==t.data.username||""!==o.user.email?((0,s.wg)(),(0,s.iD)("div",ca,[ua,ma,va,_a,(0,s._)("div",pa,[""===o.user.email&&""!==t.data.email?((0,s.wg)(),(0,s.iD)("span",ha,[wa,(0,s.Uk)(" "+(0,i.zw)(t.data.email),1)])):(0,s.kq)("",!0),""!==o.user.email?((0,s.wg)(),(0,s.iD)("span",ba,[ga,(0,s.Uk)(" "+(0,i.zw)(o.user.email),1)])):(0,s.kq)("",!0),""!==o.user.password?((0,s.wg)(),(0,s.iD)("span",fa,"Nova senha: "+(0,i.zw)(o.user.password),1)):(0,s.kq)("",!0)]),ka,ya,Ca,Ma,Da,(0,s._)("button",{onClick:e[6]||(e[6]=a=>d.newPassword(t.data.user_id))},"Solicitar nova senha")])):(0,s.kq)("",!0)])),"meta"===o.page?((0,s.wg)(),(0,s.iD)("div",qa,[Ua,null===t.data.meta&&!1===o.newMeta.state?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[7]||(e[7]=a=>o.newMeta.status=!0)},"Adicionar meta")):(0,s.kq)("",!0),za,(0,s._)("div",Va,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.meta,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:a.id},[(0,s._)("div",Ea,[(0,s._)("span",null,(0,i.zw)(a.id),1)]),(0,s._)("div",Sa,[(0,s._)("span",null,(0,i.zw)(a.mes_competencia),1)]),(0,s._)("div",Pa,[(0,s._)("span",null,(0,i.zw)(a.meta),1)]),(0,s._)("div",ja,[(0,s._)("span",null,(0,i.zw)(a.modified_by),1)]),a.mes_competencia===this.month?((0,s.wg)(),(0,s.iD)("div",Aa,[(0,s._)("i",{class:"fi fi-rr-edit",onClick:e[8]||(e[8]=a=>o.actualMeta.status=!0)})])):(0,s.kq)("",!0)])))),128))])])):(0,s.kq)("",!0)])])]),!0===o.newMeta.status?((0,s.wg)(),(0,s.iD)("div",Ra,[(0,s._)("div",Ta,[(0,s._)("div",xa,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[9]||(e[9]=a=>o.newMeta.status=!1)})]),(0,s._)("form",{action:"#",id:"newMeta",onSubmit:e[11]||(e[11]=(0,l.iM)(((...a)=>d.addMeta&&d.addMeta(...a)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"number",name:"meta",id:"meta",placeholder:"Meta","onUpdate:modelValue":e[10]||(e[10]=a=>o.newMeta.value=a)},null,512),[[l.nr,o.newMeta.value]]),Ya],32)])])):(0,s.kq)("",!0),!0===o.actualMeta.status?((0,s.wg)(),(0,s.iD)("div",Ia,[(0,s._)("div",Za,[(0,s._)("div",Ha,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[12]||(e[12]=a=>o.actualMeta.status=!1)})]),(0,s._)("form",{action:"#",id:"newMeta",onSubmit:e[14]||(e[14]=(0,l.iM)(((...a)=>d.editMeta&&d.editMeta(...a)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"number",name:"meta",id:"meta",placeholder:"Meta","onUpdate:modelValue":e[13]||(e[13]=a=>o.actualMeta.value=a)},null,512),[[l.nr,o.actualMeta.value]]),Na],32)])])):(0,s.kq)("",!0),"vinc-user"===o.modal?((0,s.wg)(),(0,s.j4)(r,{key:2,onCloseModal:e[15]||(e[15]=a=>o.modal=""),onCloseReq:e[16]||(e[16]=a=>d.closeReq()),collab:t.data},null,8,["collab"])):(0,s.kq)("",!0)],64)}const $a=a=>((0,s.dD)("data-v-2e7bda2e"),a=a(),(0,s.Cn)(),a),Fa={id:"modal"},Oa={id:"card-modal"},Ba={id:"close-button"},Ka={id:"container-card"},La=$a((()=>(0,s._)("h1",null,"Vincular usuário",-1))),Wa=$a((()=>(0,s._)("div",{class:"items-header"},[(0,s._)("div",{class:"item",style:{"justify-content":"flex-start"}},[(0,s._)("span",null,"Usuário")]),(0,s._)("div",{class:"item",style:{"justify-content":"flex-start"}},[(0,s._)("span",null,"E-mail")])],-1))),Ja={key:0,class:"container-body"},Qa=["onClick"],Xa={class:"item",style:{"justify-content":"flex-start"}},ae={class:"item",style:{"justify-content":"flex-start",padding:"0"}};function ee(a,e,t,l,n,o){const d=(0,s.up)("ConfirmVincUser");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Fa,[(0,s._)("div",Oa,[(0,s._)("div",Ba,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[0]||(e[0]=(...a)=>o.closePage&&o.closePage(...a))})]),(0,s._)("div",Ka,[La,Wa,!0===n.status?((0,s.wg)(),(0,s.iD)("div",Ja,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.data||[],(a=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:a.id,onClick:e=>(n.modal="confirm-vinc",n.email=a.email,n.id=a.id)},[(0,s._)("div",Xa,[(0,s._)("span",null,(0,i.zw)(a.name),1)]),(0,s._)("div",ae,[(0,s._)("span",null,(0,i.zw)(a.email),1)])],8,Qa)))),128))])):(0,s.kq)("",!0)])])]),"confirm-vinc"===n.modal?((0,s.wg)(),(0,s.j4)(d,{key:0,collaborator:this.collab,email:n.email,id:n.id,onCloseModal:e[1]||(e[1]=a=>n.modal=""),onSuccessReq:e[2]||(e[2]=a=>(n.modal="",o.successReq()))},null,8,["collaborator","email","id"])):(0,s.kq)("",!0)],64)}const te=a=>((0,s.dD)("data-v-62ef292c"),a=a(),(0,s.Cn)(),a),se={id:"modal"},le={id:"card-modal"},ie=te((()=>(0,s._)("h1",null,"Vincular colaborador",-1))),ne={id:"info"},oe=te((()=>(0,s._)("h3",null,"Dados do vínculo",-1))),de={id:"content"},re=te((()=>(0,s._)("b",null,"Colaborador:",-1))),ce={id:"content"},ue=te((()=>(0,s._)("b",null,"Usuário:",-1))),me={id:"buttons"};function ve(a,e,t,l,n,o){return(0,s.wg)(),(0,s.iD)("div",se,[(0,s._)("div",le,[ie,(0,s._)("div",ne,[oe,(0,s._)("div",de,[(0,s._)("span",null,[re,(0,s.Uk)(" "+(0,i.zw)(t.collaborator.collaborator),1)])]),(0,s._)("div",ce,[(0,s._)("span",null,[ue,(0,s.Uk)(" "+(0,i.zw)(t.email),1)])])]),(0,s._)("div",me,[(0,s._)("button",{onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a))},"Cancelar"),(0,s._)("button",{id:"vinc",onClick:e[1]||(e[1]=(...a)=>o.linkUser&&o.linkUser(...a))},"Vincular")])])])}var _e={name:"ConfirmVincUser",props:{collaborator:{required:!0},email:{required:!0},id:{required:!0}},methods:{closeModal:function(){this.$emit("close-modal")},successReq:function(){this.$emit("success-req")},linkUser:function(){(0,M.m)({method:"PUT",url:"agerv/management/user-link",headers:{Authorization:"Bearer "+C.Z.get("token")},data:{idUser:this.id,idCollab:this.collaborator.id}}).then((a=>{alert(a.data),this.successReq()}))}}},pe=t(89);const he=(0,pe.Z)(_e,[["render",ve],["__scopeId","data-v-62ef292c"]]);var we=he,be={name:"VincUser",components:{ConfirmVincUser:we},emits:["close-modal","success-req"],props:{collab:{required:!0}},data(){return{search:"",data:{},status:!1,email:"",modal:"",id:0}},methods:{closePage:function(){this.$emit("close-modal")},successReq:function(){this.$emit("close-req")},getUsersNotVinc:function(){(0,M.m)({method:"GET",url:"agerv/management/users-not-link",headers:{Authorization:"Bearer "+C.Z.get("token")},params:{name:this.collab.collaborator}}).then((a=>{this.data=a.data,this.status=!0}))}},beforeMount(){this.getUsersNotVinc()}};const ge=(0,pe.Z)(be,[["render",ee],["__scopeId","data-v-2e7bda2e"]]);var fe=ge,ke={name:"EditCollaborator",components:{VincUser:fe},emits:["close-page","successReq"],props:{data:{required:!0}},data(){return{res:{},page:"overview",user:{email:"",password:""},meta:{},month:"",newMeta:{status:!1,value:null,state:!1},actualMeta:{status:!1,value:this.data.meta},modal:"",statusReq:!1}},methods:{getInfo:function(){(0,M.m)({method:"GET",url:"agerv/management/collaborators/"+this.data.id}).then((a=>{this.res=a.data,this.getMeta()}))},newUser:function(a){(0,M.m)({method:"POST",url:"agerv/management/new-user",data:{id:a}}).then((a=>{this.user.email=a.data.email,this.user.password=a.data.password}))},newPassword:function(a){(0,M.m)({method:"GET",url:"agerv/management/new-password/"+a}).then((a=>{this.user.email=a.data.email,this.user.password=a.data.password}))},closePage:function(){this.$emit("close-page")},getMeta:function(){(0,M.m)({method:"GET",url:"agerv/management/meta/"+this.data.id}).then((a=>{this.meta=a.data}))},addMeta:function(){(0,M.m)({method:"POST",url:"agerv/management/meta",data:{id:this.data.id,meta:this.newMeta.value}}).then((()=>{this.newMeta.status=!1,this.newMeta.state=!0,this.newMeta.value=0,this.getMeta()}))},editMeta:function(){(0,M.m)({method:"PUT",url:`agerv/management/meta/${this.data.id}`,params:{meta:this.actualMeta.value}}).then((()=>{this.actualMeta.status=!1,this.getMeta()}))},getMonth:function(){const a=new Date;a.getMonth()<10?this.month=a.getMonth()+1+"":this.month=(a.getMonth()+1).toString()},closeReq:function(){this.page="overview",this.modal="",this.statusReq=!0}},beforeMount(){this.getInfo(),this.getMonth()}};const ye=(0,pe.Z)(ke,[["render",Ga],["__scopeId","data-v-9d505e9c"]]);var Ce=ye,Me=t(65),De={name:"DashboardPage",components:{EditCollaborator:Ce},emits:["closePage"],data(){return{mode:C.Z.get("mode"),items:{},search:"",loading:!0,list:!1,modal:!1,dataCollaborator:{}}},methods:{...(0,Me.OI)(["SAVE_SYSTEM"]),modeView:function(a){this.mode=a},getCollaborators(){(0,M.m)({method:"GET",url:"agerv/management/collaborators",headers:{Authorization:"Bearer "+C.Z.get("token")}}).then((a=>{this.items=a.data,this.list=!0,this.SAVE_SYSTEM({loading:!1})})).catch((a=>{console.log(a)}))},editCollaborator(a){this.modal=!0,this.dataCollaborator=a},closePage:function(){this.modal=!1}},computed:{CollaboratorFiltered:function(){let a=[];return a=this.items.filter((a=>a.collaborator.toLowerCase().indexOf(this.search.toLowerCase())>-1)),a}},created(){this.getCollaborators()}};const qe=(0,pe.Z)(De,[["render",y],["__scopeId","data-v-7e279c3b"]]);var Ue=qe}}]);
//# sourceMappingURL=352.9db08dbb.js.map