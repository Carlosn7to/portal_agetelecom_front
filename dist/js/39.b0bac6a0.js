"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[39],{7039:function(t,o,e){e.r(o),e.d(o,{default:function(){return pt}});var a=e(3396),l=e(7139),n=e(9242);const r=t=>((0,a.dD)("data-v-20833cd6"),t=t(),(0,a.Cn)(),t),i={class:"container"},d={class:"filters"},s=r((()=>(0,a._)("div",{class:"search"},[(0,a._)("input",{type:"text",name:"search",id:"search",placeholder:"Buscar...",autocomplete:"off"})],-1))),c={class:"filter"},u=r((()=>(0,a._)("i",{class:"fi fi-rs-filter"},null,-1))),h=[u],p=r((()=>(0,a._)("i",{class:"fi fi-rs-file-excel"},null,-1))),_=[p],m={class:"period"},w=r((()=>(0,a._)("span",null,"Período",-1))),f={class:"turns"},g={class:"data"},k={class:"table"},y={key:0},v={class:"filters-arrow"},D=r((()=>(0,a._)("span",null,"Protocolo",-1))),b={class:"filters-options"},S=r((()=>(0,a._)("th",null,"Status",-1))),z={class:"filters-arrow"},N=r((()=>(0,a._)("span",null,"Turno",-1))),T={class:"filters-options"},C=r((()=>(0,a._)("th",null,"Tipo de solicitação",-1))),q=r((()=>(0,a._)("th",null,"Nº do contrato",-1))),I=r((()=>(0,a._)("th",null,"Nome do cliente",-1))),E=r((()=>(0,a._)("th",null,"Equipe",-1))),x={class:"filters-arrow"},A=r((()=>(0,a._)("span",null,"Técnico",-1))),U={class:"filters-options"},M=r((()=>(0,a._)("th",null,"Data inicio att.",-1))),H=r((()=>(0,a._)("th",null,"Data fim att.",-1))),P=r((()=>(0,a._)("th",null,"Data inicio agendamento",-1))),Y=r((()=>(0,a._)("th",null,"Data fim agendamento",-1))),B=r((()=>(0,a._)("th",null,"Situacao do contrato",-1))),V=r((()=>(0,a._)("th",null,"Status do contrato",-1))),Z=r((()=>(0,a._)("th",null,"Contexto",-1))),F=r((()=>(0,a._)("th",null,"Problema",-1))),L={key:0,class:"modal-filters"},K={class:"card-modal"},O={class:"close-button"},R=r((()=>(0,a._)("h2",null,"Filtros disponíveis",-1))),j={class:"filters-available"},G={class:"filter-available"},J=r((()=>(0,a._)("label",{for:"typeNote"},"Tipo de solicitação: ",-1))),Q=r((()=>(0,a._)("option",{value:"0",selected:""},"--- Selecione um tipo de solicitação ---",-1))),W=["value"],X={class:"filter-available"},$=r((()=>(0,a._)("label",{for:"dateSchedule"},[(0,a.Uk)("Data do agendamento: "),(0,a._)("b",null,"*")],-1))),tt={class:"filter-available"},ot=r((()=>(0,a._)("label",{for:"region"},"Região: ",-1))),et=r((()=>(0,a._)("option",{value:"0",selected:""},"--- Selecione a região ---",-1))),at=["value"],lt=r((()=>(0,a._)("div",{class:"filter-data"},[(0,a._)("button",null,"Filtrar")],-1)));function nt(t,o,e,r,u,p){const nt=(0,a.up)("LoadingSpinner");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",i,[(0,a._)("div",d,[s,(0,a._)("div",c,[(0,a._)("button",{onClick:o[0]||(o[0]=(...t)=>p.modalAction&&p.modalAction(...t))},h),u.dataItems.length?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:o[1]||(o[1]=(...t)=>p.download&&p.download(...t))},_)):(0,a.kq)("",!0)]),(0,a._)("span",null,[(0,a.Uk)("Contagem do resultado: "),(0,a._)("b",null,(0,l.zw)(u.dataItems.length?u.dataItems.length:0),1)]),(0,a._)("div",m,[w,(0,a._)("div",f,[(0,a._)("p",null,[(0,a.Uk)("Manhã: "),(0,a._)("b",null,(0,l.zw)(u.countTurns.morning),1)]),(0,a._)("p",null,[(0,a.Uk)("Tarde: "),(0,a._)("b",null,(0,l.zw)(u.countTurns.afternoon),1)]),(0,a._)("p",null,[(0,a.Uk)("Noite: "),(0,a._)("b",null,(0,l.zw)(u.countTurns.night),1)])])])]),(0,a._)("div",g,[(0,a._)("div",k,[u.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("table",y,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,[(0,a._)("div",v,[D,(0,a._)("div",b,["no-order"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:o[2]||(o[2]=t=>p.ordenateData("protocol","up"))})):(0,a.kq)("",!0),"up"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:o[3]||(o[3]=t=>p.ordenateData("protocol","down"))})):(0,a.kq)("",!0),"down"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:o[4]||(o[4]=t=>p.ordenateData("protocol","no-order"))})):(0,a.kq)("",!0)])])]),S,(0,a._)("th",null,[(0,a._)("div",z,[N,(0,a._)("div",T,["no-order"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:o[5]||(o[5]=t=>p.ordenateData("turn","up"))})):(0,a.kq)("",!0),"up"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:o[6]||(o[6]=t=>p.ordenateData("turn","down"))})):(0,a.kq)("",!0),"down"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:o[7]||(o[7]=t=>p.ordenateData("turn","no-order"))})):(0,a.kq)("",!0)])])]),C,q,I,E,(0,a._)("th",null,[(0,a._)("div",x,[A,(0,a._)("div",U,["no-order"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:o[8]||(o[8]=t=>p.ordenateData("technical","up"))})):(0,a.kq)("",!0),"up"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:o[9]||(o[9]=t=>p.ordenateData("technical","down"))})):(0,a.kq)("",!0),"down"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:o[10]||(o[10]=t=>p.ordenateData("technical","no-order"))})):(0,a.kq)("",!0)])])]),M,H,P,Y,B,V,Z,F])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.dataItems,((t,o)=>((0,a.wg)(),(0,a.iD)("tr",{key:o},[(0,a._)("td",null,(0,l.zw)(t.protocol),1),(0,a._)("td",null,(0,l.zw)(t.status),1),(0,a._)("td",null,(0,l.zw)(t.turnName),1),(0,a._)("td",null,(0,l.zw)(t.type_note),1),(0,a._)("td",null,(0,l.zw)(t.contract_id),1),(0,a._)("td",null,(0,l.zw)(t.name_client),1),(0,a._)("td",null,(0,l.zw)(t.team),1),(0,a._)("td",null,(0,l.zw)(t.technical),1),(0,a._)("td",null,(0,l.zw)(t.date_start_attendance),1),(0,a._)("td",null,(0,l.zw)(t.date_end_attendance),1),(0,a._)("td",null,(0,l.zw)(t.date_start_schedule),1),(0,a._)("td",null,(0,l.zw)(t.date_end_schedule),1),(0,a._)("td",null,(0,l.zw)(t.stage_contract),1),(0,a._)("td",null,(0,l.zw)(t.status_contract),1),(0,a._)("td",null,(0,l.zw)(t.context),1),(0,a._)("td",null,(0,l.zw)(t.problem),1)])))),128))])])),u.loading?((0,a.wg)(),(0,a.j4)(nt,{key:1})):(0,a.kq)("",!0)])])]),u.modal?((0,a.wg)(),(0,a.iD)("div",L,[(0,a._)("div",K,[(0,a._)("div",O,[(0,a._)("i",{class:"fi fi-rs-cross",onClick:o[11]||(o[11]=(...t)=>p.modalAction&&p.modalAction(...t))})]),R,(0,a._)("form",{action:"#",onSubmit:o[15]||(o[15]=(0,n.iM)(((...t)=>p.getData&&p.getData(...t)),["prevent"]))},[(0,a._)("div",j,[(0,a._)("div",G,[J,(0,a.wy)((0,a._)("select",{name:"typeNote",id:"typeNote","onUpdate:modelValue":o[12]||(o[12]=t=>u.payload.typeNote=t)},[Q,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.filters.typeNote,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,l.zw)(t.title),9,W)))),128))],512),[[n.bM,u.payload.typeNote]])]),(0,a._)("div",X,[$,(0,a.wy)((0,a._)("input",{type:"date",name:"dateSchedule",id:"dateSchedule","onUpdate:modelValue":o[13]||(o[13]=t=>u.payload.dateSchedule=t),required:""},null,512),[[n.nr,u.payload.dateSchedule]])]),(0,a._)("div",tt,[ot,(0,a.wy)((0,a._)("select",{name:"region",id:"region","onUpdate:modelValue":o[14]||(o[14]=t=>u.payload.region=t)},[et,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.filters.region,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,l.zw)(t.title),9,at)))),128))],512),[[n.bM,u.payload.region]])]),lt])],32)])])):(0,a.kq)("",!0)],64)}var rt=e(65),it=e(8089),dt=e(680),st=e(9372),ct={name:"HomeSchedule",components:{LoadingSpinner:st.Z},data(){return{filtered:!1,modal:!1,filters:{typeNote:{},region:{}},payload:{typeNote:0,dateSchedule:null,region:0},loading:!1,dataItems:{},orders:{protocol:"no-order",turn:"no-order",technical:"no-order"},countTurns:{morning:0,afternoon:0,night:0}}},methods:{...(0,rt.OI)(["SAVE_SYSTEM"]),modalAction(){this.modal=!this.modal},getFilters:function(){(0,it.m)({method:"GET",url:"agetools/tools/schedule/dashboard/filters",headers:{Authorization:"Bearer "+dt.Z.get("token")}}).then((t=>{this.filters.typeNote=t.data.typeNotes,this.filters.region=t.data.regions}))},getData:function(){this.loading=!0,this.modal=!1,(0,it.m)({method:"GET",url:"agetools/tools/schedule/dashboard/data",params:{dateSchedule:this.payload.dateSchedule,typeNote:this.payload.typeNote,region:this.payload.region},headers:{Authorization:"Bearer "+dt.Z.get("token")}}).then((t=>{this.loading=!1,this.dataItems=t.data,this.dataItems.forEach((t=>{let o=new Date(t.date_start_schedule),e=o.getHours(),a="";e>=6&&e<12?(a="Manhã",this.countTurns.morning++):e>=12&&e<18?(a="Tarde",this.countTurns.afternoon++):(a="Noite",this.countTurns.night++),t["turnName"]=a}))}))},download:function(){const t=["Protocolo","Status","Tipo de solicitação","Equipe","Técnico","Data inicio att.","Data fim att.","Data inicio agendamento","Data fim agendamento","Nome do cliente","Nº do contrato","Situacao do contrato","Status do contrato","Contexto","Problema"],o=this.dataItems;(0,it.m)({method:"POST",url:"agetools/tools/schedule/dashboard/download-excel",data:{headersExcel:t,data:o},responseType:"blob",headers:{Authorization:"Bearer "+dt.Z.get("token")}}).then((t=>{let o=new Blob([t.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=document.createElement("a");e.href=window.URL.createObjectURL(o),e.download="agenda.xlsx",e.click()}))},ordenateData:function(t,o){let e=()=>{this.orders.turn="no-order",this.orders.technical="no-order",this.orders.protocol="no-order"};switch(t){case"turn":e(),this.orders.turn=o,"up"!==o&&"down"!==o||this.dataItems.sort(((t,e)=>t.turnName>e.turnName?"up"===o?1:-1:t.turnName<e.turnName?"down"===o?1:-1:void 0)),"no-order"===o&&this.dataItems.sort(((t,o)=>t.protocol>o.protocol?-1:t.protocol<o.protocol?1:void 0));break;case"protocol":e(),this.orders.protocol=o,"up"!==o&&"down"!==o||this.dataItems.sort(((t,e)=>t.protocol>e.protocol?"up"===o?1:-1:t.protocol<e.protocol?"down"===o?1:-1:void 0)),"no-order"===o&&this.dataItems.sort(((t,o)=>t.protocol>o.protocol?-1:t.protocol<o.protocol?1:void 0));break;case"technical":e(),this.orders.technical=o,"up"!==o&&"down"!==o||this.dataItems.sort(((t,e)=>t.technical>e.technical?"up"===o?1:-1:t.technical<e.technical?"down"===o?1:-1:void 0)),"no-order"===o&&this.dataItems.sort(((t,o)=>t.protocol>o.protocol?-1:t.protocol<o.protocol?1:void 0));break}}},computed:{...(0,rt.Se)(["system"])},beforeMount(){this.SAVE_SYSTEM({loading:!1}),this.getFilters()}},ut=e(89);const ht=(0,ut.Z)(ct,[["render",nt],["__scopeId","data-v-20833cd6"]]);var pt=ht}}]);
//# sourceMappingURL=39.b0bac6a0.js.map