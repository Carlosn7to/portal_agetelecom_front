{"version":3,"file":"js/648.d3829a16.js","mappings":"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","sources":["webpack://ageportal/./src/views/intranet/ageReport/app/ReportPage.vue","webpack://ageportal/./src/views/intranet/ageReport/app/ReportPage.vue?61bb"],"sourcesContent":["<template>\r\n  <h1>\r\n    Relatórios disponíveis\r\n  </h1>\r\n  <div id=\"filters\">\r\n    <input type=\"text\"\r\n           name=\"search\"\r\n           id=\"search\"\r\n           autocomplete=\"off\"\r\n           placeholder=\"Pesquisar relatório...\"\r\n           v-model=\"search\">\r\n  </div>\r\n\r\n  <div id=\"reports\" v-if=\"status === true\">\r\n    <div class=\"report\"\r\n         v-for=\"(report, key) in ReportsFiltered\"\r\n         :key=\"key\"\r\n         :style=\"'animation-delay: '+key * 0.1+'s'\">\r\n      <div class=\"title\">\r\n        <i class=\"fi fi-rr-document-signed\"></i>\r\n        <span>{{ report.nome }}</span>\r\n      </div>\r\n      <div class=\"actions\">\r\n        <button @click=\"viewReport(report.id)\">\r\n          <i class=\"fi fi-rr-eye\"></i>\r\n          <span>Visualizar prévia</span>\r\n        </button>\r\n        <button @click=\"downloadReport(report.isPeriodoHora,report.isPeriodo,report.url,report.nome_arquivo, report.id)\">\r\n          <i class=\"fi fi-rr-download\"></i>\r\n          <span>Baixar relatório</span>\r\n        </button>\r\n        <button>\r\n          <i class=\"fi fi-rr-envelope\"></i>\r\n          <span>Enviar E-mail</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id=\"modal\" v-if=\"modal === true\">\r\n    <div id=\"card-modal\">\r\n      <div id=\"close-button\">\r\n        <i class=\"fi fi-rr-cross-small\" @click=\"this.modal = false\"></i>\r\n      </div>\r\n      <h5 style=\"text-align: center; font-size: 1.4rem\">Selecione o período</h5>\r\n      <form action=\"#\" @submit.prevent=\"downloadReport(0, 0, this.url, this.name, this.reportId)\">\r\n        <input type=\"datetime-local\" name=\"first_period\" id=\"first_period\" v-model=\"firstPeriod\" required>\r\n        <input type=\"datetime-local\" name=\"last_period\" id=\"last_period\" v-model=\"lastPeriod\" required>\r\n        <input type=\"submit\" value=\"Baixar\">\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Cookie from \"js-cookie\";\r\nimport {AXIOS} from \"../../../../../services/api.ts\";\r\nimport {mapGetters, mapMutations} from \"vuex\";\r\n\r\nexport default {\r\n  name: \"ReportPage\",\r\n  components: {\r\n  },\r\n  data () {\r\n    return {\r\n      mode: Cookie.get('mode'),\r\n      reports: {},\r\n      url: '',\r\n      name: '',\r\n      reportId: 0,\r\n      modal: false,\r\n      firstPeriod: '',\r\n      lastPeriod: '',\r\n      firstPeriodHour: '',\r\n      lastPeriodHour: '',\r\n      loading: false,\r\n      status: false,\r\n      search: ''\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n       'SAVE_MENU',\r\n        'SAVE_SYSTEM'\r\n    ]),\r\n    modeView: function (mode) {\r\n      this.mode = mode\r\n    },\r\n    getReports: function() {\r\n\r\n      AXIOS({\r\n        method: 'GET',\r\n        url: 'agereport/report/reports',\r\n        headers: {\r\n          'Authorization': 'Bearer' + Cookie.get('token')\r\n        }\r\n      }).then((res) => {\r\n        this.reports = res.data\r\n        this.status = true\r\n        this.SAVE_SYSTEM({loading: false})\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    viewReport: function (id) {\r\n      alert(id)\r\n    },\r\n    downloadReport: function (periodHour, period, url, name, id) {\r\n\r\n      if(period === 1 || periodHour === 1) {\r\n        this.name = name\r\n        this.reportId = id\r\n\r\n        this.modal = true\r\n\r\n      } else {\r\n        this.loading = true\r\n        this.reportId = id\r\n\r\n        this.SAVE_SYSTEM({loading: true})\r\n\r\n\r\n        AXIOS({\r\n          method: 'GET',\r\n          url: `agereport/report-download/${this.reportId}`,\r\n          headers: {\r\n            'Authorization': 'Bearer '+Cookie.get('token')\r\n          },\r\n          params: {\r\n            firstPeriod: this.firstPeriod,\r\n            lastPeriod: this.lastPeriod,\r\n          },\r\n          responseType: 'blob',\r\n        }).then((res) => {\r\n\r\n          this.loading = false\r\n\r\n          let blob = new Blob([res.data],\r\n              { type: 'vnd.openxmlformats-officedocument.spreadsheetml.sheet' })\r\n          let link = document.createElement('a')\r\n          link.href = window.URL.createObjectURL(blob)\r\n          link.download = name\r\n          link.click()\r\n          this.modal = false\r\n          this.SAVE_SYSTEM({loading: false})\r\n        })\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n        'system'\r\n    ]),\r\n    ReportsFiltered: function () {\r\n\r\n      let values = []\r\n\r\n      values = this.reports.filter((value) => {\r\n        return (\r\n            value.nome.toLowerCase().indexOf(this.search.toLowerCase()) > -1\r\n        )\r\n      })\r\n      return values\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getReports()\r\n    this.SAVE_MENU({system: 'agereport', selected: 'home'})\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n#content-page {\r\n  overflow-y: auto;\r\n\r\n  h1 {\r\n    font-size: 2.4rem;\r\n    font-weight: 500;\r\n    color: #777;\r\n    padding: 1vh 1vw;\r\n    animation: up forwards ease-in-out .4s;\r\n    opacity: 0;\r\n  }\r\n\r\n  #filters {\r\n    width: 100%;\r\n    padding: 2vh 1vw;\r\n    @include flex(row, flex-start, center, 15px);\r\n\r\n    input[type=text] {\r\n      width: 25%;\r\n      padding: 10px 8px;\r\n      border-radius: 5px;\r\n      outline: none;\r\n      border: 1px solid $border;\r\n      transition: border ease-in-out .2s;\r\n\r\n      &:focus {\r\n        border-color: $border-hover;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  #reports {\r\n    @include container(100%, initial, 1vh 1vw, transparent);\r\n    @include flex(row, flex-start, initial, 20px);\r\n    flex-wrap: wrap;\r\n\r\n    .report {\r\n      @include container(initial, initial, 3px 1vw, #fff);\r\n      width: 100%;\r\n      border-radius: 5px;\r\n      @include flex(row, space-between, center, 5px);\r\n      word-break: break-all;\r\n      border: 1px solid $border;\r\n      animation: up forwards ease-in-out .4s;\r\n      opacity: 0;\r\n\r\n\r\n      .title {\r\n        @include flex(row, flex-start, center, 1vw);\r\n\r\n        i {\r\n          font-size: 2.2rem;\r\n          color: $primary;\r\n        }\r\n\r\n        span {\r\n          font-size: 1.4rem;\r\n          text-align: center;\r\n          font-weight: 600;\r\n          color: $h1-light;\r\n        }\r\n      }\r\n\r\n\r\n      .actions {\r\n        @include flex(row, flex-start, center, 1vw);\r\n\r\n        button {\r\n          @include flex(row, flex-start, center, 0.5vw);\r\n          span {\r\n            padding-bottom: 3px;\r\n          }\r\n\r\n\r\n        }\r\n\r\n        button:nth-child(1) {\r\n          @include btn-dashboard()\r\n        }\r\n\r\n        button:nth-child(2) {\r\n          @include btn-dashboard();\r\n          background-color: $black;\r\n          color: #f1f1f1;\r\n          font-weight: 400;\r\n\r\n          &:hover {\r\n            background-color: $black-hover;\r\n            color: #fff;\r\n          }\r\n        }\r\n\r\n        button:nth-child(3) {\r\n          @include btn-dashboard(true);\r\n          font-weight: 400;\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\n#modal {\r\n  #card-modal {\r\n    width: 20vw;\r\n    padding: 1vh 1vw;\r\n\r\n    form {\r\n      @include flex(column, flex-initial, initial, 10px);\r\n      padding: 2vh 3vw;\r\n\r\n      input[type=date] {\r\n        border: 2px solid #cccccc90;\r\n        padding: 10px 3px;\r\n      }\r\n\r\n      input[type=submit] {\r\n        background-color: $age-bl;\r\n        border: 1px solid $age-bl;\r\n        color: #fff;\r\n        margin-top: 10px;\r\n        padding: 5px 15px;\r\n        border-radius: 3px;\r\n        @include tr-p;\r\n\r\n        &:hover {\r\n          background-color: #fff;\r\n          border-color: $age-bl;\r\n          color: $age-bl;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.loading-bar {\r\n  @include bar;\r\n}\r\n\r\n\r\n.mode-l-p {\r\n  background-color: $ml-back-l;\r\n\r\n}\r\n\r\n.mode-dark {\r\n  background-color: $dark-mode-background;\r\n\r\n  h1 {\r\n    color: $md-text-h1 !important;\r\n  }\r\n\r\n  #reports {\r\n\r\n    .report {\r\n      background-color: $dark-mode-card !important;\r\n      border: 2px solid $dark-mode-card !important;\r\n\r\n      span {\r\n        color: $md-text-light !important;\r\n      }\r\n\r\n      &:hover {\r\n        border: 2px solid $age-or;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  #modal {\r\n    #card-modal {\r\n      background-color: $dark-mode-background;\r\n\r\n      h5 {\r\n        color: $dark-mode-text-primary;\r\n      }\r\n\r\n      form {\r\n        input[type=datetime-local] {\r\n          background-color: $dark-mode-card !important;\r\n          color: $dark-mode-text-secondary;\r\n        }\r\n\r\n        input[type=submit] {\r\n          background-color: $dark-mode-card;\r\n          border-color: $dark-mode-card;\r\n          color: $age-or;\r\n          font-weight: 500;\r\n\r\n          &:hover {\r\n            color: $dark-mode-text-primary;\r\n            border-color: $age-or;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./ReportPage.vue?vue&type=template&id=0bb99fee&scoped=true\"\nimport script from \"./ReportPage.vue?vue&type=script&lang=js\"\nexport * from \"./ReportPage.vue?vue&type=script&lang=js\"\n\nimport \"./ReportPage.vue?vue&type=style&index=0&id=0bb99fee&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\carlos.neto\\\\Documents\\\\Desenvolvimento\\\\Em progresso\\\\portal\\\\portal_agetelecom_front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0bb99fee\"]])\n\nexport default __exports__"],"names":["_createElementVNode","id","class","_hoisted_8","_hoisted_9","_hoisted_12","_hoisted_13","style","type","value","_hoisted_1","_hoisted_2","name","autocomplete","placeholder","$data","_createElementBlock","_hoisted_3","_Fragment","$options","report","key","_hoisted_4","_hoisted_5","nome","_hoisted_6","onClick","isPeriodoHora","isPeriodo","url","nome_arquivo","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","modal","_hoisted_19","action","onSubmit","this","reportId","required","_hoisted_20","components","data","mode","Cookie","reports","firstPeriod","lastPeriod","firstPeriodHour","lastPeriodHour","loading","status","search","methods","mapMutations","modeView","getReports","AXIOS","method","headers","then","res","SAVE_SYSTEM","catch","error","console","log","viewReport","alert","downloadReport","periodHour","period","params","responseType","blob","Blob","link","document","createElement","href","window","URL","createObjectURL","download","click","computed","mapGetters","ReportsFiltered","values","filter","toLowerCase","indexOf","mounted","SAVE_MENU","system","selected","__exports__","render"],"sourceRoot":""}