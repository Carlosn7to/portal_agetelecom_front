"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[687],{7687:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});var r=o(3396),i=o(7139),a=o(9242);const d=e=>((0,r.dD)("data-v-255e1ba4"),e=e(),(0,r.Cn)(),e),s=d((()=>(0,r._)("h1",null," Relatórios disponíveis ",-1))),n={key:0,id:"reports"},l=["onClick"],p=d((()=>(0,r._)("i",{class:"fi fi-rr-document-signed"},null,-1))),u={key:1,id:"modal"},m={id:"card-modal"},c={id:"close-button"},h=d((()=>(0,r._)("h5",{style:{"text-align":"center","font-size":"1.4rem"}},"Selecione o período",-1))),f=d((()=>(0,r._)("input",{type:"submit",value:"Baixar"},null,-1)));function g(e,t,o,d,g,_){return(0,r.wg)(),(0,r.iD)(r.HY,null,[s,!0===g.status?((0,r.wg)(),(0,r.iD)("div",n,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.reports,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"report",key:t,style:(0,i.j5)("animation-delay: "+.1*t+"s"),onClick:t=>_.downloadReport(e.isPeriodoHora,e.isPeriodo,e.url,e.nome_arquivo,e.id)},[p,(0,r._)("span",null,(0,i.zw)(e.nome),1)],12,l)))),128))])):(0,r.kq)("",!0),!0===g.modal?((0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",m,[(0,r._)("div",c,[(0,r._)("i",{class:"fi fi-rr-cross-small",onClick:t[0]||(t[0]=e=>this.modal=!1)})]),h,(0,r._)("form",{action:"#",onSubmit:t[3]||(t[3]=(0,a.iM)((e=>_.downloadReport(0,0,this.url,this.name,this.reportId)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"datetime-local",name:"first_period",id:"first_period","onUpdate:modelValue":t[1]||(t[1]=e=>g.firstPeriod=e),required:""},null,512),[[a.nr,g.firstPeriod]]),(0,r.wy)((0,r._)("input",{type:"datetime-local",name:"last_period",id:"last_period","onUpdate:modelValue":t[2]||(t[2]=e=>g.lastPeriod=e),required:""},null,512),[[a.nr,g.lastPeriod]]),f],32)])])):(0,r.kq)("",!0)],64)}var _=o(680),w=o(8089),k=o(65),v={name:"ReportPage",components:{},data(){return{mode:_.Z.get("mode"),reports:{},url:"",name:"",reportId:0,modal:!1,firstPeriod:"",lastPeriod:"",firstPeriodHour:"",lastPeriodHour:"",loading:!1,status:!1}},methods:{...(0,k.OI)(["SAVE_MENU","SAVE_SYSTEM"]),modeView:function(e){this.mode=e},getReports:function(){(0,w.m)({method:"GET",url:"agereport/report/reports",headers:{Authorization:"Bearer"+_.Z.get("token")}}).then((e=>{this.reports=e.data,this.status=!0})).catch((e=>{console.log(e)}))},downloadReport:function(e,t,o,r,i){1===t||1===e?(this.name=r,this.reportId=i,this.modal=!0):(this.loading=!0,this.reportId=i,(0,w.m)({method:"GET",url:`agereport/report-download/${this.reportId}`,headers:{Authorization:"Bearer "+_.Z.get("token")},params:{firstPeriod:this.firstPeriod,lastPeriod:this.lastPeriod},responseType:"blob"}).then((e=>{this.loading=!1;let t=new Blob([e.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=document.createElement("a");o.href=window.URL.createObjectURL(t),o.download=r,o.click(),this.modal=!1})))}},computed:{...(0,k.Se)(["system"])},mounted(){this.getReports(),this.SAVE_MENU({system:"agereport",selected:"home"}),this.SAVE_SYSTEM({loading:!1})}},y=o(89);const P=(0,y.Z)(v,[["render",g],["__scopeId","data-v-255e1ba4"]]);var b=P}}]);
//# sourceMappingURL=687.07553ca9.js.map