"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[101],{101:function(t,o,e){e.r(o),e.d(o,{default:function(){return ct}});var a=e(3396),l=e(7139),n=e(9242);const i=t=>((0,a.dD)("data-v-6e75ce3b"),t=t(),(0,a.Cn)(),t),r={class:"container"},d={class:"filters"},s=i((()=>(0,a._)("div",{class:"search"},[(0,a._)("input",{type:"text",name:"search",id:"search",placeholder:"Buscar...",autocomplete:"off"})],-1))),c={class:"filter"},u=i((()=>(0,a._)("i",{class:"fi fi-rs-filter"},null,-1))),p=[u],h=i((()=>(0,a._)("i",{class:"fi fi-rs-file-excel"},null,-1))),_=[h],w={class:"data"},m={class:"table"},f={key:0},g={class:"filters-arrow"},k=i((()=>(0,a._)("span",null,"Protocolo",-1))),y={class:"filters-options"},v=i((()=>(0,a._)("th",null,"Status",-1))),D={class:"filters-arrow"},b=i((()=>(0,a._)("span",null,"Turno",-1))),S={class:"filters-options"},z=i((()=>(0,a._)("th",null,"Tipo de solicitação",-1))),N=i((()=>(0,a._)("th",null,"Nº do contrato",-1))),C=i((()=>(0,a._)("th",null,"Nome do cliente",-1))),q=i((()=>(0,a._)("th",null,"Equipe",-1))),I={class:"filters-arrow"},T=i((()=>(0,a._)("span",null,"Técnico",-1))),x={class:"filters-options"},A=i((()=>(0,a._)("th",null,"Data inicio att.",-1))),E=i((()=>(0,a._)("th",null,"Data fim att.",-1))),M=i((()=>(0,a._)("th",null,"Data inicio agendamento",-1))),U=i((()=>(0,a._)("th",null,"Data fim agendamento",-1))),H=i((()=>(0,a._)("th",null,"Situacao do contrato",-1))),Y=i((()=>(0,a._)("th",null,"Status do contrato",-1))),B=i((()=>(0,a._)("th",null,"Contexto",-1))),P=i((()=>(0,a._)("th",null,"Problema",-1))),V={key:0,class:"modal-filters"},Z={class:"card-modal"},F={class:"close-button"},L=i((()=>(0,a._)("h2",null,"Filtros disponíveis",-1))),K={class:"filters-available"},O={class:"filter-available"},R=i((()=>(0,a._)("label",{for:"typeNote"},"Tipo de solicitação: ",-1))),j=i((()=>(0,a._)("option",{value:"0",selected:""},"--- Selecione um tipo de solicitação ---",-1))),G=["value"],J={class:"filter-available"},Q=i((()=>(0,a._)("label",{for:"dateSchedule"},[(0,a.Uk)("Data do agendamento: "),(0,a._)("b",null,"*")],-1))),W={class:"filter-available"},X=i((()=>(0,a._)("label",{for:"region"},"Região: ",-1))),$=i((()=>(0,a._)("option",{value:"0",selected:""},"--- Selecione a região ---",-1))),tt=["value"],ot=i((()=>(0,a._)("div",{class:"filter-data"},[(0,a._)("button",null,"Filtrar")],-1)));function et(t,o,e,i,u,h){const et=(0,a.up)("LoadingSpinner");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[(0,a._)("div",d,[s,(0,a._)("div",c,[(0,a._)("button",{onClick:o[0]||(o[0]=(...t)=>h.modalAction&&h.modalAction(...t))},p),u.dataItems.length?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:o[1]||(o[1]=(...t)=>h.download&&h.download(...t))},_)):(0,a.kq)("",!0)]),(0,a._)("span",null,[(0,a.Uk)("Contagem do resultado: "),(0,a._)("b",null,(0,l.zw)(u.dataItems.length?u.dataItems.length:0),1)])]),(0,a._)("div",w,[(0,a._)("div",m,[u.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("table",f,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,[(0,a._)("div",g,[k,(0,a._)("div",y,["no-order"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:o[2]||(o[2]=t=>h.ordenateData("protocol","up"))})):(0,a.kq)("",!0),"up"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:o[3]||(o[3]=t=>h.ordenateData("protocol","down"))})):(0,a.kq)("",!0),"down"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:o[4]||(o[4]=t=>h.ordenateData("protocol","no-order"))})):(0,a.kq)("",!0)])])]),v,(0,a._)("th",null,[(0,a._)("div",D,[b,(0,a._)("div",S,["no-order"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:o[5]||(o[5]=t=>h.ordenateData("turn","up"))})):(0,a.kq)("",!0),"up"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:o[6]||(o[6]=t=>h.ordenateData("turn","down"))})):(0,a.kq)("",!0),"down"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:o[7]||(o[7]=t=>h.ordenateData("turn","no-order"))})):(0,a.kq)("",!0)])])]),z,N,C,q,(0,a._)("th",null,[(0,a._)("div",I,[T,(0,a._)("div",x,["no-order"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:o[8]||(o[8]=t=>h.ordenateData("technical","up"))})):(0,a.kq)("",!0),"up"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:o[9]||(o[9]=t=>h.ordenateData("technical","down"))})):(0,a.kq)("",!0),"down"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:o[10]||(o[10]=t=>h.ordenateData("technical","no-order"))})):(0,a.kq)("",!0)])])]),A,E,M,U,H,Y,B,P])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.dataItems,((t,o)=>((0,a.wg)(),(0,a.iD)("tr",{key:o},[(0,a._)("td",null,(0,l.zw)(t.protocol),1),(0,a._)("td",null,(0,l.zw)(t.status),1),(0,a._)("td",null,(0,l.zw)(this.turnName(t.date_start_schedule)),1),(0,a._)("td",null,(0,l.zw)(t.type_note),1),(0,a._)("td",null,(0,l.zw)(t.contract_id),1),(0,a._)("td",null,(0,l.zw)(t.name_client),1),(0,a._)("td",null,(0,l.zw)(t.team),1),(0,a._)("td",null,(0,l.zw)(t.technical),1),(0,a._)("td",null,(0,l.zw)(t.date_start_attendance),1),(0,a._)("td",null,(0,l.zw)(t.date_end_attendance),1),(0,a._)("td",null,(0,l.zw)(t.date_start_schedule),1),(0,a._)("td",null,(0,l.zw)(t.date_end_schedule),1),(0,a._)("td",null,(0,l.zw)(t.stage_contract),1),(0,a._)("td",null,(0,l.zw)(t.status_contract),1),(0,a._)("td",null,(0,l.zw)(t.context),1),(0,a._)("td",null,(0,l.zw)(t.problem),1)])))),128))])])),u.loading?((0,a.wg)(),(0,a.j4)(et,{key:1})):(0,a.kq)("",!0)])])]),u.modal?((0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("div",Z,[(0,a._)("div",F,[(0,a._)("i",{class:"fi fi-rs-cross",onClick:o[11]||(o[11]=(...t)=>h.modalAction&&h.modalAction(...t))})]),L,(0,a._)("form",{action:"#",onSubmit:o[15]||(o[15]=(0,n.iM)(((...t)=>h.getData&&h.getData(...t)),["prevent"]))},[(0,a._)("div",K,[(0,a._)("div",O,[R,(0,a.wy)((0,a._)("select",{name:"typeNote",id:"typeNote","onUpdate:modelValue":o[12]||(o[12]=t=>u.payload.typeNote=t)},[j,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.filters.typeNote,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,l.zw)(t.title),9,G)))),128))],512),[[n.bM,u.payload.typeNote]])]),(0,a._)("div",J,[Q,(0,a.wy)((0,a._)("input",{type:"date",name:"dateSchedule",id:"dateSchedule","onUpdate:modelValue":o[13]||(o[13]=t=>u.payload.dateSchedule=t),required:""},null,512),[[n.nr,u.payload.dateSchedule]])]),(0,a._)("div",W,[X,(0,a.wy)((0,a._)("select",{name:"region",id:"region","onUpdate:modelValue":o[14]||(o[14]=t=>u.payload.region=t)},[$,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.filters.region,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,l.zw)(t.title),9,tt)))),128))],512),[[n.bM,u.payload.region]])]),ot])],32)])])):(0,a.kq)("",!0)],64)}var at=e(65),lt=e(8089),nt=e(680),it=e(9372),rt={name:"HomeSchedule",components:{LoadingSpinner:it.Z},data(){return{filtered:!1,modal:!1,filters:{typeNote:{},region:{}},payload:{typeNote:0,dateSchedule:null,region:0},loading:!1,dataItems:{},orders:{protocol:"no-order",turn:"no-order",technical:"no-order"}}},methods:{...(0,at.OI)(["SAVE_SYSTEM"]),modalAction(){this.modal=!this.modal},getFilters:function(){(0,lt.m)({method:"GET",url:"agetools/tools/schedule/dashboard/filters",headers:{Authorization:"Bearer "+nt.Z.get("token")}}).then((t=>{this.filters.typeNote=t.data.typeNotes,this.filters.region=t.data.regions}))},getData:function(){this.loading=!0,this.modal=!1,(0,lt.m)({method:"GET",url:"agetools/tools/schedule/dashboard/data",params:{dateSchedule:this.payload.dateSchedule,typeNote:this.payload.typeNote,region:this.payload.region},headers:{Authorization:"Bearer "+nt.Z.get("token")}}).then((t=>{this.loading=!1,this.dataItems=t.data}))},download:function(){const t=["Protocolo","Status","Tipo de solicitação","Equipe","Técnico","Data inicio att.","Data fim att.","Data inicio agendamento","Data fim agendamento","Nome do cliente","Nº do contrato","Situacao do contrato","Status do contrato","Contexto","Problema"],o=this.dataItems;(0,lt.m)({method:"POST",url:"agetools/tools/schedule/dashboard/download-excel",data:{headersExcel:t,data:o},responseType:"blob",headers:{Authorization:"Bearer "+nt.Z.get("token")}}).then((t=>{let o=new Blob([t.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=document.createElement("a");e.href=window.URL.createObjectURL(o),e.download="agenda.xlsx",e.click()}))},turnName:function(t){let o=new Date(t),e=o.getHours();return e>=6&&e<12?"Manhã":e>=12&&e<18?"Tarde":"Noite"},ordenateData:function(t,o){let e=()=>{this.orders.turn="no-order",this.orders.technical="no-order",this.orders.protocol="no-order"};switch(t){case"turn":e(),this.orders.turn=o,"up"!==o&&"down"!==o||this.dataItems.sort(((t,e)=>t.turn>e.turn?"up"===o?1:-1:t.turn<e.turn?"down"===o?1:-1:void 0)),"no-order"===o&&this.dataItems.sort(((t,o)=>t.protocol>o.protocol?-1:t.protocol<o.protocol?1:void 0));break;case"protocol":e(),this.orders.protocol=o,"up"!==o&&"down"!==o||this.dataItems.sort(((t,e)=>t.protocol>e.protocol?"up"===o?1:-1:t.protocol<e.protocol?"down"===o?1:-1:void 0)),"no-order"===o&&this.dataItems.sort(((t,o)=>t.protocol>o.protocol?-1:t.protocol<o.protocol?1:void 0));break;case"technical":e(),this.orders.technical=o,"up"!==o&&"down"!==o||this.dataItems.sort(((t,e)=>t.technical>e.technical?"up"===o?1:-1:t.technical<e.technical?"down"===o?1:-1:void 0)),"no-order"===o&&this.dataItems.sort(((t,o)=>t.protocol>o.protocol?-1:t.protocol<o.protocol?1:void 0));break}}},computed:{...(0,at.Se)(["system"])},beforeMount(){this.SAVE_SYSTEM({loading:!1}),this.getFilters()}},dt=e(89);const st=(0,dt.Z)(rt,[["render",et],["__scopeId","data-v-6e75ce3b"]]);var ct=st}}]);
//# sourceMappingURL=101.e18fce54.js.map