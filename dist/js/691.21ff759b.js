"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[691],{2691:function(a,e,t){t.r(e),t.d(e,{default:function(){return fe}});var s=t(3396),l=t(9242),i=t(7139);const n={id:"filters"},o=(0,s.uE)('<div class="items-header" data-v-2680eba6><div class="item" style="justify-content:flex-start;" data-v-2680eba6><span data-v-2680eba6>Colaborador</span></div><div class="item" data-v-2680eba6><span data-v-2680eba6>Usuário vinculado</span></div><div class="item" data-v-2680eba6><span data-v-2680eba6>Função</span></div><div class="item" data-v-2680eba6><span data-v-2680eba6>Canal</span></div><div class="item" data-v-2680eba6><span data-v-2680eba6>Tipo de comissão</span></div><div class="item" data-v-2680eba6><span data-v-2680eba6>Gestor</span></div><div class="item" data-v-2680eba6><span data-v-2680eba6>Ações</span></div></div>',1),d={class:"container-body"},r={class:"item",style:{"justify-content":"flex-start"}},u={class:"item"},c={class:"item"},m={class:"item"},v={class:"item"},_={class:"item"},p={class:"item",style:{gap:"5px"}},h=["onClick"];function w(a,e,t,w,g,b){const f=(0,s.up)("EditCollaborator");return(0,s.wg)(),(0,s.iD)(s.HY,null,[!0===g.list&&"users"===g.page?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",n,[(0,s.wy)((0,s._)("input",{type:"text",name:"search",id:"search",autocomplete:"off",placeholder:"Pesquisar","onUpdate:modelValue":e[0]||(e[0]=a=>g.search=a)},null,512),[[l.nr,g.search]])]),o,(0,s._)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.CollaboratorFiltered,((a,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:e},[(0,s._)("div",r,[(0,s._)("span",null,(0,i.zw)(a.collaborator),1)]),(0,s._)("div",u,[(0,s._)("span",null,(0,i.zw)(a.username),1)]),(0,s._)("div",c,[(0,s._)("span",null,(0,i.zw)(a.function),1)]),(0,s._)("div",m,[(0,s._)("span",null,(0,i.zw)(a.channel),1)]),(0,s._)("div",v,[(0,s._)("span",null,(0,i.zw)(a.type_commission),1)]),(0,s._)("div",_,[(0,s._)("span",null,(0,i.zw)(a.management),1)]),(0,s._)("div",p,[(0,s._)("i",{class:"fi fi-rr-edit",onClick:e=>b.editCollaborator(a)},null,8,h)])])))),128))])],64)):(0,s.kq)("",!0),"edit-user"===g.page?((0,s.wg)(),(0,s.j4)(f,{key:1,data:g.dataCollaborator,onClosePage:e[1]||(e[1]=a=>b.closePage())},null,8,["data"])):(0,s.kq)("",!0)],64)}var g=t(680),b=t(8089);const f=a=>((0,s.dD)("data-v-43430c73"),a=a(),(0,s.Cn)(),a),k={class:"content-card"},y={class:"menu"},C=f((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-id-badge"})],-1))),M=[C],D=f((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-user"})],-1))),q=[D],U=f((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-chat-arrow-grow"})],-1))),z=[U],V=f((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-arrow-left"})],-1))),E=[V],P={key:0,class:"content"},S=f((()=>(0,s._)("h1",null,"Visão geral",-1))),j={class:"card-info"},A=f((()=>(0,s._)("h6",null,"Dados do ERP",-1))),R=f((()=>(0,s._)("b",null,"Nome:",-1))),T=f((()=>(0,s._)("b",null,"Função:",-1))),x=f((()=>(0,s._)("b",null,"Supervisor:",-1))),Y=f((()=>(0,s._)("h6",null,"Dados do usuário",-1))),I=f((()=>(0,s._)("b",null,"Usuário vinculado:",-1))),Z=f((()=>(0,s._)("b",null,"E-mail:",-1))),H=f((()=>(0,s._)("b",null,"Nível de acesso:",-1))),N=f((()=>(0,s._)("b",null,"Status de acesso:",-1))),G=f((()=>(0,s._)("h6",null,"Dados complementares",-1))),$=f((()=>(0,s._)("b",null,"Supervisor imediato:",-1))),F=f((()=>(0,s._)("b",null,"Canal:",-1))),O=f((()=>(0,s._)("b",null,"Tipo de comissão:",-1))),B={key:1,class:"content"},K=f((()=>(0,s._)("h1",null,"Usuário",-1))),L={key:0,class:"user"},J=f((()=>(0,s._)("span",null,"Nenhum usuário encontrado!",-1))),Q=f((()=>(0,s._)("br",null,null,-1))),W=f((()=>(0,s._)("br",null,null,-1))),X={key:1,class:"user"},aa=f((()=>(0,s._)("span",null,"Vincular usuário manualmente",-1))),ea=f((()=>(0,s._)("br",null,null,-1))),ta=f((()=>(0,s._)("br",null,null,-1))),sa={key:2,class:"user"},la=f((()=>(0,s._)("span",null,"Dados de acesso",-1))),ia=f((()=>(0,s._)("br",null,null,-1))),na=f((()=>(0,s._)("br",null,null,-1))),oa=f((()=>(0,s._)("br",null,null,-1))),da={class:"info-user"},ra={key:0},ua=f((()=>(0,s._)("b",null,"E-mail:",-1))),ca={key:1},ma=f((()=>(0,s._)("b",null,"E-mail:",-1))),va={key:2},_a=f((()=>(0,s._)("br",null,null,-1))),pa=f((()=>(0,s._)("br",null,null,-1))),ha=f((()=>(0,s._)("br",null,null,-1))),wa=f((()=>(0,s._)("br",null,null,-1))),ga=f((()=>(0,s._)("br",null,null,-1))),ba={key:2,class:"content"},fa=f((()=>(0,s._)("h1",null,"Meta",-1))),ka=(0,s.uE)('<div class="items-header" data-v-43430c73><div class="item" style="justify-content:center;width:10%;" data-v-43430c73><span data-v-43430c73>ID</span></div><div class="item" style="width:30%;" data-v-43430c73><span data-v-43430c73>Mês referência</span></div><div class="item" style="justify-content:center;" data-v-43430c73><span data-v-43430c73>Meta</span></div><div class="item" style="width:20%;" data-v-43430c73><span data-v-43430c73>Alterado por</span></div><div class="item" style="width:20%;" data-v-43430c73><span data-v-43430c73>Ações</span></div></div>',1),ya={class:"container-body"},Ca={class:"item",style:{"justify-content":"center",width:"10%"}},Ma={class:"item",style:{width:"30%"}},Da={class:"item",style:{"justify-content":"center"}},qa={class:"item",style:{width:"20%"}},Ua={key:0,class:"item",style:{gap:"5px",width:"20%"}},za={key:0,id:"modal"},Va={id:"card-modal",style:{width:"20vw",height:"30vh"}},Ea={id:"close-button"},Pa=f((()=>(0,s._)("input",{type:"submit",value:"Salvar meta"},null,-1))),Sa={key:1,id:"modal"},ja={id:"card-modal",style:{width:"20vw",height:"30vh"}},Aa={id:"close-button"},Ra=f((()=>(0,s._)("input",{type:"submit",value:"Salvar meta"},null,-1)));function Ta(a,e,t,n,o,d){const r=(0,s.up)("VincUser");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",k,[(0,s._)("div",y,[(0,s._)("nav",null,[(0,s._)("ul",null,[(0,s._)("li",{class:(0,i.C_)({"page-selected":"overview"===o.page}),onClick:e[0]||(e[0]=a=>o.page="overview")},M,2),!1!==o.statusReq||0!==t.data.isAD&&null!==t.data.isAD?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:0,class:(0,i.C_)({"page-selected":"user"===o.page}),onClick:e[1]||(e[1]=a=>o.page="user")},q,2)),(0,s._)("li",{class:(0,i.C_)({"page-selected":"meta"===o.page}),onClick:e[2]||(e[2]=a=>o.page="meta")},z,2),(0,s._)("li",{onClick:e[3]||(e[3]=a=>d.closePage())},E)])])]),"overview"===o.page?((0,s.wg)(),(0,s.iD)("div",P,[S,(0,s._)("div",j,[(0,s._)("div",null,[A,(0,s._)("span",null,[R,(0,s.Uk)(" "+(0,i.zw)(t.data.collaborator),1)]),(0,s._)("span",null,[T,(0,s.Uk)(" "+(0,i.zw)(t.data.function),1)]),(0,s._)("span",null,[x,(0,s.Uk)(" "+(0,i.zw)(t.data.supervisor),1)])]),(0,s._)("div",null,[Y,(0,s._)("span",null,[I,(0,s.Uk)(" "+(0,i.zw)(t.data.username),1)]),(0,s._)("span",null,[Z,(0,s.Uk)(" "+(0,i.zw)(t.data.email),1)]),(0,s._)("span",null,[H,(0,s.Uk)(" "+(0,i.zw)(t.data.accessLevel),1)]),(0,s._)("span",null,[N,(0,s.Uk)(" "+(0,i.zw)(t.data.status),1)])]),(0,s._)("div",null,[G,(0,s._)("span",null,[$,(0,s.Uk)(" "+(0,i.zw)(t.data.management),1)]),(0,s._)("span",null,[F,(0,s.Uk)(" "+(0,i.zw)(t.data.channel),1)]),(0,s._)("span",null,[O,(0,s.Uk)(" "+(0,i.zw)(t.data.type_commission),1)])])])])):(0,s.kq)("",!0),"user"!==o.page||0!==t.data.isAD&&null!==t.data.isAD?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",B,[K,""===t.data.username&&""===o.user.email?((0,s.wg)(),(0,s.iD)("div",L,[J,Q,W,(0,s._)("button",{onClick:e[4]||(e[4]=a=>d.newUser(t.data.id))},"Novo usuário")])):(0,s.kq)("",!0),""===t.data.username&&""===o.user.email?((0,s.wg)(),(0,s.iD)("div",X,[aa,ea,ta,(0,s._)("button",{onClick:e[5]||(e[5]=a=>o.modal="vinc-user")},"Vincular usuário")])):(0,s.kq)("",!0),""!==t.data.username||""!==o.user.email?((0,s.wg)(),(0,s.iD)("div",sa,[la,ia,na,oa,(0,s._)("div",da,[""===o.user.email&&""!==t.data.email?((0,s.wg)(),(0,s.iD)("span",ra,[ua,(0,s.Uk)(" "+(0,i.zw)(t.data.email),1)])):(0,s.kq)("",!0),""!==o.user.email?((0,s.wg)(),(0,s.iD)("span",ca,[ma,(0,s.Uk)(" "+(0,i.zw)(o.user.email),1)])):(0,s.kq)("",!0),""!==o.user.password?((0,s.wg)(),(0,s.iD)("span",va,"Nova senha: "+(0,i.zw)(o.user.password),1)):(0,s.kq)("",!0)]),_a,pa,ha,wa,ga,(0,s._)("button",{onClick:e[6]||(e[6]=a=>d.newPassword(t.data.user_id))},"Solicitar nova senha")])):(0,s.kq)("",!0)])),"meta"===o.page?((0,s.wg)(),(0,s.iD)("div",ba,[fa,null===t.data.meta&&!1===o.newMeta.state?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[7]||(e[7]=a=>o.newMeta.status=!0)},"Adicionar meta")):(0,s.kq)("",!0),ka,(0,s._)("div",ya,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.meta,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:a.id},[(0,s._)("div",Ca,[(0,s._)("span",null,(0,i.zw)(a.id),1)]),(0,s._)("div",Ma,[(0,s._)("span",null,(0,i.zw)(a.mes_competencia),1)]),(0,s._)("div",Da,[(0,s._)("span",null,(0,i.zw)(a.meta),1)]),(0,s._)("div",qa,[(0,s._)("span",null,(0,i.zw)(a.modified_by),1)]),a.mes_competencia===this.month?((0,s.wg)(),(0,s.iD)("div",Ua,[(0,s._)("i",{class:"fi fi-rr-edit",onClick:e[8]||(e[8]=a=>o.actualMeta.status=!0)})])):(0,s.kq)("",!0)])))),128))])])):(0,s.kq)("",!0)]),!0===o.newMeta.status?((0,s.wg)(),(0,s.iD)("div",za,[(0,s._)("div",Va,[(0,s._)("div",Ea,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[9]||(e[9]=a=>o.newMeta.status=!1)})]),(0,s._)("form",{action:"#",id:"newMeta",onSubmit:e[11]||(e[11]=(0,l.iM)(((...a)=>d.addMeta&&d.addMeta(...a)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"number",name:"meta",id:"meta",placeholder:"Meta","onUpdate:modelValue":e[10]||(e[10]=a=>o.newMeta.value=a)},null,512),[[l.nr,o.newMeta.value]]),Pa],32)])])):(0,s.kq)("",!0),!0===o.actualMeta.status?((0,s.wg)(),(0,s.iD)("div",Sa,[(0,s._)("div",ja,[(0,s._)("div",Aa,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[12]||(e[12]=a=>o.actualMeta.status=!1)})]),(0,s._)("form",{action:"#",id:"newMeta",onSubmit:e[14]||(e[14]=(0,l.iM)(((...a)=>d.editMeta&&d.editMeta(...a)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"number",name:"meta",id:"meta",placeholder:"Meta","onUpdate:modelValue":e[13]||(e[13]=a=>o.actualMeta.value=a)},null,512),[[l.nr,o.actualMeta.value]]),Ra],32)])])):(0,s.kq)("",!0),"vinc-user"===o.modal?((0,s.wg)(),(0,s.j4)(r,{key:2,onCloseModal:e[15]||(e[15]=a=>o.modal=""),onCloseReq:e[16]||(e[16]=a=>d.closeReq()),collab:t.data},null,8,["collab"])):(0,s.kq)("",!0)],64)}const xa=a=>((0,s.dD)("data-v-2e7bda2e"),a=a(),(0,s.Cn)(),a),Ya={id:"modal"},Ia={id:"card-modal"},Za={id:"close-button"},Ha={id:"container-card"},Na=xa((()=>(0,s._)("h1",null,"Vincular usuário",-1))),Ga=xa((()=>(0,s._)("div",{class:"items-header"},[(0,s._)("div",{class:"item",style:{"justify-content":"flex-start"}},[(0,s._)("span",null,"Usuário")]),(0,s._)("div",{class:"item",style:{"justify-content":"flex-start"}},[(0,s._)("span",null,"E-mail")])],-1))),$a={key:0,class:"container-body"},Fa=["onClick"],Oa={class:"item",style:{"justify-content":"flex-start"}},Ba={class:"item",style:{"justify-content":"flex-start",padding:"0"}};function Ka(a,e,t,l,n,o){const d=(0,s.up)("ConfirmVincUser");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Ya,[(0,s._)("div",Ia,[(0,s._)("div",Za,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[0]||(e[0]=(...a)=>o.closePage&&o.closePage(...a))})]),(0,s._)("div",Ha,[Na,Ga,!0===n.status?((0,s.wg)(),(0,s.iD)("div",$a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.data||[],(a=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:a.id,onClick:e=>(n.modal="confirm-vinc",n.email=a.email,n.id=a.id)},[(0,s._)("div",Oa,[(0,s._)("span",null,(0,i.zw)(a.name),1)]),(0,s._)("div",Ba,[(0,s._)("span",null,(0,i.zw)(a.email),1)])],8,Fa)))),128))])):(0,s.kq)("",!0)])])]),"confirm-vinc"===n.modal?((0,s.wg)(),(0,s.j4)(d,{key:0,collaborator:this.collab,email:n.email,id:n.id,onCloseModal:e[1]||(e[1]=a=>n.modal=""),onSuccessReq:e[2]||(e[2]=a=>(n.modal="",o.successReq()))},null,8,["collaborator","email","id"])):(0,s.kq)("",!0)],64)}const La=a=>((0,s.dD)("data-v-62ef292c"),a=a(),(0,s.Cn)(),a),Ja={id:"modal"},Qa={id:"card-modal"},Wa=La((()=>(0,s._)("h1",null,"Vincular colaborador",-1))),Xa={id:"info"},ae=La((()=>(0,s._)("h3",null,"Dados do vínculo",-1))),ee={id:"content"},te=La((()=>(0,s._)("b",null,"Colaborador:",-1))),se={id:"content"},le=La((()=>(0,s._)("b",null,"Usuário:",-1))),ie={id:"buttons"};function ne(a,e,t,l,n,o){return(0,s.wg)(),(0,s.iD)("div",Ja,[(0,s._)("div",Qa,[Wa,(0,s._)("div",Xa,[ae,(0,s._)("div",ee,[(0,s._)("span",null,[te,(0,s.Uk)(" "+(0,i.zw)(t.collaborator.collaborator),1)])]),(0,s._)("div",se,[(0,s._)("span",null,[le,(0,s.Uk)(" "+(0,i.zw)(t.email),1)])])]),(0,s._)("div",ie,[(0,s._)("button",{onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a))},"Cancelar"),(0,s._)("button",{id:"vinc",onClick:e[1]||(e[1]=(...a)=>o.linkUser&&o.linkUser(...a))},"Vincular")])])])}var oe={name:"ConfirmVincUser",props:{collaborator:{required:!0},email:{required:!0},id:{required:!0}},methods:{closeModal:function(){this.$emit("close-modal")},successReq:function(){this.$emit("success-req")},linkUser:function(){(0,b.m)({method:"PUT",url:"agerv/management/user-link",headers:{Authorization:"Bearer "+g.Z.get("token")},data:{idUser:this.id,idCollab:this.collaborator.id}}).then((a=>{alert(a.data),this.successReq()}))}}},de=t(89);const re=(0,de.Z)(oe,[["render",ne],["__scopeId","data-v-62ef292c"]]);var ue=re,ce={name:"VincUser",components:{ConfirmVincUser:ue},emits:["close-modal","success-req"],props:{collab:{required:!0}},data(){return{search:"",data:{},status:!1,email:"",modal:"",id:0}},methods:{closePage:function(){this.$emit("close-modal")},successReq:function(){this.$emit("close-req")},getUsersNotVinc:function(){(0,b.m)({method:"GET",url:"agerv/management/users-not-link",headers:{Authorization:"Bearer "+g.Z.get("token")},params:{name:this.collab.collaborator}}).then((a=>{this.data=a.data,this.status=!0}))}},beforeMount(){this.getUsersNotVinc()}};const me=(0,de.Z)(ce,[["render",Ka],["__scopeId","data-v-2e7bda2e"]]);var ve=me,_e={name:"EditCollaborator",components:{VincUser:ve},emits:["close-page","successReq"],props:{data:{required:!0}},data(){return{res:{},page:"overview",user:{email:"",password:""},meta:{},month:"",newMeta:{status:!1,value:null,state:!1},actualMeta:{status:!1,value:this.data.meta},modal:"",statusReq:!1}},methods:{getInfo:function(){(0,b.m)({method:"GET",url:"agerv/management/collaborators/"+this.data.id}).then((a=>{this.res=a.data,this.getMeta()}))},newUser:function(a){(0,b.m)({method:"POST",url:"agerv/management/new-user",data:{id:a}}).then((a=>{this.user.email=a.data.email,this.user.password=a.data.password}))},newPassword:function(a){(0,b.m)({method:"GET",url:"agerv/management/new-password/"+a}).then((a=>{this.user.email=a.data.email,this.user.password=a.data.password}))},closePage:function(){this.$emit("close-page")},getMeta:function(){(0,b.m)({method:"GET",url:"agerv/management/meta/"+this.data.id}).then((a=>{this.meta=a.data}))},addMeta:function(){(0,b.m)({method:"POST",url:"agerv/management/meta",data:{id:this.data.id,meta:this.newMeta.value}}).then((()=>{this.newMeta.status=!1,this.newMeta.state=!0,this.newMeta.value=0,this.getMeta()}))},editMeta:function(){(0,b.m)({method:"PUT",url:`agerv/management/meta/${this.data.id}`,params:{meta:this.actualMeta.value}}).then((()=>{this.actualMeta.status=!1,this.getMeta()}))},getMonth:function(){const a=new Date;a.getMonth()<10?this.month=a.getMonth()+1+"":this.month=(a.getMonth()+1).toString()},closeReq:function(){this.page="overview",this.modal="",this.statusReq=!0}},beforeMount(){this.getInfo(),this.getMonth()}};const pe=(0,de.Z)(_e,[["render",Ta],["__scopeId","data-v-43430c73"]]);var he=pe,we=t(65),ge={name:"DashboardPage",components:{EditCollaborator:he},emits:["closePage"],data(){return{mode:g.Z.get("mode"),items:{},search:"",loading:!0,list:!1,modal:!1,dataCollaborator:{},page:"users"}},methods:{...(0,we.OI)(["SAVE_SYSTEM"]),modeView:function(a){this.mode=a},getCollaborators(){(0,b.m)({method:"GET",url:"agerv/management/collaborators",headers:{Authorization:"Bearer "+g.Z.get("token")}}).then((a=>{this.items=a.data,this.list=!0,this.SAVE_SYSTEM({loading:!1})})).catch((a=>{console.log(a)}))},editCollaborator(a){this.page="edit-user",this.dataCollaborator=a},closePage:function(){this.page="users"}},computed:{CollaboratorFiltered:function(){let a=[];return a=this.items.filter((a=>a.collaborator.toLowerCase().indexOf(this.search.toLowerCase())>-1)),a}},created(){this.getCollaborators()}};const be=(0,de.Z)(ge,[["render",w],["__scopeId","data-v-2680eba6"]]);var fe=be}}]);
//# sourceMappingURL=691.21ff759b.js.map