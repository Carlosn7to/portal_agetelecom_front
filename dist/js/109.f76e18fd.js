"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[109],{8109:function(t,a,e){e.r(a),e.d(a,{default:function(){return Jt}});var o=e(3396);const n=t=>((0,o.dD)("data-v-2d857a76"),t=t(),(0,o.Cn)(),t),l={class:"grid-container"},i=n((()=>(0,o._)("div",{class:"header"},[(0,o._)("h1",null,"Painel - Agenda")],-1))),s={class:"calendar"},r={class:"dashboards"},d={class:"list"},c={class:"filters"};function h(t,a,e,n,h,u){const p=(0,o.up)("CalendarComponent"),_=(0,o.up)("DashboardSchedule"),m=(0,o.up)("ListData"),g=(0,o.up)("LoadingSpinner"),D=(0,o.up)("ShortFilters");return(0,o.wg)(),(0,o.iD)("div",l,[i,(0,o._)("div",s,[(0,o.Wm)(p,{onGetDateFilter:u.getDateFilter,pendingConsult:h.pendingConsult},null,8,["onGetDateFilter","pendingConsult"])]),(0,o._)("div",r,[(0,o.Wm)(_,{data:h.dashboardData,onFilterData:u.filteredData},null,8,["data","onFilterData"])]),(0,o._)("div",d,[h.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(m,{key:0,data:this.listData.data,typeFilter:this.listData.typeFilter,onDownloadExcel:u.download,onGetClientUnique:u.getNameClient},null,8,["data","typeFilter","onDownloadExcel","onGetClientUnique"])),h.loading?((0,o.wg)(),(0,o.j4)(g,{key:1})):(0,o.kq)("",!0)]),(0,o._)("div",c,[(0,o.Wm)(D,{dataFilters:this.filters.typeNote,onFilterData:u.getData},null,8,["dataFilters","onFilterData"])])])}e(7658);var u=e(65),p=e(8089),_=e(680),m=e(9372),g=e(7139);const D=t=>((0,o.dD)("data-v-1a36dd5e"),t=t(),(0,o.Cn)(),t),f={class:"calendar-container"},v={id:"calendar"},w={class:"items"},b=D((()=>(0,o._)("i",{class:"fi fi-sr-angle-left"},null,-1))),y=[b],C=D((()=>(0,o._)("i",{class:"fi fi-sr-angle-right"},null,-1))),k=[C],M=["onClick"],S={key:0,class:"day"},x={key:1};function F(t,a,e,n,l,i){return(0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("div",v,[(0,o._)("table",null,[(0,o._)("caption",null,[(0,o._)("div",w,[(0,o._)("button",{onClick:a[0]||(a[0]=(...t)=>i.prevMonth&&i.prevMonth(...t))},y),(0,o._)("span",null,(0,g.zw)(l.monthNames[l.currentMonth])+" "+(0,g.zw)(l.currentYear),1),(0,o._)("button",{onClick:a[1]||(a[1]=(...t)=>i.nextMonth&&i.nextMonth(...t))},k)])]),(0,o._)("thead",null,[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.daysOfWeek,(t=>((0,o.wg)(),(0,o.iD)("th",{key:t},(0,g.zw)(t),1)))),128))])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.weeks,((t,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t,(t=>((0,o.wg)(),(0,o.iD)("td",{key:t.date,onClick:a=>{i.selectDay(t),i.getData(t)}},[t.date===l.daySelected?((0,o.wg)(),(0,o.iD)("div",S,(0,g.zw)(t.date),1)):((0,o.wg)(),(0,o.iD)("div",x,(0,g.zw)(t.date),1))],8,M)))),128))])))),128))])])])])}var I={name:"CalendarComponent",props:["pendingConsult"],emits:["getDateFilter"],data(){return{monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],currentYear:null,currentMonth:null,weeks:[],daySelected:""}},mounted(){const t=new Date;this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth(),this.displayCalendar()},methods:{displayCalendar(){const t=new Date(this.currentYear,this.currentMonth+1,0).getDate(),a=new Date(this.currentYear,this.currentMonth,1).getDay(),e=new Date(this.currentYear,this.currentMonth,t).getDay(),o=[];let n=[];for(let l=0;l<a;l++)n.push({});for(let l=1;l<=t;l++)7===n.length&&(o.push(n),n=[]),n.push({date:l});for(let l=e+1;l<=6;l++)n.push({});o.push(n),this.weeks=o,this.selectDay({date:(new Date).getDate()})},isCurrentDay(t){const a=new Date;return t.date===a.getDate()&&this.currentMonth===a.getMonth()&&this.currentYear===a.getFullYear()},isCurrentMonth(){const t=new Date;return this.currentMonth===t.getMonth()&&this.currentYear===t.getFullYear()},prevMonth(){0===this.currentMonth?(this.currentYear--,this.currentMonth=11):this.currentMonth--,this.displayCalendar()},nextMonth(){11===this.currentMonth?(this.currentYear++,this.currentMonth=0):this.currentMonth++,this.displayCalendar()},selectDay(t){this.pendingConsult||(this.daySelected=t.date),this.getData(t)},getData(t){let a=this.currentYear,e=this.currentMonth+1<10?`0${this.currentMonth+1}`:this.currentMonth+1,o=t.date<10?`0${t.date}`:t.date;this.pendingConsult?alert("aguarde a consulta!"):this.$emit("getDateFilter",`${a}-${e}-${o}`)}}},z=e(89);const N=(0,z.Z)(I,[["render",F],["__scopeId","data-v-1a36dd5e"]]);var A=N;const E=t=>((0,o.dD)("data-v-159ebda4"),t=t(),(0,o.Cn)(),t),Y={id:"dashboards"},T={class:"container-icon"},q={class:"icon"},P=["src"],U={class:"container-info"},$={class:"info"},H=E((()=>(0,o._)("div",{class:"title"},[(0,o._)("span",null,"Total do dia")],-1))),Z={class:"value"},L={class:"container-icon"},O={class:"icon"},G=["src"],B={class:"container-info"},K={class:"info"},V=E((()=>(0,o._)("div",{class:"title"},[(0,o._)("span",null,"Período da Manhã")],-1))),j={class:"value"},W={class:"container-icon"},R={class:"icon"},J=["src"],Q={class:"container-info"},X={class:"info"},tt=E((()=>(0,o._)("div",{class:"title"},[(0,o._)("span",null,"Período da Tarde")],-1))),at={class:"value"},et={class:"container-icon"},ot={class:"icon"},nt=["src"],lt={class:"container-info"},it={class:"info"},st=E((()=>(0,o._)("div",{class:"title"},[(0,o._)("span",null,"Sem téc. atribuído")],-1))),rt={class:"value"};function dt(t,a,n,l,i,s){return(0,o.wg)(),(0,o.iD)("div",Y,[(0,o._)("div",{class:"dashboard",onClick:a[0]||(a[0]=t=>s.filterData("all"))},[(0,o._)("div",T,[(0,o._)("div",q,[(0,o._)("img",{src:e(5125),alt:"servico-tecnico"},null,8,P)])]),(0,o._)("div",U,[(0,o._)("div",$,[H,(0,o._)("div",Z,[(0,o._)("span",null,(0,g.zw)(n.data.total),1)])])])]),(0,o._)("div",{class:"dashboard",onClick:a[1]||(a[1]=t=>s.filterData("morning"))},[(0,o._)("div",L,[(0,o._)("div",O,[(0,o._)("img",{src:e(9247),alt:"sol-manha"},null,8,G)])]),(0,o._)("div",B,[(0,o._)("div",K,[V,(0,o._)("div",j,[(0,o._)("span",null,(0,g.zw)(n.data.turn.morning),1)])])])]),(0,o._)("div",{class:"dashboard",onClick:a[2]||(a[2]=t=>s.filterData("afternoon"))},[(0,o._)("div",W,[(0,o._)("div",R,[(0,o._)("img",{src:e(2587),alt:"sol-tarde"},null,8,J)])]),(0,o._)("div",Q,[(0,o._)("div",X,[tt,(0,o._)("div",at,[(0,o._)("span",null,(0,g.zw)(n.data.turn.afternoon),1)])])])]),(0,o._)("div",{class:"dashboard",onClick:a[3]||(a[3]=t=>s.filterData("notAtt"))},[(0,o._)("div",et,[(0,o._)("div",ot,[(0,o._)("img",{src:e(3777),alt:"suporte-tecnico"},null,8,nt)])]),(0,o._)("div",lt,[(0,o._)("div",it,[st,(0,o._)("div",rt,[(0,o._)("span",null,(0,g.zw)(n.data.notAtt),1)])])])])])}var ct={name:"DashboardSchedule",props:["data"],emits:["filterData"],methods:{filterData(t){this.$emit("filterData",t)}}};const ht=(0,z.Z)(ct,[["render",dt],["__scopeId","data-v-159ebda4"]]);var ut=ht,pt=e(9242);const _t=t=>((0,o.dD)("data-v-2963e9f9"),t=t(),(0,o.Cn)(),t),mt={class:"container-list-data"},gt={class:"options-list-data"},Dt={class:"search"},ft={key:0,class:"buttons"},vt={id:"list-data"},wt={key:0},bt=_t((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Tipo de solicitação"),(0,o._)("th",null,"Protocolo"),(0,o._)("th",null,"Nome do cliente"),(0,o._)("th",null,"Turno"),(0,o._)("th",null,"Região"),(0,o._)("th",null,"Nº do contrato"),(0,o._)("th",null,"Equipe"),(0,o._)("th",null,"Técnico"),(0,o._)("th",null,"Data inicio Att."),(0,o._)("th",null,"Data Fim Att."),(0,o._)("th",null,"Status"),(0,o._)("th",null,"Data inicio agendamento"),(0,o._)("th",null,"Data fim agendamento"),(0,o._)("th",null,"Situação do contrato"),(0,o._)("th",null,"Status do contrato"),(0,o._)("th",null,"Contexto"),(0,o._)("th",null,"Problema"),(0,o._)("th",null,"Ações")])],-1))),yt={class:"actions"},Ct=["onClick"],kt=_t((()=>(0,o._)("i",{class:"fi fi-rr-copy-alt"},null,-1))),Mt=[kt],St=["onClick"],xt=_t((()=>(0,o._)("i",{class:"fi fi-rr-redo"},null,-1))),Ft=[xt],It={key:1,class:"alert"},zt=_t((()=>(0,o._)("span",null," Nenhum dado encontrado! ",-1))),Nt=[zt];function At(t,a,e,n,l,i){return(0,o.wg)(),(0,o.iD)("div",mt,[(0,o._)("div",gt,[(0,o._)("div",Dt,[(0,o.wy)((0,o._)("input",{type:"text",name:"search",id:"search",placeholder:"Buscar cliente...",autocomplete:"off","onUpdate:modelValue":a[0]||(a[0]=t=>l.search=t),onKeyup:a[1]||(a[1]=(0,pt.D2)(((...t)=>i.getClientUnique&&i.getClientUnique(...t)),["enter"]))},null,544),[[pt.nr,l.search]])]),e.data.length>0?((0,o.wg)(),(0,o.iD)("div",ft,[(0,o._)("button",{onClick:a[2]||(a[2]=(...t)=>i.downloadExcel&&i.downloadExcel(...t))},"Download excel")])):(0,o.kq)("",!0)]),(0,o._)("div",vt,[e.data.length>0?((0,o.wg)(),(0,o.iD)("table",wt,[bt,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.ClientFiltered,((t,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[(0,o._)("td",null,(0,g.zw)(t.type_note),1),(0,o._)("td",null,(0,g.zw)(t.protocol),1),(0,o._)("td",null,(0,g.zw)(t.name_client),1),(0,o._)("td",null,(0,g.zw)(t.turnName),1),(0,o._)("td",null,(0,g.zw)(t.region),1),(0,o._)("td",null,(0,g.zw)(t.contract_id),1),(0,o._)("td",null,(0,g.zw)(t.team),1),(0,o._)("td",null,(0,g.zw)(t.technical),1),(0,o._)("td",null,(0,g.zw)(t.date_start_attendance),1),(0,o._)("td",null,(0,g.zw)(t.date_end_attendance),1),(0,o._)("td",null,(0,g.zw)(t.status),1),(0,o._)("td",null,(0,g.zw)(t.date_start_schedule),1),(0,o._)("td",null,(0,g.zw)(t.date_end_schedule),1),(0,o._)("td",null,(0,g.zw)(t.stage_contract),1),(0,o._)("td",null,(0,g.zw)(t.status_contract),1),(0,o._)("td",null,(0,g.zw)(t.context),1),(0,o._)("td",null,(0,g.zw)(t.problem),1),(0,o._)("td",null,[(0,o._)("div",yt,[(0,o._)("button",{onClick:a=>i.copyProtocol(t.protocol)},Mt,8,Ct),(0,o._)("button",{onClick:a=>i.searchInVoalle(t.protocol,t.id_client)},Ft,8,St)])])])))),128))])])):((0,o.wg)(),(0,o.iD)("div",It,Nt))])])}var Et={name:"ListData",props:["data","typeFilter"],emits:["downloadExcel","getClientUnique"],data(){return{jsonHash:{personID:0,pbxInfo:{},availability:!0},search:""}},methods:{downloadExcel(){this.$emit("downloadExcel")},copyProtocol:function(t){const a=t,e=document.createElement("input");e.setAttribute("value",a),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},searchInVoalle:function(t,a){this.jsonHash.personID=a;const e="https://erp.agetelecom.com.br/service_dashboard#list";this.copyProtocol(t),window.open(e,"_blank")},getClientUnique:function(){this.$emit("getClientUnique",this.search)}},computed:{ClientFiltered:function(){let t=[];return t=this.data.filter((t=>t.name_client.toLowerCase().indexOf(this.search.toLowerCase())>-1)),t}}};const Yt=(0,z.Z)(Et,[["render",At],["__scopeId","data-v-2963e9f9"]]);var Tt=Yt;const qt=t=>((0,o.dD)("data-v-05407169"),t=t(),(0,o.Cn)(),t),Pt={id:"filters"},Ut=qt((()=>(0,o._)("div",{class:"title"},[(0,o._)("h2",null,"Filtrar tipo de solicitação")],-1))),$t={class:"items"},Ht={class:"checkbox"},Zt={class:"container-checkbox"},Lt=["name","id","value"],Ot=qt((()=>(0,o._)("span",{class:"checkmark"},null,-1))),Gt={class:"title-item"};function Bt(t,a,e,n,l,i){return(0,o.wg)(),(0,o.iD)("div",Pt,[Ut,(0,o._)("div",$t,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.dataFilters,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"item",key:t.id},[(0,o._)("div",Ht,[(0,o._)("label",Zt,[(0,o.wy)((0,o._)("input",{type:"checkbox",name:`filter${t.id}`,id:t.id,"onUpdate:modelValue":a[0]||(a[0]=t=>l.checkboxId=t),value:t.id},null,8,Lt),[[pt.e8,l.checkboxId]]),Ot])]),(0,o._)("div",Gt,[(0,o._)("span",null,(0,g.zw)(t.title),1)])])))),128))]),(0,o._)("button",{onClick:a[1]||(a[1]=(...t)=>i.filterData&&i.filterData(...t))},"Filtrar")])}var Kt={name:"ShortFilters",props:["dataFilters"],emits:["filterData"],data(){return{checkboxId:[]}},methods:{filterData(){this.$emit("filterData",this.checkboxId)}},beforeMount(){}};const Vt=(0,z.Z)(Kt,[["render",Bt],["__scopeId","data-v-05407169"]]);var jt=Vt,Wt={name:"HomeSchedule",components:{LoadingSpinner:m.Z,CalendarComponent:A,DashboardSchedule:ut,ListData:Tt,ShortFilters:jt},data(){return{page:"new",searchClient:"",filtered:!1,modal:!1,filters:{typeNote:{},region:{}},payload:{typeNote:null,dateSchedule:null,region:0},loading:!1,dataItems:{},orders:{protocol:"no-order",turn:"no-order",technical:"no-order",region:"no-order"},countTurns:{morning:0,afternoon:0,night:0},options:[],selectedOptions:[],pendingConsult:!1,dashboardData:{turn:{morning:0,afternoon:0,night:0},total:0,notAtt:0},listData:{typeFilter:"all",data:{}}}},methods:{...(0,u.OI)(["SAVE_SYSTEM"]),modalAction(){this.modal=!this.modal},getFilters:function(){(0,p.m)({method:"GET",url:"agetools/tools/schedule/dashboard/filters",headers:{Authorization:"Bearer "+_.Z.get("token")}}).then((t=>{this.filters.typeNote=t.data.typeNotes,this.filters.typeNote.forEach((t=>{this.options.push({label:t.title,value:t.id})})),this.filters.region=t.data.regions}))},getData:function(t){this.loading=!0,this.modal=!1,this.pendingConsult=!0,this.payload.typeNote=t,this.dashboardData.total=0,this.dashboardData.turn.morning=0,this.dashboardData.turn.afternoon=0,this.dashboardData.notAtt=0,this.listData.typeFilter="all",(0,p.m)({method:"GET",url:"agetools/tools/schedule/dashboard/data",params:{dateSchedule:this.payload.dateSchedule,typeNote:this.payload.typeNote},headers:{Authorization:"Bearer "+_.Z.get("token")}}).then((t=>{this.loading=!1,this.dataItems=t.data,this.listData.data=t.data,this.pendingConsult=!1,this.dataItems.forEach((t=>{let a=new Date(t.date_start_schedule),e=a.getHours(),o="";e>=6&&e<12?(o="Manhã",this.dashboardData.turn.morning++):e>=12&&e<18?(o="Tarde",this.dashboardData.turn.afternoon++):(o="Noite",this.dashboardData.turn.night++),t["turnName"]=o,null===t.technical&&this.dashboardData.notAtt++})),this.dashboardData.total=this.dataItems.length}))},getNameClient:function(t){this.loading=!0,this.modal=!1,this.pendingConsult=!0,this.dashboardData.total=0,this.dashboardData.turn.morning=0,this.dashboardData.turn.afternoon=0,this.dashboardData.notAtt=0,this.listData.typeFilter="all",(0,p.m)({method:"GET",url:"agetools/tools/schedule/dashboard/data",params:{dateSchedule:this.payload.dateSchedule,name:t},headers:{Authorization:"Bearer "+_.Z.get("token")}}).then((t=>{this.loading=!1,this.dataItems=t.data,this.listData.data=t.data,this.pendingConsult=!1,this.dataItems.forEach((t=>{let a=new Date(t.date_start_schedule),e=a.getHours(),o="";e>=6&&e<12?(o="Manhã",this.dashboardData.turn.morning++):e>=12&&e<18?(o="Tarde",this.dashboardData.turn.afternoon++):(o="Noite",this.dashboardData.turn.night++),t["turnName"]=o,null===t.technical&&this.dashboardData.notAtt++})),this.dashboardData.total=this.dataItems.length}))},download:function(){const t=["Protocolo","Status","Tipo de solicitação","Equipe","Técnico","Data inicio att.","Data fim att.","Data inicio agendamento","Data fim agendamento","id_client","Nome do cliente","Nº do contrato","Situacao do contrato","Status do contrato","Contexto","Problema","Região","Turno"],a=this.dataItems;(0,p.m)({method:"POST",url:"agetools/tools/schedule/dashboard/download-excel",data:{headersExcel:t,data:a},responseType:"blob",headers:{Authorization:"Bearer "+_.Z.get("token")}}).then((t=>{let a=new Blob([t.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=document.createElement("a");e.href=window.URL.createObjectURL(a),e.download="agenda.xlsx",e.click()}))},ordenateData:function(t,a){let e=()=>{this.orders.turn="no-order",this.orders.technical="no-order",this.orders.protocol="no-order",this.orders.region="no-order"};switch(t){case"turn":e(),this.orders.turn=a,"up"!==a&&"down"!==a||this.dataItems.sort(((t,e)=>t.turnName>e.turnName?"up"===a?1:-1:t.turnName<e.turnName?"down"===a?1:-1:void 0)),"no-order"===a&&this.dataItems.sort(((t,a)=>t.protocol>a.protocol?-1:t.protocol<a.protocol?1:void 0));break;case"protocol":e(),this.orders.protocol=a,"up"!==a&&"down"!==a||this.dataItems.sort(((t,e)=>t.protocol>e.protocol?"up"===a?1:-1:t.protocol<e.protocol?"down"===a?1:-1:void 0)),"no-order"===a&&this.dataItems.sort(((t,a)=>t.protocol>a.protocol?-1:t.protocol<a.protocol?1:void 0));break;case"technical":e(),this.orders.technical=a,"up"!==a&&"down"!==a||this.dataItems.sort(((t,e)=>t.technical>e.technical?"up"===a?1:-1:t.technical<e.technical?"down"===a?1:-1:void 0)),"no-order"===a&&this.dataItems.sort(((t,a)=>t.protocol>a.protocol?-1:t.protocol<a.protocol?1:void 0));break;case"region":e(),this.orders.region=a,"up"!==a&&"down"!==a||this.dataItems.sort(((t,e)=>t.region>e.region?"up"===a?1:-1:t.region<e.region?"down"===a?1:-1:void 0)),"no-order"===a&&this.dataItems.sort(((t,a)=>t.protocol>a.protocol?-1:t.protocol<a.protocol?1:void 0));break}},getDateFilter:function(t){this.payload.dateSchedule=t},filteredData:function(t){"all"===t?this.listData.data=this.dataItems:"morning"===t?this.listData.data=this.dataItems.filter((t=>"Manhã"===t.turnName)):"afternoon"===t?this.listData.data=this.dataItems.filter((t=>"Tarde"===t.turnName)):"notAtt"===t&&(this.listData.data=this.dataItems.filter((t=>null===t.technical)))}},computed:{...(0,u.Se)(["system"])},beforeMount(){this.SAVE_SYSTEM({loading:!1}),this.getFilters()}};const Rt=(0,z.Z)(Wt,[["render",h],["__scopeId","data-v-2d857a76"]]);var Jt=Rt},9247:function(t,a,e){t.exports=e.p+"img/manha.827e41c4.png"},5125:function(t,a,e){t.exports=e.p+"img/servico-tecnico.a22c6d74.png"},3777:function(t,a,e){t.exports=e.p+"img/suporte-tecnico.05f9f4e8.png"},2587:function(t,a,e){t.exports=e.p+"img/tarde.d9c26579.png"}}]);
//# sourceMappingURL=109.f76e18fd.js.map