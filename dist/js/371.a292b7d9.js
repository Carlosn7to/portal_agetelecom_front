"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[371],{7234:function(a,e,t){t.r(e),t.d(e,{default:function(){return ye}});var s=t(3396),l=t(9242),i=t(7139);const n={id:"filters"},o=(0,s.uE)('<div class="items-header" data-v-2f417a1b><div class="item" style="justify-content:flex-start;" data-v-2f417a1b><span data-v-2f417a1b>Colaborador</span></div><div class="item" data-v-2f417a1b><span data-v-2f417a1b>Meta atual</span></div><div class="item" data-v-2f417a1b><span data-v-2f417a1b>Usuário vinculado</span></div><div class="item" data-v-2f417a1b><span data-v-2f417a1b>Função</span></div><div class="item" data-v-2f417a1b><span data-v-2f417a1b>Canal</span></div><div class="item" data-v-2f417a1b><span data-v-2f417a1b>Tipo de comissão</span></div><div class="item" style="justify-content:flex-start;" data-v-2f417a1b><span data-v-2f417a1b>Supervisor</span></div><div class="item" data-v-2f417a1b><span data-v-2f417a1b>Gestor</span></div><div class="item" data-v-2f417a1b><span data-v-2f417a1b>Ações</span></div></div>',1),d={class:"container-body"},r={class:"item",style:{"justify-content":"flex-start"}},u={class:"item"},c={class:"item"},m={class:"item"},v={class:"item"},_={class:"item"},p={class:"item",style:{"justify-content":"flex-start"}},h={class:"item"},w={class:"item",style:{gap:"5px"}},g=["onClick"];function f(a,e,t,f,b,k){const y=(0,s.up)("EditCollaborator");return(0,s.wg)(),(0,s.iD)(s.HY,null,[!0===b.list&&"users"===b.page?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",n,[(0,s.wy)((0,s._)("input",{type:"text",name:"search",id:"search",autocomplete:"off",placeholder:"Pesquisar","onUpdate:modelValue":e[0]||(e[0]=a=>b.search=a)},null,512),[[l.nr,b.search]])]),o,(0,s._)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.CollaboratorFiltered,((a,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:e},[(0,s._)("div",r,[(0,s._)("span",null,(0,i.zw)(a.collaborator),1)]),(0,s._)("div",u,[(0,s._)("span",null,(0,i.zw)(a.meta),1)]),(0,s._)("div",c,[(0,s._)("span",null,(0,i.zw)(a.username),1)]),(0,s._)("div",m,[(0,s._)("span",null,(0,i.zw)(a.function),1)]),(0,s._)("div",v,[(0,s._)("span",null,(0,i.zw)(a.channel),1)]),(0,s._)("div",_,[(0,s._)("span",null,(0,i.zw)(a.type_commission),1)]),(0,s._)("div",p,[(0,s._)("span",null,(0,i.zw)(a.supervisor),1)]),(0,s._)("div",h,[(0,s._)("span",null,(0,i.zw)(a.management),1)]),(0,s._)("div",w,[(0,s._)("i",{class:"fi fi-rr-edit",onClick:e=>k.editCollaborator(a)},null,8,g)])])))),128))])],64)):(0,s.kq)("",!0),"edit-user"===b.page?((0,s.wg)(),(0,s.j4)(y,{key:1,data:b.dataCollaborator,onClosePage:e[1]||(e[1]=a=>k.closePage())},null,8,["data"])):(0,s.kq)("",!0)],64)}var b=t(680),k=t(8089);const y=a=>((0,s.dD)("data-v-43430c73"),a=a(),(0,s.Cn)(),a),C={class:"content-card"},M={class:"menu"},D=y((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-id-badge"})],-1))),q=[D],U=y((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-user"})],-1))),z=[U],V=y((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-chat-arrow-grow"})],-1))),E=[V],S=y((()=>(0,s._)("div",null,[(0,s._)("i",{class:"fi fi-rr-arrow-left"})],-1))),P=[S],j={key:0,class:"content"},A=y((()=>(0,s._)("h1",null,"Visão geral",-1))),R={class:"card-info"},T=y((()=>(0,s._)("h6",null,"Dados do ERP",-1))),x=y((()=>(0,s._)("b",null,"Nome:",-1))),Y=y((()=>(0,s._)("b",null,"Função:",-1))),I=y((()=>(0,s._)("b",null,"Supervisor:",-1))),Z=y((()=>(0,s._)("h6",null,"Dados do usuário",-1))),H=y((()=>(0,s._)("b",null,"Usuário vinculado:",-1))),N=y((()=>(0,s._)("b",null,"E-mail:",-1))),G=y((()=>(0,s._)("b",null,"Nível de acesso:",-1))),$=y((()=>(0,s._)("b",null,"Status de acesso:",-1))),F=y((()=>(0,s._)("h6",null,"Dados complementares",-1))),O=y((()=>(0,s._)("b",null,"Supervisor imediato:",-1))),B=y((()=>(0,s._)("b",null,"Canal:",-1))),K=y((()=>(0,s._)("b",null,"Tipo de comissão:",-1))),L={key:1,class:"content"},J=y((()=>(0,s._)("h1",null,"Usuário",-1))),Q={key:0,class:"user"},W=y((()=>(0,s._)("span",null,"Nenhum usuário encontrado!",-1))),X=y((()=>(0,s._)("br",null,null,-1))),aa=y((()=>(0,s._)("br",null,null,-1))),ea={key:1,class:"user"},ta=y((()=>(0,s._)("span",null,"Vincular usuário manualmente",-1))),sa=y((()=>(0,s._)("br",null,null,-1))),la=y((()=>(0,s._)("br",null,null,-1))),ia={key:2,class:"user"},na=y((()=>(0,s._)("span",null,"Dados de acesso",-1))),oa=y((()=>(0,s._)("br",null,null,-1))),da=y((()=>(0,s._)("br",null,null,-1))),ra=y((()=>(0,s._)("br",null,null,-1))),ua={class:"info-user"},ca={key:0},ma=y((()=>(0,s._)("b",null,"E-mail:",-1))),va={key:1},_a=y((()=>(0,s._)("b",null,"E-mail:",-1))),pa={key:2},ha=y((()=>(0,s._)("br",null,null,-1))),wa=y((()=>(0,s._)("br",null,null,-1))),ga=y((()=>(0,s._)("br",null,null,-1))),fa=y((()=>(0,s._)("br",null,null,-1))),ba=y((()=>(0,s._)("br",null,null,-1))),ka={key:2,class:"content"},ya=y((()=>(0,s._)("h1",null,"Meta",-1))),Ca=(0,s.uE)('<div class="items-header" data-v-43430c73><div class="item" style="justify-content:center;width:10%;" data-v-43430c73><span data-v-43430c73>ID</span></div><div class="item" style="width:30%;" data-v-43430c73><span data-v-43430c73>Mês referência</span></div><div class="item" style="justify-content:center;" data-v-43430c73><span data-v-43430c73>Meta</span></div><div class="item" style="width:20%;" data-v-43430c73><span data-v-43430c73>Alterado por</span></div><div class="item" style="width:20%;" data-v-43430c73><span data-v-43430c73>Ações</span></div></div>',1),Ma={class:"container-body"},Da={class:"item",style:{"justify-content":"center",width:"10%"}},qa={class:"item",style:{width:"30%"}},Ua={class:"item",style:{"justify-content":"center"}},za={class:"item",style:{width:"20%"}},Va={key:0,class:"item",style:{gap:"5px",width:"20%"}},Ea={key:0,id:"modal"},Sa={id:"card-modal",style:{width:"20vw",height:"30vh"}},Pa={id:"close-button"},ja=y((()=>(0,s._)("input",{type:"submit",value:"Salvar meta"},null,-1))),Aa={key:1,id:"modal"},Ra={id:"card-modal",style:{width:"20vw",height:"30vh"}},Ta={id:"close-button"},xa=y((()=>(0,s._)("input",{type:"submit",value:"Salvar meta"},null,-1)));function Ya(a,e,t,n,o,d){const r=(0,s.up)("VincUser");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",C,[(0,s._)("div",M,[(0,s._)("nav",null,[(0,s._)("ul",null,[(0,s._)("li",{class:(0,i.C_)({"page-selected":"overview"===o.page}),onClick:e[0]||(e[0]=a=>o.page="overview")},q,2),!1!==o.statusReq||0!==t.data.isAD&&null!==t.data.isAD?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:0,class:(0,i.C_)({"page-selected":"user"===o.page}),onClick:e[1]||(e[1]=a=>o.page="user")},z,2)),(0,s._)("li",{class:(0,i.C_)({"page-selected":"meta"===o.page}),onClick:e[2]||(e[2]=a=>o.page="meta")},E,2),(0,s._)("li",{onClick:e[3]||(e[3]=a=>d.closePage())},P)])])]),"overview"===o.page?((0,s.wg)(),(0,s.iD)("div",j,[A,(0,s._)("div",R,[(0,s._)("div",null,[T,(0,s._)("span",null,[x,(0,s.Uk)(" "+(0,i.zw)(t.data.collaborator),1)]),(0,s._)("span",null,[Y,(0,s.Uk)(" "+(0,i.zw)(t.data.function),1)]),(0,s._)("span",null,[I,(0,s.Uk)(" "+(0,i.zw)(t.data.supervisor),1)])]),(0,s._)("div",null,[Z,(0,s._)("span",null,[H,(0,s.Uk)(" "+(0,i.zw)(t.data.username),1)]),(0,s._)("span",null,[N,(0,s.Uk)(" "+(0,i.zw)(t.data.email),1)]),(0,s._)("span",null,[G,(0,s.Uk)(" "+(0,i.zw)(t.data.accessLevel),1)]),(0,s._)("span",null,[$,(0,s.Uk)(" "+(0,i.zw)(t.data.status),1)])]),(0,s._)("div",null,[F,(0,s._)("span",null,[O,(0,s.Uk)(" "+(0,i.zw)(t.data.management),1)]),(0,s._)("span",null,[B,(0,s.Uk)(" "+(0,i.zw)(t.data.channel),1)]),(0,s._)("span",null,[K,(0,s.Uk)(" "+(0,i.zw)(t.data.type_commission),1)])])])])):(0,s.kq)("",!0),"user"!==o.page||0!==t.data.isAD&&null!==t.data.isAD?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",L,[J,""===t.data.username&&""===o.user.email?((0,s.wg)(),(0,s.iD)("div",Q,[W,X,aa,(0,s._)("button",{onClick:e[4]||(e[4]=a=>d.newUser(t.data.id))},"Novo usuário")])):(0,s.kq)("",!0),""===t.data.username&&""===o.user.email?((0,s.wg)(),(0,s.iD)("div",ea,[ta,sa,la,(0,s._)("button",{onClick:e[5]||(e[5]=a=>o.modal="vinc-user")},"Vincular usuário")])):(0,s.kq)("",!0),""!==t.data.username||""!==o.user.email?((0,s.wg)(),(0,s.iD)("div",ia,[na,oa,da,ra,(0,s._)("div",ua,[""===o.user.email&&""!==t.data.email?((0,s.wg)(),(0,s.iD)("span",ca,[ma,(0,s.Uk)(" "+(0,i.zw)(t.data.email),1)])):(0,s.kq)("",!0),""!==o.user.email?((0,s.wg)(),(0,s.iD)("span",va,[_a,(0,s.Uk)(" "+(0,i.zw)(o.user.email),1)])):(0,s.kq)("",!0),""!==o.user.password?((0,s.wg)(),(0,s.iD)("span",pa,"Nova senha: "+(0,i.zw)(o.user.password),1)):(0,s.kq)("",!0)]),ha,wa,ga,fa,ba,(0,s._)("button",{onClick:e[6]||(e[6]=a=>d.newPassword(t.data.user_id))},"Solicitar nova senha")])):(0,s.kq)("",!0)])),"meta"===o.page?((0,s.wg)(),(0,s.iD)("div",ka,[ya,null===t.data.meta&&!1===o.newMeta.state?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[7]||(e[7]=a=>o.newMeta.status=!0)},"Adicionar meta")):(0,s.kq)("",!0),Ca,(0,s._)("div",Ma,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.meta,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:a.id},[(0,s._)("div",Da,[(0,s._)("span",null,(0,i.zw)(a.id),1)]),(0,s._)("div",qa,[(0,s._)("span",null,(0,i.zw)(a.mes_competencia),1)]),(0,s._)("div",Ua,[(0,s._)("span",null,(0,i.zw)(a.meta),1)]),(0,s._)("div",za,[(0,s._)("span",null,(0,i.zw)(a.modified_by),1)]),a.mes_competencia===this.month?((0,s.wg)(),(0,s.iD)("div",Va,[(0,s._)("i",{class:"fi fi-rr-edit",onClick:e[8]||(e[8]=a=>o.actualMeta.status=!0)})])):(0,s.kq)("",!0)])))),128))])])):(0,s.kq)("",!0)]),!0===o.newMeta.status?((0,s.wg)(),(0,s.iD)("div",Ea,[(0,s._)("div",Sa,[(0,s._)("div",Pa,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[9]||(e[9]=a=>o.newMeta.status=!1)})]),(0,s._)("form",{action:"#",id:"newMeta",onSubmit:e[11]||(e[11]=(0,l.iM)(((...a)=>d.addMeta&&d.addMeta(...a)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"number",name:"meta",id:"meta",placeholder:"Meta","onUpdate:modelValue":e[10]||(e[10]=a=>o.newMeta.value=a)},null,512),[[l.nr,o.newMeta.value]]),ja],32)])])):(0,s.kq)("",!0),!0===o.actualMeta.status?((0,s.wg)(),(0,s.iD)("div",Aa,[(0,s._)("div",Ra,[(0,s._)("div",Ta,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[12]||(e[12]=a=>o.actualMeta.status=!1)})]),(0,s._)("form",{action:"#",id:"newMeta",onSubmit:e[14]||(e[14]=(0,l.iM)(((...a)=>d.editMeta&&d.editMeta(...a)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"number",name:"meta",id:"meta",placeholder:"Meta","onUpdate:modelValue":e[13]||(e[13]=a=>o.actualMeta.value=a)},null,512),[[l.nr,o.actualMeta.value]]),xa],32)])])):(0,s.kq)("",!0),"vinc-user"===o.modal?((0,s.wg)(),(0,s.j4)(r,{key:2,onCloseModal:e[15]||(e[15]=a=>o.modal=""),onCloseReq:e[16]||(e[16]=a=>d.closeReq()),collab:t.data},null,8,["collab"])):(0,s.kq)("",!0)],64)}const Ia=a=>((0,s.dD)("data-v-2e7bda2e"),a=a(),(0,s.Cn)(),a),Za={id:"modal"},Ha={id:"card-modal"},Na={id:"close-button"},Ga={id:"container-card"},$a=Ia((()=>(0,s._)("h1",null,"Vincular usuário",-1))),Fa=Ia((()=>(0,s._)("div",{class:"items-header"},[(0,s._)("div",{class:"item",style:{"justify-content":"flex-start"}},[(0,s._)("span",null,"Usuário")]),(0,s._)("div",{class:"item",style:{"justify-content":"flex-start"}},[(0,s._)("span",null,"E-mail")])],-1))),Oa={key:0,class:"container-body"},Ba=["onClick"],Ka={class:"item",style:{"justify-content":"flex-start"}},La={class:"item",style:{"justify-content":"flex-start",padding:"0"}};function Ja(a,e,t,l,n,o){const d=(0,s.up)("ConfirmVincUser");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Za,[(0,s._)("div",Ha,[(0,s._)("div",Na,[(0,s._)("i",{class:"fi fi-rr-cross-small",onClick:e[0]||(e[0]=(...a)=>o.closePage&&o.closePage(...a))})]),(0,s._)("div",Ga,[$a,Fa,!0===n.status?((0,s.wg)(),(0,s.iD)("div",Oa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.data||[],(a=>((0,s.wg)(),(0,s.iD)("div",{class:"items-body",key:a.id,onClick:e=>(n.modal="confirm-vinc",n.email=a.email,n.id=a.id)},[(0,s._)("div",Ka,[(0,s._)("span",null,(0,i.zw)(a.name),1)]),(0,s._)("div",La,[(0,s._)("span",null,(0,i.zw)(a.email),1)])],8,Ba)))),128))])):(0,s.kq)("",!0)])])]),"confirm-vinc"===n.modal?((0,s.wg)(),(0,s.j4)(d,{key:0,collaborator:this.collab,email:n.email,id:n.id,onCloseModal:e[1]||(e[1]=a=>n.modal=""),onSuccessReq:e[2]||(e[2]=a=>(n.modal="",o.successReq()))},null,8,["collaborator","email","id"])):(0,s.kq)("",!0)],64)}const Qa=a=>((0,s.dD)("data-v-62ef292c"),a=a(),(0,s.Cn)(),a),Wa={id:"modal"},Xa={id:"card-modal"},ae=Qa((()=>(0,s._)("h1",null,"Vincular colaborador",-1))),ee={id:"info"},te=Qa((()=>(0,s._)("h3",null,"Dados do vínculo",-1))),se={id:"content"},le=Qa((()=>(0,s._)("b",null,"Colaborador:",-1))),ie={id:"content"},ne=Qa((()=>(0,s._)("b",null,"Usuário:",-1))),oe={id:"buttons"};function de(a,e,t,l,n,o){return(0,s.wg)(),(0,s.iD)("div",Wa,[(0,s._)("div",Xa,[ae,(0,s._)("div",ee,[te,(0,s._)("div",se,[(0,s._)("span",null,[le,(0,s.Uk)(" "+(0,i.zw)(t.collaborator.collaborator),1)])]),(0,s._)("div",ie,[(0,s._)("span",null,[ne,(0,s.Uk)(" "+(0,i.zw)(t.email),1)])])]),(0,s._)("div",oe,[(0,s._)("button",{onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a))},"Cancelar"),(0,s._)("button",{id:"vinc",onClick:e[1]||(e[1]=(...a)=>o.linkUser&&o.linkUser(...a))},"Vincular")])])])}var re={name:"ConfirmVincUser",props:{collaborator:{required:!0},email:{required:!0},id:{required:!0}},methods:{closeModal:function(){this.$emit("close-modal")},successReq:function(){this.$emit("success-req")},linkUser:function(){(0,k.m)({method:"PUT",url:"agerv/management/user-link",headers:{Authorization:"Bearer "+b.Z.get("token")},data:{idUser:this.id,idCollab:this.collaborator.id}}).then((a=>{alert(a.data),this.successReq()}))}}},ue=t(89);const ce=(0,ue.Z)(re,[["render",de],["__scopeId","data-v-62ef292c"]]);var me=ce,ve={name:"VincUser",components:{ConfirmVincUser:me},emits:["close-modal","success-req"],props:{collab:{required:!0}},data(){return{search:"",data:{},status:!1,email:"",modal:"",id:0}},methods:{closePage:function(){this.$emit("close-modal")},successReq:function(){this.$emit("close-req")},getUsersNotVinc:function(){(0,k.m)({method:"GET",url:"agerv/management/users-not-link",headers:{Authorization:"Bearer "+b.Z.get("token")},params:{name:this.collab.collaborator}}).then((a=>{this.data=a.data,this.status=!0}))}},beforeMount(){this.getUsersNotVinc()}};const _e=(0,ue.Z)(ve,[["render",Ja],["__scopeId","data-v-2e7bda2e"]]);var pe=_e,he={name:"EditCollaborator",components:{VincUser:pe},emits:["close-page","successReq"],props:{data:{required:!0}},data(){return{res:{},page:"overview",user:{email:"",password:""},meta:{},month:"",newMeta:{status:!1,value:null,state:!1},actualMeta:{status:!1,value:this.data.meta},modal:"",statusReq:!1}},methods:{getInfo:function(){(0,k.m)({method:"GET",url:"agerv/management/collaborators/"+this.data.id}).then((a=>{this.res=a.data,this.getMeta()}))},newUser:function(a){(0,k.m)({method:"POST",url:"agerv/management/new-user",data:{id:a}}).then((a=>{this.user.email=a.data.email,this.user.password=a.data.password}))},newPassword:function(a){(0,k.m)({method:"GET",url:"agerv/management/new-password/"+a}).then((a=>{this.user.email=a.data.email,this.user.password=a.data.password}))},closePage:function(){this.$emit("close-page")},getMeta:function(){(0,k.m)({method:"GET",url:"agerv/management/meta/"+this.data.id}).then((a=>{this.meta=a.data}))},addMeta:function(){(0,k.m)({method:"POST",url:"agerv/management/meta",data:{id:this.data.id,meta:this.newMeta.value}}).then((()=>{this.newMeta.status=!1,this.newMeta.state=!0,this.newMeta.value=0,this.getMeta()}))},editMeta:function(){(0,k.m)({method:"PUT",url:`agerv/management/meta/${this.data.id}`,params:{meta:this.actualMeta.value}}).then((()=>{this.actualMeta.status=!1,this.getMeta()}))},getMonth:function(){const a=new Date;a.getMonth()<10?this.month=a.getMonth()+1+"":this.month=(a.getMonth()+1).toString()},closeReq:function(){this.page="overview",this.modal="",this.statusReq=!0}},beforeMount(){this.getInfo(),this.getMonth()}};const we=(0,ue.Z)(he,[["render",Ya],["__scopeId","data-v-43430c73"]]);var ge=we,fe=t(65),be={name:"DashboardPage",components:{EditCollaborator:ge},emits:["closePage"],data(){return{mode:b.Z.get("mode"),items:{},search:"",loading:!0,list:!1,modal:!1,dataCollaborator:{},page:"users"}},methods:{...(0,fe.OI)(["SAVE_SYSTEM"]),modeView:function(a){this.mode=a},getCollaborators(){(0,k.m)({method:"GET",url:"agerv/management/collaborators",headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((a=>{this.items=a.data,this.list=!0,this.SAVE_SYSTEM({loading:!1})})).catch((a=>{console.log(a)}))},editCollaborator(a){this.page="edit-user",this.dataCollaborator=a},closePage:function(){this.page="users"}},computed:{CollaboratorFiltered:function(){let a=[];return a=this.items.filter((a=>a.collaborator.toLowerCase().indexOf(this.search.toLowerCase())>-1)),a}},created(){this.getCollaborators()}};const ke=(0,ue.Z)(be,[["render",f],["__scopeId","data-v-2f417a1b"]]);var ye=ke}}]);
//# sourceMappingURL=371.a292b7d9.js.map