{"version":3,"file":"js/687.07553ca9.js","mappings":"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","sources":["webpack://ageportal/./src/views/intranet/ageReport/app/ReportPage.vue","webpack://ageportal/./src/views/intranet/ageReport/app/ReportPage.vue?61bb"],"sourcesContent":["<template>\r\n  <h1>\r\n    Relatórios disponíveis\r\n  </h1>\r\n  <div id=\"reports\" v-if=\"status === true\">\r\n    <div class=\"report\"\r\n         v-for=\"(report, key) in reports\"\r\n         :key=\"key\"\r\n         :style=\"'animation-delay: '+key * 0.1+'s'\"\r\n         @click=\"downloadReport(report.isPeriodoHora,report.isPeriodo,report.url,report.nome_arquivo, report.id)\">\r\n      <i class=\"fi fi-rr-document-signed\"></i>\r\n      <span>{{ report.nome }}</span>\r\n    </div>\r\n  </div>\r\n  <div id=\"modal\" v-if=\"modal === true\">\r\n    <div id=\"card-modal\">\r\n      <div id=\"close-button\">\r\n        <i class=\"fi fi-rr-cross-small\" @click=\"this.modal = false\"></i>\r\n      </div>\r\n      <h5 style=\"text-align: center; font-size: 1.4rem\">Selecione o período</h5>\r\n      <form action=\"#\" @submit.prevent=\"downloadReport(0, 0, this.url, this.name, this.reportId)\">\r\n        <input type=\"datetime-local\" name=\"first_period\" id=\"first_period\" v-model=\"firstPeriod\" required>\r\n        <input type=\"datetime-local\" name=\"last_period\" id=\"last_period\" v-model=\"lastPeriod\" required>\r\n        <input type=\"submit\" value=\"Baixar\">\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Cookie from \"js-cookie\";\r\nimport {AXIOS} from \"../../../../../services/api.ts\";\r\nimport {mapGetters, mapMutations} from \"vuex\";\r\n\r\nexport default {\r\n  name: \"ReportPage\",\r\n  components: {\r\n  },\r\n  data () {\r\n    return {\r\n      mode: Cookie.get('mode'),\r\n      reports: {},\r\n      url: '',\r\n      name: '',\r\n      reportId: 0,\r\n      modal: false,\r\n      firstPeriod: '',\r\n      lastPeriod: '',\r\n      firstPeriodHour: '',\r\n      lastPeriodHour: '',\r\n      loading: false,\r\n      status: false\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n       'SAVE_MENU',\r\n        'SAVE_SYSTEM'\r\n    ]),\r\n    modeView: function (mode) {\r\n      this.mode = mode\r\n    },\r\n    getReports: function() {\r\n\r\n      AXIOS({\r\n        method: 'GET',\r\n        url: 'agereport/report/reports',\r\n        headers: {\r\n          'Authorization': 'Bearer' + Cookie.get('token')\r\n        }\r\n      }).then((res) => {\r\n        this.reports = res.data\r\n        this.status = true\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    downloadReport: function (periodHour, period, url, name, id) {\r\n\r\n      if(period === 1 || periodHour === 1) {\r\n        this.name = name\r\n        this.reportId = id\r\n\r\n        this.modal = true\r\n\r\n      } else {\r\n        this.loading = true\r\n        this.reportId = id\r\n\r\n        AXIOS({\r\n          method: 'GET',\r\n          url: `agereport/report-download/${this.reportId}`,\r\n          headers: {\r\n            'Authorization': 'Bearer '+Cookie.get('token')\r\n          },\r\n          params: {\r\n            firstPeriod: this.firstPeriod,\r\n            lastPeriod: this.lastPeriod,\r\n          },\r\n          responseType: 'blob',\r\n        }).then((res) => {\r\n\r\n          this.loading = false\r\n\r\n          let blob = new Blob([res.data],\r\n              { type: 'vnd.openxmlformats-officedocument.spreadsheetml.sheet' })\r\n          let link = document.createElement('a')\r\n          link.href = window.URL.createObjectURL(blob)\r\n          link.download = name\r\n          link.click()\r\n          this.modal = false\r\n        })\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n        'system'\r\n    ])\r\n  },\r\n  mounted() {\r\n    this.getReports()\r\n    this.SAVE_MENU({system: 'agereport', selected: 'home'})\r\n    this.SAVE_SYSTEM({loading: false})\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n#content-page {\r\n  overflow-y: auto;\r\n\r\n  h1 {\r\n    font-size: 2.4rem;\r\n    font-weight: 500;\r\n    color: #777;\r\n    padding: 1vh 1vw;\r\n    animation: up forwards ease-in-out .4s;\r\n    opacity: 0;\r\n  }\r\n\r\n\r\n  #reports {\r\n    @include container(100%, initial, 1vh 1vw, transparent);\r\n    @include flex(row, flex-start, initial, 20px);\r\n    flex-wrap: wrap;\r\n\r\n    .report {\r\n      @include container(initial, initial, 1vh 1vw, #fff);\r\n      width: calc((100% / 3) - 20px);\r\n      min-height: 5vh;\r\n      border-radius: 5px;\r\n      @include sh-h;\r\n      @include tr-p;\r\n      @include flex(row, flex-start, center, 5px);\r\n      word-break: break-all;\r\n      border: 2px solid #fff;\r\n      animation: up forwards ease-in-out .4s;\r\n      opacity: 0;\r\n\r\n      i {\r\n        font-size: 2.4rem;\r\n        color: $age-or;\r\n      }\r\n\r\n      span {\r\n        font-size: 1.4rem;\r\n        text-align: center;\r\n        font-weight: 600;\r\n        color: $age-bl;\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\n#modal {\r\n  #card-modal {\r\n    width: 20vw;\r\n    padding: 1vh 1vw;\r\n\r\n    form {\r\n      @include flex(column, flex-initial, initial, 10px);\r\n      padding: 2vh 3vw;\r\n\r\n      input[type=date] {\r\n        border: 2px solid #cccccc90;\r\n        padding: 10px 3px;\r\n      }\r\n\r\n      input[type=submit] {\r\n        background-color: $age-bl;\r\n        border: 1px solid $age-bl;\r\n        color: #fff;\r\n        margin-top: 10px;\r\n        padding: 5px 15px;\r\n        border-radius: 3px;\r\n        @include tr-p;\r\n\r\n        &:hover {\r\n          background-color: #fff;\r\n          border-color: $age-bl;\r\n          color: $age-bl;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.loading-bar {\r\n  @include bar;\r\n}\r\n\r\n\r\n.mode-l-p {\r\n  background-color: $ml-back-l;\r\n\r\n}\r\n\r\n.mode-dark {\r\n  background-color: $dark-mode-background;\r\n\r\n  h1 {\r\n    color: $md-text-h1 !important;\r\n  }\r\n\r\n  #reports {\r\n\r\n    .report {\r\n      background-color: $dark-mode-card !important;\r\n      border: 2px solid $dark-mode-card !important;\r\n\r\n      span {\r\n        color: $md-text-light !important;\r\n      }\r\n\r\n      &:hover {\r\n        border: 2px solid $age-or;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  #modal {\r\n    #card-modal {\r\n      background-color: $dark-mode-background;\r\n\r\n      h5 {\r\n        color: $dark-mode-text-primary;\r\n      }\r\n\r\n      form {\r\n        input[type=datetime-local] {\r\n          background-color: $dark-mode-card !important;\r\n          color: $dark-mode-text-secondary;\r\n        }\r\n\r\n        input[type=submit] {\r\n          background-color: $dark-mode-card;\r\n          border-color: $dark-mode-card;\r\n          color: $age-or;\r\n          font-weight: 500;\r\n\r\n          &:hover {\r\n            color: $dark-mode-text-primary;\r\n            border-color: $age-or;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./ReportPage.vue?vue&type=template&id=255e1ba4&scoped=true\"\nimport script from \"./ReportPage.vue?vue&type=script&lang=js\"\nexport * from \"./ReportPage.vue?vue&type=script&lang=js\"\n\nimport \"./ReportPage.vue?vue&type=style&index=0&id=255e1ba4&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\carlos.neto\\\\Documents\\\\Desenvolvimento\\\\Em progresso\\\\portal\\\\portal_agetelecom_front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-255e1ba4\"]])\n\nexport default __exports__"],"names":["_createElementVNode","id","class","style","type","value","_hoisted_1","$data","_createElementBlock","_hoisted_2","_Fragment","report","key","onClick","$options","isPeriodoHora","isPeriodo","url","nome_arquivo","_hoisted_4","nome","_hoisted_5","_hoisted_6","_hoisted_7","modal","_hoisted_8","action","onSubmit","this","name","reportId","required","_hoisted_9","components","data","mode","Cookie","reports","firstPeriod","lastPeriod","firstPeriodHour","lastPeriodHour","loading","status","methods","mapMutations","modeView","getReports","AXIOS","method","headers","then","res","catch","error","console","log","downloadReport","periodHour","period","params","responseType","blob","Blob","link","document","createElement","href","window","URL","createObjectURL","download","click","computed","mapGetters","mounted","SAVE_MENU","system","selected","SAVE_SYSTEM","__exports__","render"],"sourceRoot":""}