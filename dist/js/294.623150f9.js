"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[294],{3294:function(a,t,e){e.r(t),e.d(t,{default:function(){return ka}});var s=e(3396),l=e(7139);const n=a=>((0,s.dD)("data-v-143c7216"),a=a(),(0,s.Cn)(),a),i={key:0,class:"container-dashboard"},d={class:"filters"},r=n((()=>(0,s._)("h1",null,"DASHBOARD",-1))),o={class:"buttons"},c=["disabled"],u=n((()=>(0,s._)("span",null," Penúltimo mês ",-1))),p=[u],h=["disabled"],_=n((()=>(0,s._)("span",null," Último mês ",-1))),g=[_],m={class:"graphs"},b={class:"group-third"},f={class:"card"},v=n((()=>(0,s._)("h2",null,"Cancelamentos",-1))),y={class:"table"},C=n((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Nº do contrato"),(0,s._)("th",null,"Nome do cliente")])],-1))),S={class:"card"},k=n((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-star"})],-1))),w={class:"title-info"},E=n((()=>(0,s._)("h2",null,"Valor da estrela",-1))),D={class:"card"},L=n((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-star"})],-1))),T={class:"title-info"},x=n((()=>(0,s._)("h2",null,"Valor da estrela",-1))),z={class:"card"},G=n((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-rocket-lunch"})],-1))),M={class:"title-info"},R=n((()=>(0,s._)("h2",null,"Meta",-1))),I={class:"card"},W=n((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-chart-line-up"})],-1))),A={class:"title-info"},B=n((()=>(0,s._)("h2",null,"Meta atingida",-1)));function V(a,t,e,n,u,_){const V=(0,s.up)("GraphCards"),F=(0,s.up)("GraphSales");return!0===u.status?((0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",d,[r,(0,s._)("div",o,[(0,s._)("button",{disabled:!0===u.filters.pending,class:(0,l.C_)({selected:"penultimate-month"===u.filters.dataType}),onClick:t[0]||(t[0]=a=>_.getData("penultimate-month"))},p,10,c),(0,s._)("button",{disabled:!0===u.filters.pending,class:(0,l.C_)({selected:"month"===u.filters.dataType}),onClick:t[1]||(t[1]=a=>_.getData("month"))},g,10,h)])]),(0,s.Wm)(V,{data:u.data},null,8,["data"]),(0,s._)("div",m,[!1===u.updateChart?((0,s.wg)(),(0,s.j4)(F,{key:0,data_sales:u.data.sales,data_stars:u.data.stars},null,8,["data_sales","data_stars"])):(0,s.kq)("",!0),(0,s._)("div",b,[(0,s._)("div",f,[v,(0,s._)("div",y,[(0,s._)("table",null,[C,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.data.cancel.extract,((a,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:t},[(0,s._)("td",null,(0,l.zw)(a.id_contrato),1),(0,s._)("td",null,(0,l.zw)(a.nome_cliente),1)])))),128))])])])]),(0,s._)("div",S,[k,(0,s._)("div",w,[(0,s._)("h3",null,"R$"+(0,l.zw)(u.data.valueStar.value),1),E])]),(0,s._)("div",D,[L,(0,s._)("div",T,[(0,s._)("h3",null,"R$"+(0,l.zw)(u.data.valueStar.value),1),x])]),(0,s._)("div",z,[G,(0,s._)("div",M,[(0,s._)("h3",null,(0,l.zw)(u.data.meta),1),R])]),(0,s._)("div",I,[W,(0,s._)("div",A,[(0,s._)("h3",null,(0,l.zw)(u.data.metaPercent)+"%",1),B])])])])])):(0,s.kq)("",!0)}var F=e(65);const q=a=>((0,s.dD)("data-v-4100c438"),a=a(),(0,s.Cn)(),a),Y={class:"card"},Z=q((()=>(0,s._)("div",{class:"title-info"},[(0,s._)("h1",null,"Vendas e média de estrelas do período"),(0,s._)("h3",null,"Apenas vendas aprovadas e válidas")],-1))),P=q((()=>(0,s._)("div",{class:"graph"},[(0,s._)("canvas",{id:"lineSalesDaily"})],-1))),$=[Z,P];function H(a,t,e,l,n,i){return(0,s.wg)(),(0,s.iD)("div",Y,$)}e(7658);var N=e(1632),O={name:"GraphSales",props:["data_sales","data_stars"],computed:{...(0,F.Se)(["system"])},methods:{getLineSales:function(){const a=document.getElementById("lineSalesDaily").getContext("2d"),t=["#6C6EF6","#d4d4e1","#6C6EF6","#d4d4e1","#6C6EF6"],e=[],s=[],l=[];this.data_sales.salesForWeek.forEach((a=>{s.push("Sem "+a.week),e.push(a.sales)})),this.data_stars.starsForWeek.forEach((a=>{l.push(a.sales)}));const n={labels:s,datasets:[{type:"bar",data:e,label:"Vendas",borderWidth:0,pointRadius:0,borderRadius:15,backgroundColor:t,borderSkipped:!1,maxBarThickness:50,categoryPercentage:.8,order:2},{type:"line",order:1,data:l,borderWidth:2,pointRadius:4,backgroundColor:"#6A6CF6",fill:!1,label:"Estrelas"}]},i=new N.kL(a,{data:n,options:{scales:{y:{display:!0,grid:{display:!1}},x:{display:!0,grid:{display:!1},border:{display:!1},ticks:{font:{size:8}}}},plugins:{legend:{display:!1}},elements:{line:{tension:.3,borderColor:"rgb(52,140,212)"}}}});return i}},mounted(){this.getLineSales()}},j=e(89);const K=(0,j.Z)(O,[["render",H],["__scopeId","data-v-4100c438"]]);var J=K;const Q=a=>((0,s.dD)("data-v-09b5d5cd"),a=a(),(0,s.Cn)(),a),U={class:"graphs-cards"},X={class:"card"},aa=Q((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-chart-mixed"})],-1))),ta={class:"title-info"},ea=Q((()=>(0,s._)("h2",null,"Total de vendas",-1))),sa={class:"card"},la=Q((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-trophy-star"})],-1))),na={class:"title-info"},ia=Q((()=>(0,s._)("h2",null,"Total de estrelas",-1))),da={class:"card"},ra=Q((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-usd-square"})],-1))),oa={class:"title-info"},ca=Q((()=>(0,s._)("h2",null,"Total em comissão",-1))),ua={class:"card"},pa=Q((()=>(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"fi fi-rr-ban"})],-1))),ha={class:"title-info"},_a=Q((()=>(0,s._)("h2",null,"Total de cancelamentos",-1)));function ga(a,t,e,n,i,d){return(0,s.wg)(),(0,s.iD)("div",U,[(0,s._)("div",X,[aa,(0,s._)("div",ta,[(0,s._)("h3",null,(0,l.zw)(e.data.sales.count),1),ea])]),(0,s._)("div",sa,[la,(0,s._)("div",na,[(0,s._)("h3",null,(0,l.zw)(e.data.stars.totalStars),1),ia])]),(0,s._)("div",da,[ra,(0,s._)("div",oa,[(0,s._)("h3",null,"R$"+(0,l.zw)(e.data.commission.liquid),1),ca])]),(0,s._)("div",ua,[pa,(0,s._)("div",ha,[(0,s._)("h3",null,(0,l.zw)(e.data.cancel.count),1),_a])])])}var ma={name:"GraphCards",props:["data"],methods:{getLineSales:function(){const a=document.getElementById("lineSales").getContext("2d");var t=a.createLinearGradient(0,0,0,30);t.addColorStop(0,"rgb(52,140,212,0)"),t.addColorStop(1,"rgba(9,41,65,0.0)");const e={labels:[1,2,3,4,5,6,7],datasets:[{data:[10,5,8,3,9,1],borderWidth:2,pointRadius:1,backgroundColor:t,fill:!0,label:"Vendas"}]},s=new N.kL(a,{type:"line",data:e,options:{scales:{y:{display:!1},x:{display:!1,grid:{display:!1},border:{display:!1},ticks:{color:"rgba(89, 91, 106, 0.48)"}}},plugins:{legend:{display:!1}},elements:{line:{tension:.5,borderColor:"rgb(52,140,212)"}}}});return s},getLineStars:function(){const a=document.getElementById("lineStars").getContext("2d");var t=a.createLinearGradient(0,0,0,30);t.addColorStop(0,"rgb(238,202,21,0)"),t.addColorStop(1,"rgba(86,73,8,0.0)");const e={labels:[1,2,3,4,5,6,7],datasets:[{data:[3,1,5,1,10,3],borderWidth:2,pointRadius:1,backgroundColor:t,fill:!0,label:"Estrelas"}]},s=new N.kL(a,{type:"line",data:e,options:{scales:{y:{display:!1},x:{display:!1,grid:{display:!1},border:{display:!1},ticks:{color:"rgba(89, 91, 106, 0.48)"}}},plugins:{legend:{display:!1}},elements:{line:{tension:.4,borderColor:"rgb(238,202,21)"}}}});return s},getLineCommission:function(){const a=document.getElementById("lineCommission").getContext("2d");var t=a.createLinearGradient(0,0,0,30);t.addColorStop(0,"rgb(18,161,25,0)"),t.addColorStop(1,"rgba(10,79,13,0.0)");const e={labels:[1,2,3,4,5,6,7],datasets:[{data:[3,7,2,10,6,15],borderWidth:2,pointRadius:1,backgroundColor:t,fill:!0,label:"Comissão"}]},s=new N.kL(a,{type:"line",data:e,options:{scales:{y:{display:!1},x:{display:!1,grid:{display:!1},border:{display:!1},ticks:{color:"rgba(89, 91, 106, 0.48)"}}},plugins:{legend:{display:!1}},elements:{line:{tension:.5,borderColor:"rgb(18,161,25)"}}}});return s},getLineCancels:function(){const a=document.getElementById("lineCancels").getContext("2d");var t=a.createLinearGradient(0,0,0,30);t.addColorStop(0,"rgba(206,5,5,0)"),t.addColorStop(1,"rgba(56,3,3,0)");const e={labels:[1,2,3,4,5,6,7],datasets:[{data:[10,3,2,1,7,1],borderWidth:2,pointRadius:1,backgroundColor:t,fill:!0,label:"Cancelamentos"}]},s=new N.kL(a,{type:"line",data:e,options:{scales:{y:{display:!1},x:{display:!1,grid:{display:!1},border:{display:!1},ticks:{color:"rgba(89, 91, 106, 0.48)"}}},plugins:{legend:{display:!1}},elements:{line:{tension:.5,borderColor:"rgb(206,5,5)"}}}});return s}},mounted(){}};const ba=(0,j.Z)(ma,[["render",ga],["__scopeId","data-v-09b5d5cd"]]);var fa=ba,va=e(8089),ya=e(680),Ca={name:"DashboardSales",components:{GraphSales:J,GraphCards:fa},data(){return{filters:{dataType:"month",pending:!1,month:null,year:null},data:{},status:!1,updateChart:!1}},methods:{...(0,F.OI)(["SAVE_SYSTEM"]),getData:function(a){this.filters.dataType=a,this.filters.pending=!0,this.updateChart=!0,this.getSellers()},getSellers:function(){this.SAVE_SYSTEM({loading:!0}),"penultimate-month"===this.filters.dataType?(this.filters.month=this.filters.month-1,this.filters.month="0"+this.filters.month):this.getMonth(),(0,va.m)({method:"GET",url:"agerv/analytics/payment",headers:{Authorization:"Bearer "+ya.Z.get("token")},params:{dashboard:!0,year:"2023",month:this.filters.month}}).then((a=>{this.data=a.data,this.SAVE_SYSTEM({loading:!1}),this.status=!0,this.filters.pending=!1,this.updateChart=!1}))},getMonth:function(){const a=new Date;a.getMonth()<10?this.filters.month="0"+a.getMonth():this.filters.month=(a.getMonth()+1).toString()}},computed:{...(0,F.Se)(["system"])},mounted(){this.getMonth(),this.getSellers()}};const Sa=(0,j.Z)(Ca,[["render",V],["__scopeId","data-v-143c7216"]]);var ka=Sa}}]);
//# sourceMappingURL=294.623150f9.js.map