"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[109],{5109:function(t,a,e){e.r(a),e.d(a,{default:function(){return Zt}});var s=e(3396),n=e(9242),i=e(7139);const l=t=>((0,s.dD)("data-v-5ba1f5e9"),t=t(),(0,s.Cn)(),t),o={class:"search-container"},c={class:"search"},d=l((()=>(0,s._)("i",{class:"fi fi-rr-search"},null,-1))),r={class:"cards-container"},u={class:"header"},h=l((()=>(0,s._)("div",{class:"title"},[(0,s._)("i",{class:"fi fi-rr-user"}),(0,s._)("span",null," Dados do Cliente ")],-1))),p={key:0,class:"lds-dual-ring"},_={key:1,class:"fi fi-rr-list-check"},m={class:"table"},k={class:"data-item"},g={class:"item"},v=l((()=>(0,s._)("p",null,"Nome",-1))),f={class:"item"},w=l((()=>(0,s._)("p",null,"CPF / CNPJ",-1))),y={class:"item"},b=l((()=>(0,s._)("p",null,"E-mail",-1))),E={class:"data-items"},z={class:"item"},C=l((()=>(0,s._)("p",null,"Telefone Principal",-1))),M={class:"item"},A=l((()=>(0,s._)("p",null,"Telefone Secundário",-1))),D={class:"data-item"},S={class:"item"},U=l((()=>(0,s._)("p",null,"Endereço",-1))),T=l((()=>(0,s._)("br",null,null,-1))),O={class:"header"},P=l((()=>(0,s._)("div",{class:"title"},[(0,s._)("i",{class:"fi fi-rr-menu-burger"}),(0,s._)("span",null," Histórico do Cliente ")],-1))),R={key:0,class:"lds-dual-ring"},N={key:1,class:"fi fi-rr-list-check"},q={class:"header"},V=l((()=>(0,s._)("div",{class:"title"},[(0,s._)("i",{class:"fi fi-rr-user"}),(0,s._)("span",null," Dados do Contrato ")],-1))),x={key:0,class:"lds-dual-ring"},L={key:1,class:"fi fi-rr-cross-small",style:{color:"red"}},I={class:"table"},W={class:"data-item"},F={class:"item"},J=l((()=>(0,s._)("p",null,"Nº do contrato",-1))),Z={class:"item"},j=l((()=>(0,s._)("p",null,"Estagio",-1))),B={class:"item"},H=l((()=>(0,s._)("p",null,"Status",-1))),$={class:"item"},Y=l((()=>(0,s._)("p",null,"Inclusão do contrato",-1))),K={class:"item"},Q=l((()=>(0,s._)("p",null,"Desbloqueios realizados",-1))),X={class:"item"},G=l((()=>(0,s._)("p",null,"Contrato bloqueado",-1))),tt={class:"item"},at=l((()=>(0,s._)("p",null,"Reduzido",-1))),et={class:"item"},st=l((()=>(0,s._)("p",null,"Informações sobre o plano",-1))),nt={class:"header"},it=l((()=>(0,s._)("div",{class:"title"},[(0,s._)("i",{class:"fi fi-rr-broadcast-tower"}),(0,s._)("span",null," Dados da Conexão ")],-1))),lt={key:0,class:"lds-dual-ring"},ot={key:1,class:"fi fi-br-cross"},ct={class:"table"},dt={class:"data-item"},rt={class:"item"},ut=l((()=>(0,s._)("p",null,"Serial do cliente",-1))),ht={class:"item"},pt=l((()=>(0,s._)("p",null,"Ponto de acesso",-1))),_t={class:"item"},mt=l((()=>(0,s._)("p",null,"Dados da rede Wi-Fi",-1))),kt={class:"item"},gt=l((()=>(0,s._)("p",null,"Extrato de conexão",-1))),vt={class:"header"},ft=l((()=>(0,s._)("div",{class:"title"},[(0,s._)("i",{class:"fi fi-rr-search-dollar"}),(0,s._)("span",null," Dados Financeiros ")],-1))),wt={key:0,class:"lds-dual-ring"},yt={key:1,class:"fi fi-rr-list-check"},bt=l((()=>(0,s._)("div",{class:"table"},[(0,s._)("div",{class:"data-item"},[(0,s._)("div",{class:"item"},[(0,s._)("p",null,"Nº de faturas em aberto"),(0,s._)("span",null,"-")]),(0,s._)("div",{class:"item"},[(0,s._)("p",null,"Valor total em aberto"),(0,s._)("span",null,"-")])])],-1)));function Et(t,a,e,l,Et,zt){const Ct=(0,s.Q2)("maska");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",c,[d,(0,s.wy)((0,s._)("input",{type:"text",name:"search",id:"search","onUpdate:modelValue":a[0]||(a[0]=t=>Et.search=t),placeholder:"Insira o CPF/CNPJ do cliente",autocomplete:"off",onKeyup:a[1]||(a[1]=(0,n.D2)(((...t)=>zt.getClient&&zt.getClient(...t)),["enter"]))},null,544),[[n.nr,Et.search],[Ct,void 0,Et.options]])]),(0,s._)("div",r,[(0,s._)("div",{class:(0,i.C_)(["card",{"data-search":Et.data.client.id}])},[(0,s._)("div",u,[h,Et.loading.client?((0,s.wg)(),(0,s.iD)("div",p)):(0,s.kq)("",!0),Et.data.client.id?((0,s.wg)(),(0,s.iD)("i",_)):(0,s.kq)("",!0)]),(0,s._)("div",m,[(0,s._)("div",k,[(0,s._)("div",g,[v,(0,s._)("span",null,(0,i.zw)(this.data.client.name?this.data.client.name:" - "),1)]),(0,s._)("div",f,[w,(0,s._)("span",null,(0,i.zw)(this.data.client.tx_id?this.data.client.tx_id:" - "),1)]),(0,s._)("div",y,[b,(0,s._)("span",null,(0,i.zw)(this.data.client.email?this.data.client.email:" - "),1)])]),(0,s._)("div",E,[(0,s._)("div",z,[C,(0,s._)("span",null,(0,i.zw)(this.data.client.cell_phone_1?this.data.client.cell_phone_1:" - "),1)]),(0,s._)("div",M,[A,(0,s._)("span",null,(0,i.zw)(this.data.client.cell_phone_2?this.data.client.cell_phone_2:" - "),1)])]),(0,s._)("div",D,[(0,s._)("div",S,[U,(0,s._)("span",null,(0,i.zw)(this.data.client.full_address?this.data.client.full_address:" - "),1)])])]),T,(0,s._)("div",O,[P,Et.loading.history?((0,s.wg)(),(0,s.iD)("div",R)):(0,s.kq)("",!0),Et.data.history.id?((0,s.wg)(),(0,s.iD)("i",N)):(0,s.kq)("",!0)])],2),(0,s._)("div",{class:(0,i.C_)(["card",{"data-search":Et.data.contract.id}])},[(0,s._)("div",q,[V,Et.loading.contract?((0,s.wg)(),(0,s.iD)("div",x)):(0,s.kq)("",!0),Et.data.client.id&&!Et.data.contract.id?((0,s.wg)(),(0,s.iD)("i",L)):(0,s.kq)("",!0)]),(0,s._)("div",I,[(0,s._)("div",W,[(0,s._)("div",F,[J,(0,s._)("span",null,(0,i.zw)(this.data.contract.id?this.data.contract.id:" - "),1)]),(0,s._)("div",Z,[j,(0,s._)("span",{class:(0,i.C_)({normal:"Aprovado"===Et.data.contract.stage,canceled:"Cancelado"===Et.data.contract.stage,suspended:"Em Aprovação"===Et.data.contract.stage})},(0,i.zw)(this.data.contract.stage?this.data.contract.stage:" - "),3)]),(0,s._)("div",B,[H,(0,s._)("span",{class:(0,i.C_)({normal:"Normal"===Et.data.contract.status,canceled:"Cancelado"===Et.data.contract.status,suspended:"Suspenso"===Et.data.contract.status,blocked:"Bloqueio Financeiro"===Et.data.contract.status})},(0,i.zw)(this.data.contract.status?this.data.contract.status:" - "),3)]),(0,s._)("div",$,[Y,(0,s._)("span",null,(0,i.zw)(this.data.contract.date_incluse?this.data.contract.date_incluse:" - "),1)]),(0,s._)("div",K,[Q,(0,s._)("span",null,(0,i.zw)(this.data.contract.unblock?"03/02/2022":" - "),1)]),(0,s._)("div",X,[G,(0,s._)("span",null,(0,i.zw)(this.data.contract.blocked?"Não - Último em 08/10/2022":" - "),1)]),(0,s._)("div",tt,[at,(0,s._)("span",null,(0,i.zw)(this.data.contract.reduction?"Não":" - "),1)]),(0,s._)("div",et,[st,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Uk)("Plano: "),(0,s._)("b",null,(0,i.zw)(this.data.contract.plan?this.data.contract.plan:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("IP FIXO: "),(0,s._)("b",null,(0,i.zw)(this.data.contract.ip_fix?this.data.contract.ip_fix:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("Data da aprovação: "),(0,s._)("b",null,(0,i.zw)(this.data.contract.date_approval?this.data.contract.date_approval:" - "),1)])])])])])],2),(0,s._)("div",{class:(0,i.C_)(["card",{"data-search":Et.data.connection.serial}])},[(0,s._)("div",nt,[it,Et.loading.connection?((0,s.wg)(),(0,s.iD)("div",lt)):(0,s.kq)("",!0),Et.data.connection.serial||0===Et.data.connection.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("i",ot))]),(0,s._)("div",ct,[(0,s._)("div",dt,[(0,s._)("div",rt,[ut,(0,s._)("span",null,(0,i.zw)(this.data.connection.serial?this.data.connection.serial:" - "),1)]),(0,s._)("div",ht,[pt,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Uk)("POP: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.pop_olt?this.data.connection.pop_olt:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("OLT: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.olt?this.data.connection.olt:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("Slot OLT: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.slot_olt?this.data.connection.slot_olt:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("Porta OLT: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.port_olt?this.data.connection.port_olt:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("ID ONU: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.serial?this.data.connection.serial:" - "),1)])])]),(0,s._)("div",_t,[mt,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Uk)("Usuário: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.wifi_name?this.data.connection.wifi_name:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("Senha: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.wifi_password?this.data.connection.wifi_password:" - "),1)])])]),(0,s._)("div",kt,[gt,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Uk)("Data da instalação: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.date_activation?this.data.connection.date_activation:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("Data da última atualização: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.date_modified?this.data.connection.date_modified:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("Consumo de dados (este mês): "),(0,s._)("b",null,(0,i.zw)(this.data.connection.consum?this.data.connection.consum:" - "),1)]),(0,s._)("li",null,[(0,s.Uk)("Velocidade da conexão: "),(0,s._)("b",null,(0,i.zw)(this.data.connection.plan_speed?this.data.connection.plan_speed:" - "),1)])])])])])],2),(0,s._)("div",{class:(0,i.C_)(["card",{"data-search":Et.data.financial.id}])},[(0,s._)("div",vt,[ft,Et.loading.financial?((0,s.wg)(),(0,s.iD)("div",wt)):(0,s.kq)("",!0),Et.data.financial.id?((0,s.wg)(),(0,s.iD)("i",yt)):(0,s.kq)("",!0)]),bt],2)])])}var zt=e(65),Ct=e(8089),Mt=e(680),At=(e(7658),Object.defineProperty),Dt=(t,a,e)=>a in t?At(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,St=(t,a,e)=>(Dt(t,"symbol"!=typeof a?a+"":a,e),e);const Ut={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class Tt{constructor(t={}){St(this,"opts",{}),St(this,"memo",new Map);const a={...t};if(null!=a.tokens){a.tokens=a.tokensReplace?{...a.tokens}:{...Ut,...a.tokens};for(const t of Object.values(a.tokens))"string"==typeof t.pattern&&(t.pattern=new RegExp(t.pattern))}else a.tokens=Ut;Array.isArray(a.mask)&&(a.mask.length>1?a.mask=[...a.mask].sort(((t,a)=>t.length-a.length)):a.mask=a.mask[0]??""),""===a.mask&&(a.mask=null),this.opts=a}masked(t){return this.process(t,this.findMask(t))}unmasked(t){return this.process(t,this.findMask(t),!1)}isEager(){return!0===this.opts.eager}isReversed(){return!0===this.opts.reversed}completed(t){const a=this.findMask(t);if(null==this.opts.mask||null==a)return!1;const e=this.process(t,a).length;return"string"==typeof this.opts.mask?e>=this.opts.mask.length:"function"==typeof this.opts.mask?e>=a.length:this.opts.mask.filter((t=>e>=t.length)).length===this.opts.mask.length}findMask(t){const a=this.opts.mask;if(null==a)return null;if("string"==typeof a)return a;if("function"==typeof a)return a(t);const e=this.process(t,a.slice(-1).pop()??"",!1);return a.find((a=>this.process(t,a,!1).length>=e.length))??""}escapeMask(t){const a=[],e=[];return t.split("").forEach(((s,n)=>{"!"===s&&"!"!==t[n-1]?e.push(n-e.length):a.push(s)})),{mask:a.join(""),escaped:e}}process(t,a,e=!0){var s;if(null==a)return t;const n=`value=${t},mask=${a},masked=${e?1:0}`;if(this.memo.has(n))return this.memo.get(n);const{mask:i,escaped:l}=this.escapeMask(a),o=[],c=null!=this.opts.tokens?this.opts.tokens:{},d=this.isReversed()?-1:1,r=this.isReversed()?"unshift":"push",u=this.isReversed()?0:i.length-1,h=this.isReversed()?()=>k>-1&&g>-1:()=>k<i.length&&g<t.length,p=t=>!this.isReversed()&&t<=u||this.isReversed()&&t>=u;let _,m=-1,k=this.isReversed()?i.length-1:0,g=this.isReversed()?t.length-1:0;for(;h();){const a=i.charAt(k),n=c[a],h=null!=(null==n?void 0:n.transform)?n.transform(t.charAt(g)):t.charAt(g);if(l.includes(k)||null==n)e&&!this.isEager()&&o[r](a),h!==a||this.isEager()?_=a:g+=d,this.isEager()||(k+=d);else{if(null!=h.match(n.pattern))o[r](h),n.repeated?(-1===m?m=k:k===u&&k!==m&&(k=m-d),u===m&&(k-=d)):n.multiple&&(k-=d),k+=d;else if(n.multiple){const t=null!=(null==(s=o[g-d])?void 0:s.match(n.pattern)),a=i.charAt(k+d);t&&""!==a&&null==c[a]?(k+=d,g-=d):o[r]("")}else h===_?_=void 0:n.optional&&(k+=d,g-=d);g+=d}if(this.isEager())for(;p(k)&&(null==c[i.charAt(k)]||l.includes(k));)e?o[r](i.charAt(k)):i.charAt(k)===t.charAt(g)&&(g+=d),k+=d}return this.memo.set(n,o.join("")),this.memo.get(n)}}const Ot=t=>JSON.parse(t.replaceAll("'",'"')),Pt=(t,a={})=>{const e={...a};return null!=t.dataset.maska&&""!==t.dataset.maska&&(e.mask=Nt(t.dataset.maska)),null!=t.dataset.maskaEager&&(e.eager=Rt(t.dataset.maskaEager)),null!=t.dataset.maskaReversed&&(e.reversed=Rt(t.dataset.maskaReversed)),null!=t.dataset.maskaTokensReplace&&(e.tokensReplace=Rt(t.dataset.maskaTokensReplace)),null!=t.dataset.maskaTokens&&(e.tokens=qt(t.dataset.maskaTokens)),e},Rt=t=>""===t||!!JSON.parse(t),Nt=t=>t.startsWith("[")&&t.endsWith("]")?Ot(t):t,qt=t=>{if(t.startsWith("{")&&t.endsWith("}"))return Ot(t);const a={};return t.split("|").forEach((t=>{const e=t.split(":");a[e[0]]={pattern:new RegExp(e[1]),optional:"optional"===e[2],multiple:"multiple"===e[2],repeated:"repeated"===e[2]}})),a};class Vt{constructor(t,a={}){St(this,"items",new Map),St(this,"beforeinputEvent",(t=>{const a=t.target,e=this.items.get(a);e.isEager()&&"inputType"in t&&t.inputType.startsWith("delete")&&e.unmasked(a.value).length<=1&&this.setMaskedValue(a,"")})),St(this,"inputEvent",(t=>{if(t instanceof CustomEvent&&"input"===t.type&&null!=t.detail&&"object"==typeof t.detail&&"masked"in t.detail)return;const a=t.target,e=this.items.get(a),s=a.value,n=a.selectionStart,i=a.selectionEnd;let l=s;if(e.isEager()){const a=e.masked(s),n=e.unmasked(s);""===n&&"data"in t&&null!=t.data?l=t.data:n!==e.unmasked(a)&&(l=n)}if(this.setMaskedValue(a,l),"inputType"in t&&(t.inputType.startsWith("delete")||null!=n&&n<s.length))try{a.setSelectionRange(n,i)}catch{}})),this.options=a,"string"==typeof t?this.init(Array.from(document.querySelectorAll(t)),this.getMaskOpts(a)):this.init("length"in t?Array.from(t):[t],this.getMaskOpts(a))}destroy(){for(const t of this.items.keys())t.removeEventListener("input",this.inputEvent),t.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(t,a){const e=this.items.get(t),s=new Tt(Pt(t,this.getMaskOpts(a)));return JSON.stringify(e.opts)!==JSON.stringify(s.opts)}needUpdateValue(t){const a=t.dataset.maskaValue;return null==a&&""!==t.value||null!=a&&a!==t.value}getMaskOpts(t){const{onMaska:a,preProcess:e,postProcess:s,...n}=t;return n}init(t,a){for(const e of t){const t=new Tt(Pt(e,a));this.items.set(e,t),""!==e.value&&this.setMaskedValue(e,e.value),e.addEventListener("input",this.inputEvent),e.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(t,a){const e=this.items.get(t);null!=this.options.preProcess&&(a=this.options.preProcess(a));const s=e.masked(a),n=e.unmasked(e.isEager()?s:a),i=e.completed(a),l={masked:s,unmasked:n,completed:i};a=s,null!=this.options.postProcess&&(a=this.options.postProcess(a)),t.value=a,t.dataset.maskaValue=a,null!=this.options.onMaska&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach((t=>t(l))):this.options.onMaska(l)),t.dispatchEvent(new CustomEvent("maska",{detail:l})),t.dispatchEvent(new CustomEvent("input",{detail:l}))}}const xt=new WeakMap,Lt=t=>{setTimeout((()=>{var a;!0===(null==(a=xt.get(t))?void 0:a.needUpdateValue(t))&&t.dispatchEvent(new CustomEvent("input"))}))},It=(t,a)=>{const e=t instanceof HTMLInputElement?t:t.querySelector("input"),s={...a.arg};if(null==e||"file"===(null==e?void 0:e.type))return;Lt(e);const n=xt.get(e);if(null!=n){if(!n.needUpdateOptions(e,s))return;n.destroy()}if(null!=a.value){const t=a.value,e=a=>{t.masked=a.masked,t.unmasked=a.unmasked,t.completed=a.completed};s.onMaska=null==s.onMaska?e:Array.isArray(s.onMaska)?[...s.onMaska,e]:[s.onMaska,e]}xt.set(e,new Vt(e,s))};var Wt={name:"HomeServiceDesk",directives:{maska:It},data(){return{search:"",data:{client:[],connection:[],contract:[],financial:[],history:[]},loading:{client:!1,connection:!1,contract:!1,financial:!1,history:!1},options:{mask:"###.###.###-##",eager:!0}}},methods:{...(0,zt.OI)(["SAVE_SYSTEM"]),tradeLoading(){this.loading.client=!this.loading.client,this.loading.connection=!this.loading.connection,this.loading.contract=!this.loading.contract,this.loading.financial=!this.loading.financial,this.loading.history=!this.loading.history},getClient(){if(this.tradeLoading(),this.search.length<14)return alert("CPF inválido");this.data.client=[],this.data.contract=[],this.data.connection=[],(0,Ct.m)({method:"get",url:"/agetools/tools/service-desk/client/"+this.search,headers:{Authorization:"Bearer "+Mt.Z.get("token")}}).then((t=>{if(0===t.data.length)return this.tradeLoading(),alert("Nenhum cliente encontrado!");setTimeout((()=>{this.data.client=t.data[0],this.loading.client=!1,this.getContract()}),1e3)}))},getContract(){(0,Ct.m)({method:"get",url:"/agetools/tools/service-desk/contract/"+this.data.client.id,headers:{Authorization:"Bearer "+Mt.Z.get("token")}}).then((t=>{if(0===t.data.length)return this.tradeLoading(),this.loading.client=!1,alert("Nenhum contrato vinculado");setTimeout((()=>{this.data.contract=t.data[0],this.loading.contract=!1,this.data.contract.id?this.getConnection():this.data.contract=[]}),1e3)}))},getConnection(){(0,Ct.m)({method:"get",url:"/agetools/tools/service-desk/connection/"+this.data.contract.id,headers:{Authorization:"Bearer "+Mt.Z.get("token")}}).then((t=>{if(0===t.data.length)return alert("Nenhuma conexão encontrada");setTimeout((()=>{this.data.connection=t.data[0],this.loading.connection=!1}),1e3)}))}},created(){this.SAVE_SYSTEM({loading:!1})}},Ft=e(89);const Jt=(0,Ft.Z)(Wt,[["render",Et],["__scopeId","data-v-5ba1f5e9"]]);var Zt=Jt}}]);
//# sourceMappingURL=109.541c6c6a.js.map