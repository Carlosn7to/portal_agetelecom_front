"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[75],{1075:function(o,t,e){e.r(t),e.d(t,{default:function(){return wo}});var a=e(3396),l=e(7139),n=e(9242);const r=o=>((0,a.dD)("data-v-41fb2721"),o=o(),(0,a.Cn)(),o),i={class:"container"},s={class:"filters"},d=r((()=>(0,a._)("div",{class:"search"},[(0,a._)("input",{type:"text",name:"search",id:"search",placeholder:"Buscar...",autocomplete:"off"})],-1))),c={class:"filter"},u=r((()=>(0,a._)("i",{class:"fi fi-rs-filter"},null,-1))),p=[u],h=r((()=>(0,a._)("i",{class:"fi fi-rs-file-excel"},null,-1))),_=[h],g={class:"period"},w=r((()=>(0,a._)("span",null,"Período",-1))),f={class:"turns"},m={class:"data"},k={class:"table"},v={key:0},D=r((()=>(0,a._)("th",null,"Tipo de solicitação",-1))),b={class:"filters-arrow"},y=r((()=>(0,a._)("span",null,"Protocolo",-1))),S={class:"filters-options"},z=r((()=>(0,a._)("th",null,"Nome do cliente",-1))),C={class:"filters-arrow"},T=r((()=>(0,a._)("span",null,"Turno",-1))),q={class:"filters-options"},N={class:"filters-arrow"},I=r((()=>(0,a._)("span",null,"Região",-1))),E={class:"filters-options"},x=r((()=>(0,a._)("th",null,"Equipe",-1))),A={class:"filters-arrow"},U=r((()=>(0,a._)("span",null,"Técnico",-1))),M={class:"filters-options"},O=r((()=>(0,a._)("th",null,"Data inicio att.",-1))),H=r((()=>(0,a._)("th",null,"Data fim att.",-1))),P=r((()=>(0,a._)("th",null,"Status",-1))),Y=r((()=>(0,a._)("th",null,"Data inicio agendamento",-1))),B=r((()=>(0,a._)("th",null,"Data fim agendamento",-1))),R=r((()=>(0,a._)("th",null,"Nº do contrato",-1))),V=r((()=>(0,a._)("th",null,"Situacao do contrato",-1))),Z=r((()=>(0,a._)("th",null,"Status do contrato",-1))),F=r((()=>(0,a._)("th",null,"Contexto",-1))),L=r((()=>(0,a._)("th",null,"Problema",-1))),K={key:0,class:"modal-filters"},j={class:"card-modal"},G={class:"close-button"},J=r((()=>(0,a._)("h2",null,"Filtros disponíveis",-1))),Q={class:"filters-available"},W={class:"filter-available"},X=r((()=>(0,a._)("label",{for:"typeNote"},"Tipo de solicitação: ",-1))),$=["value"],oo={class:"filter-available"},to=r((()=>(0,a._)("label",{for:"dateSchedule"},[(0,a.Uk)("Data do agendamento: "),(0,a._)("b",null,"*")],-1))),eo={class:"filter-available"},ao=r((()=>(0,a._)("label",{for:"region"},"Região: ",-1))),lo=r((()=>(0,a._)("option",{value:"0",selected:""},"--- Selecione a região ---",-1))),no=["value"],ro=r((()=>(0,a._)("div",{class:"filter-data"},[(0,a._)("button",null,"Filtrar")],-1)));function io(o,t,e,r,u,h){const io=(0,a.up)("LoadingSpinner");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",i,[(0,a._)("div",s,[d,(0,a._)("div",c,[(0,a._)("button",{onClick:t[0]||(t[0]=(...o)=>h.modalAction&&h.modalAction(...o))},p),u.dataItems.length?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[1]||(t[1]=(...o)=>h.download&&h.download(...o))},_)):(0,a.kq)("",!0)]),(0,a._)("span",null,[(0,a.Uk)("Contagem do resultado: "),(0,a._)("b",null,(0,l.zw)(u.dataItems.length?u.dataItems.length:0),1)]),(0,a._)("div",g,[w,(0,a._)("div",f,[(0,a._)("p",null,[(0,a.Uk)("Manhã: "),(0,a._)("b",null,(0,l.zw)(u.countTurns.morning),1)]),(0,a._)("p",null,[(0,a.Uk)("Tarde: "),(0,a._)("b",null,(0,l.zw)(u.countTurns.afternoon),1)]),(0,a._)("p",null,[(0,a.Uk)("Noite: "),(0,a._)("b",null,(0,l.zw)(u.countTurns.night),1)])])])]),(0,a._)("div",m,[(0,a._)("div",k,[u.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("table",v,[(0,a._)("thead",null,[(0,a._)("tr",null,[D,(0,a._)("th",null,[(0,a._)("div",b,[y,(0,a._)("div",S,["no-order"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:t[2]||(t[2]=o=>h.ordenateData("protocol","up"))})):(0,a.kq)("",!0),"up"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:t[3]||(t[3]=o=>h.ordenateData("protocol","down"))})):(0,a.kq)("",!0),"down"===u.orders.protocol?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:t[4]||(t[4]=o=>h.ordenateData("protocol","no-order"))})):(0,a.kq)("",!0)])])]),z,(0,a._)("th",null,[(0,a._)("div",C,[T,(0,a._)("div",q,["no-order"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:t[5]||(t[5]=o=>h.ordenateData("turn","up"))})):(0,a.kq)("",!0),"up"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:t[6]||(t[6]=o=>h.ordenateData("turn","down"))})):(0,a.kq)("",!0),"down"===u.orders.turn?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:t[7]||(t[7]=o=>h.ordenateData("turn","no-order"))})):(0,a.kq)("",!0)])])]),(0,a._)("th",null,[(0,a._)("div",N,[I,(0,a._)("div",E,["no-order"===u.orders.region?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:t[8]||(t[8]=o=>h.ordenateData("region","up"))})):(0,a.kq)("",!0),"up"===u.orders.region?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:t[9]||(t[9]=o=>h.ordenateData("region","down"))})):(0,a.kq)("",!0),"down"===u.orders.region?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:t[10]||(t[10]=o=>h.ordenateData("region","no-order"))})):(0,a.kq)("",!0)])])]),x,(0,a._)("th",null,[(0,a._)("div",A,[U,(0,a._)("div",M,["no-order"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"fi fi-sr-sort-alt",onClick:t[11]||(t[11]=o=>h.ordenateData("technical","up"))})):(0,a.kq)("",!0),"up"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"fi fi-rs-arrow-alt-up",onClick:t[12]||(t[12]=o=>h.ordenateData("technical","down"))})):(0,a.kq)("",!0),"down"===u.orders.technical?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"fi fi-rs-arrow-alt-down",onClick:t[13]||(t[13]=o=>h.ordenateData("technical","no-order"))})):(0,a.kq)("",!0)])])]),O,H,P,Y,B,R,V,Z,F,L])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.dataItems,((o,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,l.zw)(o.type_note),1),(0,a._)("td",null,(0,l.zw)(o.protocol),1),(0,a._)("td",null,(0,l.zw)(o.name_client),1),(0,a._)("td",null,(0,l.zw)(o.turnName),1),(0,a._)("td",null,(0,l.zw)(o.region),1),(0,a._)("td",null,(0,l.zw)(o.team),1),(0,a._)("td",null,(0,l.zw)(o.technical),1),(0,a._)("td",null,(0,l.zw)(o.date_start_attendance),1),(0,a._)("td",null,(0,l.zw)(o.date_end_attendance),1),(0,a._)("td",null,(0,l.zw)(o.status),1),(0,a._)("td",null,(0,l.zw)(o.date_start_schedule),1),(0,a._)("td",null,(0,l.zw)(o.date_end_schedule),1),(0,a._)("td",null,(0,l.zw)(o.contract_id),1),(0,a._)("td",null,(0,l.zw)(o.stage_contract),1),(0,a._)("td",null,(0,l.zw)(o.status_contract),1),(0,a._)("td",null,(0,l.zw)(o.context),1),(0,a._)("td",null,(0,l.zw)(o.problem),1)])))),128))])])),u.loading?((0,a.wg)(),(0,a.j4)(io,{key:1})):(0,a.kq)("",!0)])])]),u.modal?((0,a.wg)(),(0,a.iD)("div",K,[(0,a._)("div",j,[(0,a._)("div",G,[(0,a._)("i",{class:"fi fi-rs-cross",onClick:t[14]||(t[14]=(...o)=>h.modalAction&&h.modalAction(...o))})]),J,(0,a._)("form",{action:"#",onSubmit:t[18]||(t[18]=(0,n.iM)(((...o)=>h.getData&&h.getData(...o)),["prevent"]))},[(0,a._)("div",Q,[(0,a._)("div",W,[X,(0,a.wy)((0,a._)("select",{multiple:"","onUpdate:modelValue":t[15]||(t[15]=o=>u.selectedOptions=o)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.options,((o,t)=>((0,a.wg)(),(0,a.iD)("option",{value:o.value,key:t},(0,l.zw)(o.label),9,$)))),128))],512),[[n.bM,u.selectedOptions]])]),(0,a._)("div",oo,[to,(0,a.wy)((0,a._)("input",{type:"date",name:"dateSchedule",id:"dateSchedule","onUpdate:modelValue":t[16]||(t[16]=o=>u.payload.dateSchedule=o),required:""},null,512),[[n.nr,u.payload.dateSchedule]])]),(0,a._)("div",eo,[ao,(0,a.wy)((0,a._)("select",{name:"region",id:"region","onUpdate:modelValue":t[17]||(t[17]=o=>u.payload.region=o)},[lo,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.filters.region,(o=>((0,a.wg)(),(0,a.iD)("option",{value:o.id,key:o.id},(0,l.zw)(o.title),9,no)))),128))],512),[[n.bM,u.payload.region]])]),ro])],32)])])):(0,a.kq)("",!0)],64)}e(7658);var so=e(65),co=e(8089),uo=e(680),po=e(9372),ho={name:"HomeSchedule",components:{LoadingSpinner:po.Z},data(){return{filtered:!1,modal:!1,filters:{typeNote:{},region:{}},payload:{typeNote:0,dateSchedule:null,region:0},loading:!1,dataItems:{},orders:{protocol:"no-order",turn:"no-order",technical:"no-order",region:"no-order"},countTurns:{morning:0,afternoon:0,night:0},options:[],selectedOptions:[]}},methods:{...(0,so.OI)(["SAVE_SYSTEM"]),modalAction(){this.modal=!this.modal},getFilters:function(){(0,co.m)({method:"GET",url:"agetools/tools/schedule/dashboard/filters",headers:{Authorization:"Bearer "+uo.Z.get("token")}}).then((o=>{this.filters.typeNote=o.data.typeNotes,this.filters.typeNote.forEach((o=>{this.options.push({label:o.title,value:o.id})})),this.filters.region=o.data.regions}))},getData:function(){this.loading=!0,this.modal=!1,(0,co.m)({method:"GET",url:"agetools/tools/schedule/dashboard/data",params:{dateSchedule:this.payload.dateSchedule,typeNote:this.selectedOptions,region:this.payload.region},headers:{Authorization:"Bearer "+uo.Z.get("token")}}).then((o=>{this.loading=!1,this.dataItems=o.data,this.dataItems.forEach((o=>{let t=new Date(o.date_start_schedule),e=t.getHours(),a="";e>=6&&e<12?(a="Manhã",this.countTurns.morning++):e>=12&&e<18?(a="Tarde",this.countTurns.afternoon++):(a="Noite",this.countTurns.night++),o["turnName"]=a}))}))},download:function(){const o=["Protocolo","Status","Tipo de solicitação","Equipe","Técnico","Data inicio att.","Data fim att.","Data inicio agendamento","Data fim agendamento","Nome do cliente","Nº do contrato","Situacao do contrato","Status do contrato","Contexto","Problema","Região"],t=this.dataItems;(0,co.m)({method:"POST",url:"agetools/tools/schedule/dashboard/download-excel",data:{headersExcel:o,data:t},responseType:"blob",headers:{Authorization:"Bearer "+uo.Z.get("token")}}).then((o=>{let t=new Blob([o.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=document.createElement("a");e.href=window.URL.createObjectURL(t),e.download="agenda.xlsx",e.click()}))},ordenateData:function(o,t){let e=()=>{this.orders.turn="no-order",this.orders.technical="no-order",this.orders.protocol="no-order",this.orders.region="no-order"};switch(o){case"turn":e(),this.orders.turn=t,"up"!==t&&"down"!==t||this.dataItems.sort(((o,e)=>o.turnName>e.turnName?"up"===t?1:-1:o.turnName<e.turnName?"down"===t?1:-1:void 0)),"no-order"===t&&this.dataItems.sort(((o,t)=>o.protocol>t.protocol?-1:o.protocol<t.protocol?1:void 0));break;case"protocol":e(),this.orders.protocol=t,"up"!==t&&"down"!==t||this.dataItems.sort(((o,e)=>o.protocol>e.protocol?"up"===t?1:-1:o.protocol<e.protocol?"down"===t?1:-1:void 0)),"no-order"===t&&this.dataItems.sort(((o,t)=>o.protocol>t.protocol?-1:o.protocol<t.protocol?1:void 0));break;case"technical":e(),this.orders.technical=t,"up"!==t&&"down"!==t||this.dataItems.sort(((o,e)=>o.technical>e.technical?"up"===t?1:-1:o.technical<e.technical?"down"===t?1:-1:void 0)),"no-order"===t&&this.dataItems.sort(((o,t)=>o.protocol>t.protocol?-1:o.protocol<t.protocol?1:void 0));break;case"region":e(),this.orders.region=t,"up"!==t&&"down"!==t||this.dataItems.sort(((o,e)=>o.region>e.region?"up"===t?1:-1:o.region<e.region?"down"===t?1:-1:void 0)),"no-order"===t&&this.dataItems.sort(((o,t)=>o.protocol>t.protocol?-1:o.protocol<t.protocol?1:void 0));break}}},computed:{...(0,so.Se)(["system"])},beforeMount(){this.SAVE_SYSTEM({loading:!1}),this.getFilters()}},_o=e(89);const go=(0,_o.Z)(ho,[["render",io],["__scopeId","data-v-41fb2721"]]);var wo=go}}]);
//# sourceMappingURL=75.a949a07a.js.map