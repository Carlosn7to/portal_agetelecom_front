{"version":3,"file":"js/842.3c441ed0.js","mappings":"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","sources":["webpack://ageportal/./src/views/intranet/ageReport/app/ReportPage.vue","webpack://ageportal/./src/views/intranet/ageReport/app/ReportPage.vue?61bb"],"sourcesContent":["<template>\r\n  <div id=\"content-app\">\r\n    <MenuApp\r\n        :mode=\"mode\"\r\n        :system=\"'report'\"\r\n    />\r\n    <div id=\"layer-app\">\r\n      <HeaderApp\r\n          @mode=\"modeView\"\r\n      />\r\n      <div id=\"content-page\"\r\n           :class=\"{'mode-l-p' : mode === 'light'  || mode === undefined,\r\n                  'mode-d-p' : mode === 'dark'}\">\r\n        <h1>\r\n          Relatórios disponíveis\r\n        </h1>\r\n        <div id=\"reports\" v-if=\"status === true\">\r\n          <div class=\"report\"\r\n               v-for=\"(report, key) in reports\"\r\n               :key=\"key\"\r\n               @click=\"downloadReport(report.isPeriodoHora,report.isPeriodo,report.url,report.nome_arquivo, report.id)\">\r\n            <i class=\"fi fi-rr-document-signed\"></i>\r\n            <span>{{ report.nome }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id=\"modal\" v-if=\"modal === true\">\r\n    <div id=\"card-modal\">\r\n      <div id=\"close-button\">\r\n        <i class=\"fi fi-rr-cross-small\" @click=\"this.modal = false\"></i>\r\n      </div>\r\n      <h5 style=\"text-align: center; font-size: 1.4rem\">Selecione o período</h5>\r\n      <form action=\"#\" @submit.prevent=\"downloadReport(0, 0, this.url, this.name, this.reportId)\">\r\n        <input type=\"datetime-local\" name=\"first_period\" id=\"first_period\" v-model=\"firstPeriod\" required>\r\n        <input type=\"datetime-local\" name=\"last_period\" id=\"last_period\" v-model=\"lastPeriod\" required>\r\n        <input type=\"submit\" value=\"Baixar\">\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <div class=\"loading-bar\" v-if=\"loading === true\">\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport MenuApp from \"@/components/portal/_aux/MenuApp\";\r\nimport HeaderApp from \"@/components/portal/_aux/HeaderApp\";\r\nimport Cookie from \"js-cookie\";\r\nimport {AXIOS} from \"../../../../../services/api.ts\";\r\n\r\nexport default {\r\n  name: \"ReportPage\",\r\n  components: {\r\n    MenuApp,\r\n    HeaderApp\r\n  },\r\n  data () {\r\n    return {\r\n      mode: Cookie.get('mode'),\r\n      reports: {},\r\n      url: '',\r\n      name: '',\r\n      reportId: 0,\r\n      modal: false,\r\n      firstPeriod: '',\r\n      lastPeriod: '',\r\n      firstPeriodHour: '',\r\n      lastPeriodHour: '',\r\n      loading: false,\r\n      status: false\r\n    }\r\n  },\r\n  methods: {\r\n    modeView: function (mode) {\r\n      this.mode = mode\r\n    },\r\n    getReports: function() {\r\n\r\n      AXIOS({\r\n        method: 'GET',\r\n        url: 'agereport/report/reports',\r\n        headers: {\r\n          'Authorization': 'Bearer' + Cookie.get('token')\r\n        }\r\n      }).then((res) => {\r\n        this.reports = res.data\r\n        this.status = true\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    downloadReport: function (periodHour, period, url, name, id) {\r\n\r\n      if(period === 1 || periodHour === 1) {\r\n        this.name = name\r\n        this.reportId = id\r\n\r\n        this.modal = true\r\n\r\n      } else {\r\n        this.loading = true\r\n        this.reportId = id\r\n\r\n        AXIOS({\r\n          method: 'GET',\r\n          url: `agereport/report-download/${this.reportId}`,\r\n          headers: {\r\n            'Authorization': 'Bearer '+Cookie.get('token')\r\n          },\r\n          params: {\r\n            firstPeriod: this.firstPeriod,\r\n            lastPeriod: this.lastPeriod,\r\n          },\r\n          responseType: 'blob',\r\n        }).then((res) => {\r\n\r\n          this.loading = false\r\n\r\n          let blob = new Blob([res.data],\r\n              { type: 'vnd.openxmlformats-officedocument.spreadsheetml.sheet' })\r\n          let link = document.createElement('a')\r\n          link.href = window.URL.createObjectURL(blob)\r\n          link.download = name\r\n          link.click()\r\n          this.modal = false\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getReports()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n#content-page {\r\n  overflow-y: auto;\r\n\r\n  h1 {\r\n    font-size: 2.4rem;\r\n    font-weight: 500;\r\n    color: #777;\r\n    padding: 1vh 1vw;\r\n  }\r\n\r\n\r\n  #reports {\r\n    @include container(100%, initial, 1vh 1vw, transparent);\r\n    @include flex(row, flex-start, initial, 20px);\r\n    flex-wrap: wrap;\r\n\r\n    .report {\r\n      @include container(initial, initial, 1vh 1vw, #fff);\r\n      width: calc((100% / 3) - 20px);\r\n      min-height: 5vh;\r\n      border-radius: 5px;\r\n      @include sh-h;\r\n      @include tr-p;\r\n      @include flex(row, flex-start, center, 5px);\r\n      word-break: break-all;\r\n      border: 2px solid #fff;\r\n\r\n      i {\r\n        font-size: 2.4rem;\r\n        color: $age-or;\r\n      }\r\n\r\n      span {\r\n        font-size: 1.4rem;\r\n        text-align: center;\r\n        font-weight: 600;\r\n        color: $age-bl;\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\n#modal {\r\n  #card-modal {\r\n    width: 20vw;\r\n    padding: 1vh 1vw;\r\n\r\n    form {\r\n      @include flex(column, flex-initial, initial, 10px);\r\n      padding: 2vh 3vw;\r\n\r\n      input[type=date] {\r\n        border: 2px solid #cccccc90;\r\n        padding: 10px 3px;\r\n      }\r\n\r\n      input[type=submit] {\r\n        background-color: $age-bl;\r\n        border: 1px solid $age-bl;\r\n        color: #fff;\r\n        margin-top: 10px;\r\n        padding: 5px 15px;\r\n        border-radius: 3px;\r\n        @include tr-p;\r\n\r\n        &:hover {\r\n          background-color: #fff;\r\n          border-color: $age-bl;\r\n          color: $age-bl;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.loading-bar {\r\n  @include bar;\r\n}\r\n\r\n\r\n.mode-l-p {\r\n  background-color: $ml-back-l;\r\n  @include tr;\r\n\r\n}\r\n\r\n.mode-d-p {\r\n  background-color: #161819;\r\n  @include tr;\r\n\r\n  h1 {\r\n    color: $md-text-h1 !important;\r\n  }\r\n\r\n  #reports {\r\n\r\n    .report {\r\n      background-color: $md-back-l !important;\r\n      border: 2px solid $md-back-l !important;\r\n\r\n      span {\r\n        color: $md-text-light !important;\r\n      }\r\n\r\n      &:hover {\r\n        border: 2px solid $age-or;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./ReportPage.vue?vue&type=template&id=43b83f7f&scoped=true\"\nimport script from \"./ReportPage.vue?vue&type=script&lang=js\"\nexport * from \"./ReportPage.vue?vue&type=script&lang=js\"\n\nimport \"./ReportPage.vue?vue&type=style&index=0&id=43b83f7f&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\carlos.neto\\\\Documents\\\\Desenvolvimento\\\\Em progresso\\\\portal\\\\portal_agetelecom_front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-43b83f7f\"]])\n\nexport default __exports__"],"names":["id","_createElementVNode","class","style","type","value","_hoisted_1","_createVNode","_component_MenuApp","mode","$data","system","_hoisted_2","_component_HeaderApp","onMode","$options","undefined","_hoisted_3","_createElementBlock","_hoisted_4","_Fragment","report","key","onClick","isPeriodoHora","isPeriodo","url","nome_arquivo","_hoisted_6","nome","_hoisted_7","_hoisted_8","_hoisted_9","modal","_hoisted_10","action","onSubmit","this","name","reportId","required","_hoisted_11","_hoisted_12","components","MenuApp","HeaderApp","data","Cookie","reports","firstPeriod","lastPeriod","firstPeriodHour","lastPeriodHour","loading","status","methods","modeView","getReports","AXIOS","method","headers","then","res","catch","error","console","log","downloadReport","periodHour","period","params","responseType","blob","Blob","link","document","createElement","href","window","URL","createObjectURL","download","click","mounted","__exports__","render"],"sourceRoot":""}