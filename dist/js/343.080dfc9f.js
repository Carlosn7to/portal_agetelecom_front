"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[343],{8343:function(e,t,o){o.r(t),o.d(t,{default:function(){return F}});var i=o(3396),a=o(9242),r=o(7139);const d=e=>((0,i.dD)("data-v-4915affc"),e=e(),(0,i.Cn)(),e),l=d((()=>(0,i._)("h1",null," Relatórios disponíveis ",-1))),s={id:"filters"},n={key:0,id:"reports"},p={class:"title"},u=d((()=>(0,i._)("i",{class:"fi fi-rr-document-signed"},null,-1))),c={class:"actions"},m=["onClick"],h=d((()=>(0,i._)("i",{class:"fi fi-rr-download"},null,-1))),_=d((()=>(0,i._)("span",null,"Baixar relatório",-1))),f=[h,_],y={key:1,id:"modal"},w={id:"card-modal"},v={id:"close-button"},g=d((()=>(0,i._)("h5",{style:{"text-align":"center","font-size":"1.4rem"}},"Selecione o período",-1))),k=d((()=>(0,i._)("input",{type:"submit",value:"Baixar"},null,-1))),D={key:2,id:"modal"},b={id:"card-modal"},P={id:"close-button"},S=d((()=>(0,i._)("h5",null,"Selecione o período",-1))),E={class:"options-date"},U=d((()=>(0,i._)("label",{for:"type-date"},[(0,i.Uk)("Tipo de filtro: "),(0,i._)("b",null,"*")],-1))),q=d((()=>(0,i._)("option",{value:"day"},"Dia",-1))),V=d((()=>(0,i._)("option",{value:"period"},"Período",-1))),R=[q,V],M={key:0,class:"options-date"},I=d((()=>(0,i._)("label",{for:"date-day"},[(0,i.Uk)("Dia: "),(0,i._)("b",null,"*")],-1))),C={key:1,class:"options-date"},A=d((()=>(0,i._)("label",{for:"date-period"},[(0,i.Uk)("Período Inicial: "),(0,i._)("b",null,"*")],-1))),T={key:2,class:"options-date"},Y=d((()=>(0,i._)("label",{for:"date-period"},[(0,i.Uk)("Período Inicial: "),(0,i._)("b",null,"*")],-1))),x=d((()=>(0,i._)("div",{class:"submit"},[(0,i._)("button",null,"Baixar relatório")],-1)));function B(e,t,o,d,h,_){return(0,i.wg)(),(0,i.iD)(i.HY,null,[l,(0,i._)("div",s,[(0,i.wy)((0,i._)("input",{type:"text",name:"search",id:"search",autocomplete:"off",placeholder:"Pesquisar relatório...","onUpdate:modelValue":t[0]||(t[0]=e=>h.search=e)},null,512),[[a.nr,h.search]])]),!0===h.status?((0,i.wg)(),(0,i.iD)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(_.ReportsFiltered,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"report",key:t,style:(0,r.j5)("animation-delay: "+.1*t+"s")},[(0,i._)("div",p,[u,(0,i._)("span",null,(0,r.zw)(e.nome),1)]),(0,i._)("div",c,[(0,i._)("button",{onClick:t=>_.downloadReport(e.isPeriodoHora,e.isPeriodo,e.nome_arquivo,e.id)},f,8,m)])],4)))),128))])):(0,i.kq)("",!0),null===h.modal?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("div",w,[(0,i._)("div",v,[(0,i._)("i",{class:"fi fi-rr-cross-small",onClick:t[1]||(t[1]=e=>this.modal=!1)})]),g,(0,i._)("form",{action:"#",onSubmit:t[4]||(t[4]=(0,a.iM)((e=>_.downloadReport(0,0,this.name,this.reportId)),["prevent"]))},[(0,i.wy)((0,i._)("input",{type:"datetime-local",name:"first_period",id:"first_period","onUpdate:modelValue":t[2]||(t[2]=e=>h.firstPeriod=e),required:""},null,512),[[a.nr,h.firstPeriod]]),(0,i.wy)((0,i._)("input",{type:"datetime-local",name:"last_period",id:"last_period","onUpdate:modelValue":t[3]||(t[3]=e=>h.lastPeriod=e),required:""},null,512),[[a.nr,h.lastPeriod]]),k],32)])])):(0,i.kq)("",!0),!0===h.modal?((0,i.wg)(),(0,i.iD)("div",D,[(0,i._)("div",b,[(0,i._)("div",P,[(0,i._)("i",{class:"fi fi-rr-cross-small",onClick:t[5]||(t[5]=e=>this.modal=!1)})]),S,(0,i._)("form",{action:"#",onSubmit:t[10]||(t[10]=(0,a.iM)((e=>_.downloadReport(0,0,this.name,this.reportId)),["prevent"]))},[(0,i._)("div",E,[U,(0,i.wy)((0,i._)("select",{name:"type-date","onUpdate:modelValue":t[6]||(t[6]=e=>h.typeDate=e),required:""},R,512),[[a.bM,h.typeDate]])]),"day"===h.typeDate?((0,i.wg)(),(0,i.iD)("div",M,[I,(0,i.wy)((0,i._)("input",{type:"date",name:"date-day",id:"date-day",required:"","onUpdate:modelValue":t[7]||(t[7]=e=>h.dateDay=e)},null,512),[[a.nr,h.dateDay]])])):(0,i.kq)("",!0),"period"===h.typeDate?((0,i.wg)(),(0,i.iD)("div",C,[A,(0,i.wy)((0,i._)("input",{type:"date",name:"date-period",id:"date-period","onUpdate:modelValue":t[8]||(t[8]=e=>h.firstPeriod=e),required:""},null,512),[[a.nr,h.firstPeriod]])])):(0,i.kq)("",!0),"period"===h.typeDate?((0,i.wg)(),(0,i.iD)("div",T,[Y,(0,i.wy)((0,i._)("input",{type:"date",name:"date-period",id:"date-period","onUpdate:modelValue":t[9]||(t[9]=e=>h.lastPeriod=e),required:""},null,512),[[a.nr,h.lastPeriod]])])):(0,i.kq)("",!0),x],32)])])):(0,i.kq)("",!0)],64)}var H=o(680),z=o(8089),L=o(65),Z={name:"ReportPage",components:{},data(){return{mode:H.Z.get("mode"),reports:{},url:"",name:"",reportId:0,modal:!1,typeDate:"",dateDay:"",dateMonth:"01",dateYear:"2023",firstPeriod:"",lastPeriod:"",firstPeriodHour:"",lastPeriodHour:"",loading:!1,status:!1,search:""}},methods:{...(0,L.OI)(["SAVE_MENU","SAVE_SYSTEM"]),modeView:function(e){this.mode=e},getReports:function(){(0,z.m)({method:"GET",url:"agereport/report/reports",headers:{Authorization:"Bearer"+H.Z.get("token")}}).then((e=>{this.reports=e.data,this.status=!0,this.SAVE_SYSTEM({loading:!1})})).catch((e=>{console.log(e)}))},viewReport:function(e){alert(e)},downloadReport:function(e,t,o,i){if(1===t||1===e)this.name=o,this.reportId=i,this.modal=!0;else{this.loading=!0,this.reportId=i,this.SAVE_SYSTEM({loading:!0});let e=()=>{switch(this.typeDate){case"day":return{date:this.dateDay};case"month":return{month:this.dateMonth,year:this.dateYear};case"period":return{firstPeriod:this.firstPeriod,lastPeriod:this.lastPeriod}}};(0,z.m)({method:"GET",url:`agereport/report-download/${this.reportId}`,headers:{Authorization:"Bearer "+H.Z.get("token")},params:e(),responseType:"blob"}).then((e=>{this.loading=!1;let t=new Blob([e.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.download=o,i.click(),this.modal=!1,this.typeDate="",this.SAVE_SYSTEM({loading:!1})}))}}},computed:{...(0,L.Se)(["system"]),ReportsFiltered:function(){let e=[];return e=this.reports.filter((e=>e.nome.toLowerCase().indexOf(this.search.toLowerCase())>-1)),e}},mounted(){this.getReports(),this.SAVE_MENU({system:"agereport",selected:"home"})}},O=o(89);const j=(0,O.Z)(Z,[["render",B],["__scopeId","data-v-4915affc"]]);var F=j}}]);
//# sourceMappingURL=343.080dfc9f.js.map