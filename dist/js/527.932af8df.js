"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[527],{2527:function(e,t,i){i.r(t),i.d(t,{default:function(){return J}});var o=i(3396),a=i(9242),r=i(7139);const d=e=>((0,o.dD)("data-v-75c7c5aa"),e=e(),(0,o.Cn)(),e),l=d((()=>(0,o._)("h1",null," Relatórios disponíveis ",-1))),n={id:"filters"},s={key:0,id:"reports"},p={class:"title"},u=d((()=>(0,o._)("i",{class:"fi fi-rr-document-signed"},null,-1))),c={class:"actions"},m=["onClick"],h=d((()=>(0,o._)("i",{class:"fi fi-rr-eye"},null,-1))),_=d((()=>(0,o._)("span",null,"Visualizar prévia",-1))),f=[h,_],y=["onClick"],w=d((()=>(0,o._)("i",{class:"fi fi-rr-download"},null,-1))),v=d((()=>(0,o._)("span",null,"Baixar relatório",-1))),k=[w,v],g=d((()=>(0,o._)("button",null,[(0,o._)("i",{class:"fi fi-rr-envelope"}),(0,o._)("span",null,"Enviar E-mail")],-1))),b={key:1,id:"modal"},D={id:"card-modal"},P={id:"close-button"},S=d((()=>(0,o._)("h5",{style:{"text-align":"center","font-size":"1.4rem"}},"Selecione o período",-1))),E=d((()=>(0,o._)("input",{type:"submit",value:"Baixar"},null,-1))),U={key:2,id:"modal"},V={id:"card-modal"},q={id:"close-button"},R=d((()=>(0,o._)("h5",null,"Selecione o período",-1))),C={class:"options-date"},M=d((()=>(0,o._)("label",{for:"type-date"},[(0,o.Uk)("Tipo de filtro: "),(0,o._)("b",null,"*")],-1))),I=d((()=>(0,o._)("option",{value:"day"},"Dia",-1))),A=d((()=>(0,o._)("option",{value:"period"},"Período",-1))),T=[I,A],Y={key:0,class:"options-date"},x=d((()=>(0,o._)("label",{for:"date-day"},[(0,o.Uk)("Dia: "),(0,o._)("b",null,"*")],-1))),B={key:1,class:"options-date"},z=d((()=>(0,o._)("label",{for:"date-period"},[(0,o.Uk)("Período Inicial: "),(0,o._)("b",null,"*")],-1))),H={key:2,class:"options-date"},L=d((()=>(0,o._)("label",{for:"date-period"},[(0,o.Uk)("Período Inicial: "),(0,o._)("b",null,"*")],-1))),Z=d((()=>(0,o._)("div",{class:"submit"},[(0,o._)("button",null,"Baixar relatório")],-1)));function O(e,t,i,d,h,_){return(0,o.wg)(),(0,o.iD)(o.HY,null,[l,(0,o._)("div",n,[(0,o.wy)((0,o._)("input",{type:"text",name:"search",id:"search",autocomplete:"off",placeholder:"Pesquisar relatório...","onUpdate:modelValue":t[0]||(t[0]=e=>h.search=e)},null,512),[[a.nr,h.search]])]),!0===h.status?((0,o.wg)(),(0,o.iD)("div",s,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.ReportsFiltered,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"report",key:t,style:(0,r.j5)("animation-delay: "+.1*t+"s")},[(0,o._)("div",p,[u,(0,o._)("span",null,(0,r.zw)(e.nome),1)]),(0,o._)("div",c,[(0,o._)("button",{onClick:t=>_.viewReport(e.id)},f,8,m),(0,o._)("button",{onClick:t=>_.downloadReport(e.isPeriodoHora,e.isPeriodo,e.url,e.nome_arquivo,e.id)},k,8,y),g])],4)))),128))])):(0,o.kq)("",!0),null===h.modal?((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("div",D,[(0,o._)("div",P,[(0,o._)("i",{class:"fi fi-rr-cross-small",onClick:t[1]||(t[1]=e=>this.modal=!1)})]),S,(0,o._)("form",{action:"#",onSubmit:t[4]||(t[4]=(0,a.iM)((e=>_.downloadReport(0,0,this.url,this.name,this.reportId)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"datetime-local",name:"first_period",id:"first_period","onUpdate:modelValue":t[2]||(t[2]=e=>h.firstPeriod=e),required:""},null,512),[[a.nr,h.firstPeriod]]),(0,o.wy)((0,o._)("input",{type:"datetime-local",name:"last_period",id:"last_period","onUpdate:modelValue":t[3]||(t[3]=e=>h.lastPeriod=e),required:""},null,512),[[a.nr,h.lastPeriod]]),E],32)])])):(0,o.kq)("",!0),!0===h.modal?((0,o.wg)(),(0,o.iD)("div",U,[(0,o._)("div",V,[(0,o._)("div",q,[(0,o._)("i",{class:"fi fi-rr-cross-small",onClick:t[5]||(t[5]=e=>this.modal=!1)})]),R,(0,o._)("form",{action:"#",onSubmit:t[10]||(t[10]=(0,a.iM)((e=>_.downloadReport(0,0,this.url,this.name,this.reportId)),["prevent"]))},[(0,o._)("div",C,[M,(0,o.wy)((0,o._)("select",{name:"type-date","onUpdate:modelValue":t[6]||(t[6]=e=>h.typeDate=e),required:""},T,512),[[a.bM,h.typeDate]])]),"day"===h.typeDate?((0,o.wg)(),(0,o.iD)("div",Y,[x,(0,o.wy)((0,o._)("input",{type:"date",name:"date-day",id:"date-day",required:"","onUpdate:modelValue":t[7]||(t[7]=e=>h.dateDay=e)},null,512),[[a.nr,h.dateDay]])])):(0,o.kq)("",!0),"period"===h.typeDate?((0,o.wg)(),(0,o.iD)("div",B,[z,(0,o.wy)((0,o._)("input",{type:"date",name:"date-period",id:"date-period","onUpdate:modelValue":t[8]||(t[8]=e=>h.firstPeriod=e),required:""},null,512),[[a.nr,h.firstPeriod]])])):(0,o.kq)("",!0),"period"===h.typeDate?((0,o.wg)(),(0,o.iD)("div",H,[L,(0,o.wy)((0,o._)("input",{type:"date",name:"date-period",id:"date-period","onUpdate:modelValue":t[9]||(t[9]=e=>h.lastPeriod=e),required:""},null,512),[[a.nr,h.lastPeriod]])])):(0,o.kq)("",!0),Z],32)])])):(0,o.kq)("",!0)],64)}var j=i(680),F=i(8089),G=i(65),N={name:"ReportPage",components:{},data(){return{mode:j.Z.get("mode"),reports:{},url:"",name:"",reportId:0,modal:!1,typeDate:"",dateDay:"",dateMonth:"01",dateYear:"2023",firstPeriod:"",lastPeriod:"",firstPeriodHour:"",lastPeriodHour:"",loading:!1,status:!1,search:""}},methods:{...(0,G.OI)(["SAVE_MENU","SAVE_SYSTEM"]),modeView:function(e){this.mode=e},getReports:function(){(0,F.m)({method:"GET",url:"agereport/report/reports",headers:{Authorization:"Bearer"+j.Z.get("token")}}).then((e=>{this.reports=e.data,this.status=!0,this.SAVE_SYSTEM({loading:!1})})).catch((e=>{console.log(e)}))},viewReport:function(e){alert(e)},downloadReport:function(e,t,i,o,a){if(1===t||1===e)this.name=o,this.reportId=a,this.modal=!0;else{this.loading=!0,this.reportId=a,this.SAVE_SYSTEM({loading:!0});let e=()=>{switch(this.typeDate){case"day":return{date:this.dateDay};case"month":return{month:this.dateMonth,year:this.dateYear};case"period":return{firstPeriod:this.firstPeriod,lastPeriod:this.lastPeriod}}};(0,F.m)({method:"GET",url:`agereport/report-download/${this.reportId}`,headers:{Authorization:"Bearer "+j.Z.get("token")},params:e(),responseType:"blob"}).then((e=>{this.loading=!1;let t=new Blob([e.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.download=o,i.click(),this.modal=!1,this.typeDate="",this.SAVE_SYSTEM({loading:!1})}))}}},computed:{...(0,G.Se)(["system"]),ReportsFiltered:function(){let e=[];return e=this.reports.filter((e=>e.nome.toLowerCase().indexOf(this.search.toLowerCase())>-1)),e}},mounted(){this.getReports(),this.SAVE_MENU({system:"agereport",selected:"home"})}},K=i(89);const $=(0,K.Z)(N,[["render",O],["__scopeId","data-v-75c7c5aa"]]);var J=$}}]);
//# sourceMappingURL=527.932af8df.js.map