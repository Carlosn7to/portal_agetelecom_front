"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[842],{1867:function(e,o,t){t.r(o),t.d(o,{default:function(){return H}});var r=t(3396),i=t(7139),d=t(9242);const a=e=>((0,r.dD)("data-v-43b83f7f"),e=e(),(0,r.Cn)(),e),n={id:"content-app"},s={id:"layer-app"},l=a((()=>(0,r._)("h1",null," Relatórios disponíveis ",-1))),p={key:0,id:"reports"},u=["onClick"],m=a((()=>(0,r._)("i",{class:"fi fi-rr-document-signed"},null,-1))),c={key:0,id:"modal"},h={id:"card-modal"},f={id:"close-button"},g=a((()=>(0,r._)("h5",{style:{"text-align":"center","font-size":"1.4rem"}},"Selecione o período",-1))),_=a((()=>(0,r._)("input",{type:"submit",value:"Baixar"},null,-1))),w={key:1,class:"loading-bar"};function v(e,o,t,a,v,k){const P=(0,r.up)("MenuApp"),y=(0,r.up)("HeaderApp");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",n,[(0,r.Wm)(P,{mode:v.mode,system:"report"},null,8,["mode"]),(0,r._)("div",s,[(0,r.Wm)(y,{onMode:k.modeView},null,8,["onMode"]),(0,r._)("div",{id:"content-page",class:(0,i.C_)({"mode-l-p":"light"===v.mode||void 0===v.mode,"mode-d-p":"dark"===v.mode})},[l,!0===v.status?((0,r.wg)(),(0,r.iD)("div",p,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(v.reports,((e,o)=>((0,r.wg)(),(0,r.iD)("div",{class:"report",key:o,onClick:o=>k.downloadReport(e.isPeriodoHora,e.isPeriodo,e.url,e.nome_arquivo,e.id)},[m,(0,r._)("span",null,(0,i.zw)(e.nome),1)],8,u)))),128))])):(0,r.kq)("",!0)],2)])]),!0===v.modal?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("div",h,[(0,r._)("div",f,[(0,r._)("i",{class:"fi fi-rr-cross-small",onClick:o[0]||(o[0]=e=>this.modal=!1)})]),g,(0,r._)("form",{action:"#",onSubmit:o[3]||(o[3]=(0,d.iM)((e=>k.downloadReport(0,0,this.url,this.name,this.reportId)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"datetime-local",name:"first_period",id:"first_period","onUpdate:modelValue":o[1]||(o[1]=e=>v.firstPeriod=e),required:""},null,512),[[d.nr,v.firstPeriod]]),(0,r.wy)((0,r._)("input",{type:"datetime-local",name:"last_period",id:"last_period","onUpdate:modelValue":o[2]||(o[2]=e=>v.lastPeriod=e),required:""},null,512),[[d.nr,v.lastPeriod]]),_],32)])])):(0,r.kq)("",!0),!0===v.loading?((0,r.wg)(),(0,r.iD)("div",w)):(0,r.kq)("",!0)],64)}var k=t(8489),P=t(156),y=t(680),b=t(8089),R={name:"ReportPage",components:{MenuApp:k.Z,HeaderApp:P.Z},data(){return{mode:y.Z.get("mode"),reports:{},url:"",name:"",reportId:0,modal:!1,firstPeriod:"",lastPeriod:"",firstPeriodHour:"",lastPeriodHour:"",loading:!1,status:!1}},methods:{modeView:function(e){this.mode=e},getReports:function(){(0,b.m)({method:"GET",url:"agereport/report/reports",headers:{Authorization:"Bearer"+y.Z.get("token")}}).then((e=>{this.reports=e.data,this.status=!0})).catch((e=>{console.log(e)}))},downloadReport:function(e,o,t,r,i){1===o||1===e?(this.name=r,this.reportId=i,this.modal=!0):(this.loading=!0,this.reportId=i,(0,b.m)({method:"GET",url:`agereport/report-download/${this.reportId}`,headers:{Authorization:"Bearer "+y.Z.get("token")},params:{firstPeriod:this.firstPeriod,lastPeriod:this.lastPeriod},responseType:"blob"}).then((e=>{this.loading=!1;let o=new Blob([e.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t=document.createElement("a");t.href=window.URL.createObjectURL(o),t.download=r,t.click(),this.modal=!1})))}},mounted(){this.getReports()}},C=t(89);const D=(0,C.Z)(R,[["render",v],["__scopeId","data-v-43b83f7f"]]);var H=D}}]);
//# sourceMappingURL=842.3c441ed0.js.map