"use strict";(self["webpackChunkageportal"]=self["webpackChunkageportal"]||[]).push([[257],{3257:function(t,e,a){a.r(e),a.d(e,{default:function(){return L}});var l=a(3396),o=a(7139),n=a(9242);const d=t=>((0,l.dD)("data-v-9c88705c"),t=t(),(0,l.Cn)(),t),i={class:"container"},s={class:"filters"},c=d((()=>(0,l._)("div",{class:"search"},[(0,l._)("input",{type:"text",name:"search",id:"search",placeholder:"Buscar...",autocomplete:"off"})],-1))),r={class:"filter"},u=d((()=>(0,l._)("i",{class:"fi fi-rs-filter"},null,-1))),_=[u],h=d((()=>(0,l._)("i",{class:"fi fi-rs-file-excel"},null,-1))),m=[h],p={class:"data"},g={class:"table"},f={key:0},w=d((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Protocolo"),(0,l._)("th",null,"Status"),(0,l._)("th",null,"Tipo de solicitação"),(0,l._)("th",null,"Nº do contrato"),(0,l._)("th",null,"Nome do cliente"),(0,l._)("th",null,"Equipe"),(0,l._)("th",null,"Técnico"),(0,l._)("th",null,"Data inicio att."),(0,l._)("th",null,"Data fim att."),(0,l._)("th",null,"Data inicio agendamento"),(0,l._)("th",null,"Data fim agendamento"),(0,l._)("th",null,"Situacao do contrato"),(0,l._)("th",null,"Status do contrato"),(0,l._)("th",null,"Contexto"),(0,l._)("th",null,"Problema")])],-1))),y={key:0,class:"modal-filters"},b={class:"card-modal"},v={class:"close-button"},S=d((()=>(0,l._)("h2",null,"Filtros disponíveis",-1))),k={class:"filters-available"},D={class:"filter-available"},z=d((()=>(0,l._)("label",{for:"typeNote"},"Tipo de solicitação: ",-1))),N=d((()=>(0,l._)("option",{value:"0",selected:""},"--- Selecione um tipo de solicitação ---",-1))),T=["value"],x={class:"filter-available"},A=d((()=>(0,l._)("label",{for:"dateSchedule"},[(0,l.Uk)("Data do agendamento: "),(0,l._)("b",null,"*")],-1))),E={class:"filter-available"},C=d((()=>(0,l._)("label",{for:"region"},"Região: ",-1))),I=d((()=>(0,l._)("option",{value:"0",selected:""},"--- Selecione a região ---",-1))),q=["value"],U=d((()=>(0,l._)("div",{class:"filter-data"},[(0,l._)("button",null,"Filtrar")],-1)));function M(t,e,a,d,u,h){const M=(0,l.up)("LoadingSpinner");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",i,[(0,l._)("div",s,[c,(0,l._)("div",r,[(0,l._)("button",{onClick:e[0]||(e[0]=(...t)=>h.modalAction&&h.modalAction(...t))},_),u.dataItems.length?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:e[1]||(e[1]=(...t)=>h.download&&h.download(...t))},m)):(0,l.kq)("",!0)]),(0,l._)("span",null,[(0,l.Uk)("Contagem do resultado: "),(0,l._)("b",null,(0,o.zw)(u.dataItems.length?u.dataItems.length:0),1)])]),(0,l._)("div",p,[(0,l._)("div",g,[u.loading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("table",f,[w,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.dataItems,((t,e)=>((0,l.wg)(),(0,l.iD)("tr",{key:e},[(0,l._)("td",null,(0,o.zw)(t.protocol),1),(0,l._)("td",null,(0,o.zw)(t.status),1),(0,l._)("td",null,(0,o.zw)(t.type_note),1),(0,l._)("td",null,(0,o.zw)(t.contract_id),1),(0,l._)("td",null,(0,o.zw)(t.name_client),1),(0,l._)("td",null,(0,o.zw)(t.team),1),(0,l._)("td",null,(0,o.zw)(t.technical),1),(0,l._)("td",null,(0,o.zw)(t.date_start_attendance),1),(0,l._)("td",null,(0,o.zw)(t.date_end_attendance),1),(0,l._)("td",null,(0,o.zw)(t.date_start_schedule),1),(0,l._)("td",null,(0,o.zw)(t.date_end_schedule),1),(0,l._)("td",null,(0,o.zw)(t.stage_contract),1),(0,l._)("td",null,(0,o.zw)(t.status_contract),1),(0,l._)("td",null,(0,o.zw)(t.context),1),(0,l._)("td",null,(0,o.zw)(t.problem),1)])))),128))])])),u.loading?((0,l.wg)(),(0,l.j4)(M,{key:1})):(0,l.kq)("",!0)])])]),u.modal?((0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("div",b,[(0,l._)("div",v,[(0,l._)("i",{class:"fi fi-rs-cross",onClick:e[2]||(e[2]=(...t)=>h.modalAction&&h.modalAction(...t))})]),S,(0,l._)("form",{action:"#",onSubmit:e[6]||(e[6]=(0,n.iM)(((...t)=>h.getData&&h.getData(...t)),["prevent"]))},[(0,l._)("div",k,[(0,l._)("div",D,[z,(0,l.wy)((0,l._)("select",{name:"typeNote",id:"typeNote","onUpdate:modelValue":e[3]||(e[3]=t=>u.payload.typeNote=t)},[N,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.filters.typeNote,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t.id,key:t.id},(0,o.zw)(t.title),9,T)))),128))],512),[[n.bM,u.payload.typeNote]])]),(0,l._)("div",x,[A,(0,l.wy)((0,l._)("input",{type:"date",name:"dateSchedule",id:"dateSchedule","onUpdate:modelValue":e[4]||(e[4]=t=>u.payload.dateSchedule=t),required:""},null,512),[[n.nr,u.payload.dateSchedule]])]),(0,l._)("div",E,[C,(0,l.wy)((0,l._)("select",{name:"region",id:"region","onUpdate:modelValue":e[5]||(e[5]=t=>u.payload.region=t)},[I,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.filters.region,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t.id,key:t.id},(0,o.zw)(t.title),9,q)))),128))],512),[[n.bM,u.payload.region]])]),U])],32)])])):(0,l.kq)("",!0)],64)}var Y=a(65),B=a(8089),H=a(680),P=a(9372),V={name:"HomeSchedule",components:{LoadingSpinner:P.Z},data(){return{filtered:!1,modal:!1,filters:{typeNote:{},region:{}},payload:{typeNote:0,dateSchedule:null,region:0},loading:!1,dataItems:{}}},methods:{...(0,Y.OI)(["SAVE_SYSTEM"]),modalAction(){this.modal=!this.modal},getFilters:function(){(0,B.m)({method:"GET",url:"agetools/tools/schedule/dashboard/filters",headers:{Authorization:"Bearer "+H.Z.get("token")}}).then((t=>{this.filters.typeNote=t.data.typeNotes,this.filters.region=t.data.regions}))},getData:function(){this.loading=!0,this.modal=!1,(0,B.m)({method:"GET",url:"agetools/tools/schedule/dashboard/data",params:{dateSchedule:this.payload.dateSchedule,typeNote:this.payload.typeNote,region:this.payload.region},headers:{Authorization:"Bearer "+H.Z.get("token")}}).then((t=>{this.loading=!1,this.dataItems=t.data}))},download:function(){const t=["Protocolo","Status","Tipo de solicitação","Equipe","Técnico","Data inicio att.","Data fim att.","Data inicio agendamento","Data fim agendamento","Nome do cliente","Nº do contrato","Situacao do contrato","Status do contrato","Contexto","Problema"],e=this.dataItems;(0,B.m)({method:"POST",url:"agetools/tools/schedule/dashboard/download-excel",data:{headersExcel:t,data:e},responseType:"blob",headers:{Authorization:"Bearer "+H.Z.get("token")}}).then((t=>{let e=new Blob([t.data],{type:"vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.download="agenda.xlsx",a.click()}))}},computed:{...(0,Y.Se)(["system"])},beforeMount(){this.SAVE_SYSTEM({loading:!1}),this.getFilters()}},Z=a(89);const F=(0,Z.Z)(V,[["render",M],["__scopeId","data-v-9c88705c"]]);var L=F}}]);
//# sourceMappingURL=257.12e28d7b.js.map